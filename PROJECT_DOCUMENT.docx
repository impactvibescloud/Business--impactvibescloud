PROJECT: Business--impactvibescloud
DOCUMENT: Project Details and Project Flow
GENERATED: 2025-11-21

---
OVERVIEW
---
This document records the project details and project flow for the `Business--impactvibescloud` frontend repository (React). It lists the high-level tech stack, run/build instructions, key API configuration and endpoints, the routing/navigation mapping points, recent frontend changes (implemented during the current session), and the recommended project flow.

---
TECH STACK (summary from `package.json`)
---
- React 18
- CoreUI React components (`@coreui/react` v4)
- Axios for HTTP
- Redux / @reduxjs/toolkit
- React Router DOM v6
- Bootstrap 5
- MUI (some components)
- Other utilities: sweetalert2, moment, lodash, xlsx, jspdf, file-saver
- Build tools: react-scripts, cross-env

Run / Build commands (from `package.json`):
- `npm run dev` => react-scripts start (dev server)
- `npm run build` => production build (various build flavors exist: `build:fast`, `build:safe`)
- `npm start` => serve -s build (serves built app)

Proxy: `proxy` set to `http://localhost:5040` in `package.json` (used in development)

Node engine: >=18.x

---
KEY CONFIG / API
---
File: `src/config/api.js` (summary)
- Provides `API_CONFIG` with DEV_URL (from `REACT_APP_API_URL` or `http://localhost:5040`) and PROD_URL.
- `API_CONFIG.API_PATH` is `/api` and `apiCall()` prefixes endpoints with this path for relative endpoints.
- `getBaseURL()` returns the host-only base URL (no `/api`) used in some direct axios calls.
- `ENDPOINTS` object includes many named endpoints, notably:
  - `USER_DETAILS`: `/v1/user/details`
  - `BILLING_UPDATE(id)`: `/billing/${id}`
  - `BRANCHES`: `/branches`
  - `NUMBERS`: `/numbers`
  - `TICKETS`: `/tickets`
  - `CONTACTS`, `CONTACT_LISTS`, etc.
- `apiCall(endpoint, method, data, options)` wraps axios and returns `response.data`.

Important behavior:
- `apiCall()` centralizes `/api` prefix and headers (Authorization from `localStorage.authToken`).
- Some components use `getBaseURL()` + axios.post for multipart uploads (so they build full URL + `/api/...`).

---
ROUTES AND NAVIGATION
---
- Routing file: `src/routes.js` — lazy-loaded components and route objects.
- Sidebar navigation: `src/_nav.js` — maps nav groups and items to route paths.

(Example current campaign routes)
- `/campaigns/audio` -> `src/views/Campaigns/AudioCampaign.jsx` (Audio campaign page)

Note: Autodial and Surveys routes and nav items were removed from the routing and nav during recent edits (they still exist as source files if needed).

---
RECENT FRONTEND CHANGES (session highlights)
---
- PaymentRequests: rejection flow updated to collect `rejectionReason`, generate `rejectionCode`, and send `rejectedAt` along with status update to `PUT /api/billing/:id` (file: `src/views/Billing/PaymentRequests.jsx`).
- Branches: added a Bulk Upload button and multipart upload handler posting to `/api/branch/upload` sending `file` + `businessId` (file: `src/views/Branches/Branches.js`).
- Campaigns:
  - Created `AudioCampaign.jsx` at `src/views/Campaigns/AudioCampaign.jsx` — form to create audio campaigns (multipart upload: name, businessId, didNumber, scheduledAt, file, audio) and fetch campaigns list.
  - Moved create campaign form inside a `New Campaign` modal and added a `New Campaign` button in the Audio Campaign header.
  - Campaign list fetching normalized to accept API responses shaped like `{ success: true, data: [...] }` and other shapes, rendering campaigns in a responsive table.
  - DID dropdown populated via `apiCall('/numbers/assigned-to/${businessId}')`.
- Navigation and routes: Enabled Campaigns group and added Audio item; removed Autodial/Surveys from nav and routes per user request.

---
VIEW WORKFLOW DETAILS
---

Campaigns/AudioCampaign.jsx
- Workflow: User opens the Audio Campaign page, clicks 'New Campaign', fills out campaign details (name, DID, schedule), uploads contacts and optional audio file. On submit, the form data is sent as multipart POST to `/api/campaigns/upload`. The businessId is auto-fetched from `/v1/user/details`, and available DID numbers are fetched from `/numbers/assigned-to/{businessId}`. After creation, the campaign list is fetched from `/api/campaigns?businessId=...` and displayed in a table.
- APIs used: `/v1/user/details` (GET), `/numbers/assigned-to/{businessId}` (GET), `/api/campaigns/upload` (POST), `/api/campaigns?businessId=...` (GET)
- Why: Enables businesses to create and manage outbound audio campaigns, track status, and view campaign history.

Billing/PaymentRequests.jsx
- Workflow: User views payment requests, can create new requests or reject existing ones. On rejection, a modal collects the reason, generates a code, and sends a PUT to `/api/billing/{id}` with status, paymentStatus, rejectionReason, rejectionCode, and rejectedAt. The payment request list is fetched from `/billing/business/{businessId}`.
- APIs used: `/billing/business/{businessId}` (GET), `/billing/{id}` (PUT), `/v1/user/details` (GET)
- Why: Allows businesses to manage incoming/outgoing payment requests, track status, and provide rejection reasons for audit and notification purposes.

Branches/Branches.js
- Workflow: User sees a paginated/searchable list of branches/agents. Can add, edit, delete, or bulk upload branches via a file. Bulk upload posts a multipart file and businessId to `/api/branch/upload`. Branches are fetched from `/branches` or `/branch/{businessId}/branches`.
- APIs used: `/branches` (GET/POST/PUT/DELETE), `/api/branch/upload` (POST), `/branch/{businessId}/branches` (GET)
- Why: Centralizes management of business branches/agents, supports bulk onboarding, and enables CRUD operations.

dashboard/Dashboard.js
- Workflow: On load, fetches user and agent statistics, widgets, and summary data for the logged-in business. Uses `/api/branch/{businessId}/branches` to get agent list and status counts. Displays widgets and summary cards.
- APIs used: `/api/branch/{businessId}/branches` (GET), `/v1/user/details` (GET)
- Why: Provides a business overview, key metrics, and quick access to agent/branch status for admins.

ReportsAnalytics/ReportsAnalytics.jsx
- Workflow: User selects report type, date range, and filters. Fetches business data logs and analytics from backend APIs (typically `/reports` or custom endpoints). Supports searching, filtering, and downloading reports.
- APIs used: `/reports` (GET), plus any custom analytics endpoints as configured.
- Why: Enables business users to analyze activity, access logs, and download reports for compliance and performance tracking.

