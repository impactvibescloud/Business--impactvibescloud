"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9263],{28627:function(e){e.exports=[]},35183:function(e,i,n){n(9950);var r=n(1320),s=n(2235),l=n(15769),t=n(69780),d=n(9213),c=n(21671),o=n(34075),a=n(25277),h=n(44414);i.A=e=>{let{invoices:i}=e;return(0,h.jsx)(r.A,{component:s.A,children:(0,h.jsxs)(l.A,{children:[(0,h.jsx)(t.A,{children:(0,h.jsxs)(d.A,{children:[(0,h.jsx)(c.A,{children:"Invoice ID"}),(0,h.jsx)(c.A,{children:"Invoice Items"}),(0,h.jsx)(c.A,{children:"Subtotal"}),(0,h.jsx)(c.A,{children:"GST Total"}),(0,h.jsx)(c.A,{children:"Invoice Amount"}),(0,h.jsx)(c.A,{children:"Courier Status"})]})}),(0,h.jsx)(o.A,{children:i.map(e=>(0,h.jsxs)(d.A,{children:[(0,h.jsx)(c.A,{children:e.invoiceId}),(0,h.jsx)(c.A,{children:e.items.map(e=>(0,h.jsxs)("div",{children:[e.name," (",e.SKU,") x ",(0,h.jsx)("b",{children:e.processquantity})]},e.productId))}),(0,h.jsxs)(c.A,{children:["\u20b9",e.subtotal.toFixed(2)]}),(0,h.jsxs)(c.A,{children:["\u20b9",e.gstTotal.toFixed(2)]}),(0,h.jsxs)(c.A,{children:["\u20b9",e.invoiceAmount.toFixed(2)]}),(0,h.jsx)(c.A,{children:(0,h.jsx)(a.A,{label:e.courierStatus,color:"delivered"===e.courierStatus?"success":"dispatched"===e.courierStatus?"primary":"warning"})})]},e.invoiceId))})]})})}},39263:function(e,i,n){n.r(i);var r=n(9950),s=n(82053),l=n(78317),t=n(10226),d=n(60899),c=n(2235),o=n(15769),a=n(69780),h=n(9213),x=n(21671),u=n(34075),A=n(25277),j=n(74745),m=n(25979),v=n(63464),g=n(40033),p=n(28170),y=n(6493),S=n(79739),b=n(3788),f=n(27138),I=n(11088),C=n(29925),T=(n(28627),n(28429)),w=n(1320),F=n(26910),k=n(11031),B=n(4695),G=n.n(B),P=(n(55988),n(35183),n(81371),n(44414));i.default=()=>{var e,i,n,B,D,_,Q,N;const[q,U]=(0,r.useState)(null),[W,M]=(0,r.useState)(""),[z,O]=(0,r.useState)(!1),[E,R]=(0,r.useState)(!1),[K,L]=(0,r.useState)(!1),[H,Z]=(0,r.useState)(""),[J,V]=(0,r.useState)(""),[X,Y]=(0,r.useState)(""),$=(0,k.g)(),[ee,ie]=(0,r.useState)(""),[ne,re]=(0,r.useState)(!0),[se,le]=(0,r.useState)(null),te=(0,T.Zp)(),{id:de}=(0,T.g)();(0,r.useEffect)(()=>{(async()=>{try{const e=await F.A.get("/api/invoice/details/".concat(de),{headers:{Authorization:"Bearer ".concat($)}});console.log(e),U(e.data),M(e.data.courierStatus),re(!1)}catch(e){console.log(e),le("Failed to fetch order details"),re(!1)}})()},[de]);const ce=async e=>{e.preventDefault();try{if("dispatched"===ee){200===(await F.A.put("/api/invoice/dispatched/".concat(de),{courierName:H,couriertrackingId:J,transporterName:ae},{headers:{Authorization:"Bearer ".concat($)}})).status&&(G().fire("Invoice Status updated","Invoice Dispatched","success"),te("/orders/dispatched"))}else if("delivered"===ee){200===(await F.A.put("/api/invoice/delivered/".concat(de),{},{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat($)}})).status&&(G().fire("Order Status updated","Order  Dispatched","success"),te("/orders/delivered"))}}catch(se){G().fire("Something went wrong ",se.message,"error")}R(!1),L(!1)},oe=async()=>{R(!1),L(!1)},[ae,he]=(0,r.useState)(""),[xe,ue]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async()=>{try{re(!0);const i=await F.A.get("/api/transporter/get",{headers:{Authorization:"Bearer ".concat($)}});var e;200===i.status&&ue(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.transporters)}catch(se){console.error("Failed to fetch brands:",se)}finally{re(!1)}})()},[]),ne?(0,P.jsx)(s.A,{children:"Loading..."}):se?(0,P.jsx)(s.A,{color:"error",children:se}):(0,P.jsxs)(l.A,{children:[(0,P.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:5,children:[(0,P.jsxs)(s.A,{variant:"h4",sx:{flexGrow:1,textAlign:"center"},children:["Invoice Id : ",null===q||void 0===q?void 0:q.invoiceId]}),(0,P.jsx)(t.A,{color:"primary",onClick:()=>te("/orders/".concat(W)),variant:"contained",children:"Back"})]}),(0,P.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,P.jsx)(d.Ay,{item:!0,md:8,xl:8,lg:8,children:(0,P.jsxs)(l.A,{sx:{padding:2,background:"#fff"},children:[(0,P.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:"Invoice"}),(0,P.jsx)(w.A,{component:c.A,children:(0,P.jsxs)(o.A,{children:[(0,P.jsx)(a.A,{children:(0,P.jsxs)(h.A,{children:[(0,P.jsx)(x.A,{children:"Invoice ID"}),(0,P.jsx)(x.A,{children:"Invoice Items"}),(0,P.jsx)(x.A,{children:"Subtotal"}),(0,P.jsx)(x.A,{children:"GST Total"}),(0,P.jsx)(x.A,{children:"Invoice Amount"}),(0,P.jsx)(x.A,{children:"Courier Status"})]})}),(0,P.jsx)(u.A,{children:(0,P.jsxs)(h.A,{children:[(0,P.jsx)(x.A,{children:null===q||void 0===q?void 0:q.invoiceId}),(0,P.jsx)(x.A,{children:null===q||void 0===q||null===(e=q.items)||void 0===e?void 0:e.map(e=>(0,P.jsxs)("div",{children:[null===e||void 0===e?void 0:e.name," (",null===e||void 0===e?void 0:e.SKU,") x"," ",(0,P.jsx)("b",{children:null===e||void 0===e?void 0:e.processquantity})]},e.productId))}),(0,P.jsxs)(x.A,{children:["\u20b9",null===q||void 0===q?void 0:q.subtotal.toFixed(2)]}),(0,P.jsxs)(x.A,{children:["\u20b9",null===q||void 0===q?void 0:q.gstTotal.toFixed(2)]}),(0,P.jsxs)(x.A,{children:["\u20b9",null===q||void 0===q?void 0:q.invoiceAmount.toFixed(2)]}),(0,P.jsx)(x.A,{children:(0,P.jsx)(A.A,{label:null===q||void 0===q?void 0:q.courierStatus,color:"delivered"===(null===q||void 0===q?void 0:q.courierStatus)?"success":"dispatched"===(null===q||void 0===q?void 0:q.courierStatus)?"primary":"warning"})})]},null===q||void 0===q?void 0:q.invoiceId)})]})}),(0,P.jsx)(d.Ay,{container:!0,spacing:2,children:(0,P.jsx)(d.Ay,{item:!0,sm:6,md:6,xl:6,children:(0,P.jsxs)(l.A,{sx:{marginTop:4,padding:2,backgroundColor:"blue",color:"white"},children:[(0,P.jsx)(s.A,{variant:"h5",gutterBottom:!0,children:"Invoice Summary"}),(0,P.jsx)(j.A,{sx:{marginBottom:2}}),(0,P.jsxs)(s.A,{children:["Total Items: ",null===q||void 0===q?void 0:q.items.length]}),(0,P.jsxs)(s.A,{children:["Total Subtotal: \u20b9",null===q||void 0===q?void 0:q.subtotal]}),(0,P.jsxs)(s.A,{children:["Total GST: \u20b9",null===q||void 0===q?void 0:q.gstTotal.toFixed(2)]}),(0,P.jsxs)(s.A,{variant:"h5",sx:{marginTop:2},children:["Grand Total: \u20b9",null===q||void 0===q?void 0:q.invoiceAmount]})]})})})]})}),(0,P.jsxs)(d.Ay,{item:!0,md:4,xl:4,lg:4,children:[(0,P.jsx)(l.A,{sx:{background:"#fff",padding:"1rem",borderRadius:"0.8rem"},children:(0,P.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,P.jsxs)(d.Ay,{item:!0,sm:12,md:12,lg:12,children:[(0,P.jsx)(s.A,{variant:"h5",sx:{mb:"0.5rem"},children:"Customer Details"}),(0,P.jsxs)(s.A,{sx:{mb:"0.5rem"},children:[(0,P.jsx)("strong",{children:"SBU:"})," ",null===q||void 0===q||null===(i=q.orderId)||void 0===i?void 0:i.addedBy.SBU]}),(0,P.jsxs)(s.A,{sx:{mb:"0.5rem"},children:[(0,P.jsx)("strong",{children:"Name:"})," ",null===q||void 0===q||null===(n=q.orderId)||void 0===n?void 0:n.addedBy.name]}),(0,P.jsxs)(s.A,{sx:{mb:"0.5rem"},children:[(0,P.jsx)("strong",{children:"Email id:"})," ",null===q||void 0===q||null===(B=q.orderId)||void 0===B?void 0:B.addedBy.email]}),(0,P.jsxs)(s.A,{sx:{mb:"0.5rem"},children:[(0,P.jsx)("strong",{children:"Number:"})," ",null===q||void 0===q||null===(D=q.orderId)||void 0===D?void 0:D.addedBy.phone]})]}),(0,P.jsxs)(d.Ay,{item:!0,sm:6,md:6,lg:6,children:[(0,P.jsx)(s.A,{variant:"h5",sx:{mb:"0.5rem"},children:"Bill Address"}),(0,P.jsx)(s.A,{sx:{mb:"0.5rem"},children:null===q||void 0===q||null===(_=q.orderId)||void 0===_?void 0:_.billTo})]}),(0,P.jsxs)(d.Ay,{item:!0,sm:6,md:6,lg:6,children:[(0,P.jsx)(s.A,{variant:"h5",sx:{mb:"0.5rem"},children:"Ship Address"}),(0,P.jsx)(s.A,{sx:{mb:"0.5rem"},children:null===q||void 0===q||null===(Q=q.orderId)||void 0===Q?void 0:Q.shipTo})]}),(0,P.jsxs)(d.Ay,{item:!0,sm:6,md:6,lg:6,children:[(0,P.jsx)(s.A,{variant:"h5",sx:{mb:"0.5rem"},children:"Payment mode"}),(0,P.jsx)(s.A,{sx:{mb:"0.5rem"},children:null===q||void 0===q||null===(N=q.orderId)||void 0===N?void 0:N.paymentMode})]})]})}),"delivered"!==(null===q||void 0===q?void 0:q.status)&&(0,P.jsx)(m.A,{fullWidth:!0,sx:{mt:2},children:(0,P.jsxs)("select",{className:"form-control",onChange:e=>{ie(e.target.value)},value:ee,children:["processing"===W&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("option",{value:"",children:"Processing"}),(0,P.jsx)("option",{value:"dispatched",children:"Dispatch"})]}),"dispatched"===W&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("option",{value:"",children:"Dispatched"}),(0,P.jsx)("option",{value:"delivered",children:"Delivered"})]})]})}),ee&&(0,P.jsx)(t.A,{variant:"contained",color:"primary",onClick:()=>{"dispatched"===ee?R(!0):"delivered"===ee&&L(!0)},sx:{mt:2},children:"Update Status"})]})]}),(0,P.jsxs)(v.A,{open:z,onClose:oe,children:[(0,P.jsx)(g.A,{children:"Update Order Status"}),(0,P.jsx)(p.A,{children:(0,P.jsxs)(y.A,{children:["Are you sure you want to update the status to ",ee,"?"]})}),(0,P.jsxs)(S.A,{children:[(0,P.jsx)(t.A,{onClick:oe,variant:"outlined",color:"primary",children:"Cancel"}),(0,P.jsx)(t.A,{onClick:ce,variant:"contained",color:"success",autoFocus:!0,children:"Confirm"})]})]}),(0,P.jsxs)(v.A,{open:E,onClose:oe,children:[(0,P.jsx)(g.A,{children:"Dispatch Details"}),(0,P.jsxs)("form",{onSubmit:ce,children:[(0,P.jsxs)(p.A,{children:[(0,P.jsx)(y.A,{children:"Please provide the transporter name:"}),(0,P.jsxs)(m.A,{fullWidth:!0,variant:"outlined",sx:{mt:2},children:[(0,P.jsx)(b.A,{id:"courier-name-label",children:"Transporter Name"}),(0,P.jsxs)(f.A,{labelId:"courier-name-label",id:"courier_name",value:ae||"",onChange:e=>he(e.target.value),label:"Transporter Name",MenuProps:{PaperProps:{style:{maxHeight:200}}},children:[(0,P.jsx)(I.A,{value:"",children:(0,P.jsx)("em",{children:"Select Transporter name "})}),null===xe||void 0===xe?void 0:xe.map(e=>(0,P.jsx)(I.A,{value:e.transporterName,children:e.transporterName},e._id))]})]})]}),(0,P.jsxs)(S.A,{children:[(0,P.jsx)(t.A,{onClick:oe,color:"primary",children:"Cancel"}),(0,P.jsx)(t.A,{type:"submit",variant:"contained",color:"success",autoFocus:!0,children:"Confirm"})]})]})]}),(0,P.jsxs)(v.A,{open:K,onClose:oe,children:[(0,P.jsx)(g.A,{children:"Confirm Delivery"}),(0,P.jsxs)("form",{onSubmit:ce,children:[(0,P.jsxs)(p.A,{children:[(0,P.jsx)(y.A,{children:"Please confirm the delivery details:"}),(0,P.jsx)(m.A,{required:!0,children:(0,P.jsx)(C.A,{autoFocus:!0,required:!0,margin:"dense",label:"Delivery Date",type:"date",fullWidth:!0,variant:"outlined",value:X,onChange:e=>Y(e.target.value),InputLabelProps:{shrink:!0}})})]}),(0,P.jsxs)(S.A,{children:[(0,P.jsx)(t.A,{onClick:oe,variant:"outlined",color:"primary",children:"Cancel"}),(0,P.jsx)(t.A,{onClick:ce,variant:"contained",color:"success",autoFocus:!0,children:"Confirm"})]})]})]})]})}},55988:function(e,i,n){var r=n(9950),s=n(63464),l=n(40033),t=n(28170),d=n(60899),c=n(1320),o=n(2235),a=n(15769),h=n(69780),x=n(9213),u=n(21671),A=n(34075),j=n(82053),m=n(29925),v=n(79739),g=n(10226),p=n(44414);i.A=e=>{let{open:i,onClose:n,order:y,onSubmit:S}=e;const[b,f]=(0,r.useState)(null===y||void 0===y?void 0:y.orderItem.map(e=>({...e,processquantity:e.remainingQuantity})));return(0,p.jsxs)(s.A,{open:i,onClose:n,maxWidth:"md",fullWidth:!0,children:[(0,p.jsx)(l.A,{children:"Modify Product Availability"}),(0,p.jsx)(t.A,{children:(0,p.jsx)(d.Ay,{container:!0,spacing:2,children:(0,p.jsx)(d.Ay,{item:!0,xs:12,children:(0,p.jsx)(c.A,{component:o.A,children:(0,p.jsxs)(a.A,{children:[(0,p.jsx)(h.A,{children:(0,p.jsxs)(x.A,{children:[(0,p.jsx)(u.A,{children:"Product"}),(0,p.jsx)(u.A,{align:"right",children:"Price (\u20b9)"}),(0,p.jsx)(u.A,{align:"right",children:"Quantity"}),(0,p.jsx)(u.A,{align:"right",children:"Availability"}),(0,p.jsx)(u.A,{align:"right",children:"Subtotal (\u20b9)"}),(0,p.jsx)(u.A,{align:"right",children:"GST (%)"}),(0,p.jsx)(u.A,{align:"right",children:"GST Amount (\u20b9)"}),(0,p.jsx)(u.A,{align:"right",children:"Total with GST (\u20b9)"})]})}),(0,p.jsx)(A.A,{children:null===y||void 0===y?void 0:y.orderItem.map((e,i)=>{const n=e.price*e.remainingQuantity,r=e.GST*e.price/100*e.remainingQuantity,s=n+r;return(0,p.jsxs)(x.A,{children:[(0,p.jsxs)(u.A,{children:[(0,p.jsx)("img",{src:null===e||void 0===e?void 0:e.image,style:{width:50,height:50,marginRight:10}}),(0,p.jsx)(j.A,{variant:"subtitle1",children:null===e||void 0===e?void 0:e.name})]}),(0,p.jsxs)(u.A,{align:"right",children:["\u20b9",e.price]}),(0,p.jsx)(u.A,{align:"right",children:e.remainingQuantity}),(0,p.jsx)(u.A,{align:"right",children:(0,p.jsx)(m.A,{sx:{minWidth:"100px"},type:"number",value:b[i].processquantity,onChange:e=>((e,i)=>{const n=[...b],r=Math.max(0,Math.min(i,n[e].remainingQuantity));n[e].processquantity=r,f(n)})(i,Number(e.target.value)),inputProps:{min:0,max:e.remainingQuantity},style:{width:"60px",textAlign:"center"}})}),(0,p.jsxs)(u.A,{align:"right",children:["\u20b9",n]}),(0,p.jsxs)(u.A,{align:"right",children:[e.GST,"%"]}),(0,p.jsxs)(u.A,{align:"right",children:["\u20b9",r]}),(0,p.jsxs)(u.A,{align:"right",children:["\u20b9",s]})]},i)})})]})})})})}),(0,p.jsxs)(v.A,{children:[(0,p.jsx)(g.A,{onClick:n,children:"Cancel"}),(0,p.jsx)(g.A,{onClick:()=>{S(b),n()},variant:"contained",color:"primary",children:"Submit"})]})]})}},81371:function(e,i,n){var r=n(78317),s=n(60899),l=n(1320),t=n(2235),d=n(15769),c=n(69780),o=n(9213),a=n(21671),h=n(34075),x=n(82053),u=(n(9950),n(44414));i.A=e=>{let{order:i}=e;return(0,u.jsx)(r.A,{children:(0,u.jsx)(s.Ay,{container:!0,spacing:2,children:(0,u.jsx)(s.Ay,{item:!0,xs:12,children:(0,u.jsx)(l.A,{component:t.A,children:(0,u.jsxs)(d.A,{children:[(0,u.jsx)(c.A,{children:(0,u.jsxs)(o.A,{children:[(0,u.jsx)(a.A,{children:"Product"}),(0,u.jsx)(a.A,{align:"center",children:"Price (\u20b9)"}),(0,u.jsx)(a.A,{align:"center",children:"Pending Quantity"}),(0,u.jsx)(a.A,{align:"center",children:"Subtotal (\u20b9)"}),(0,u.jsx)(a.A,{align:"center",children:"GST (%)"}),(0,u.jsx)(a.A,{align:"center",children:"GST Amount (\u20b9)"}),(0,u.jsx)(a.A,{align:"center",children:"Total with GST (\u20b9)"})]})}),(0,u.jsx)(h.A,{children:null===i||void 0===i?void 0:i.orderItem.map((e,i)=>{if(e.remainingQuantity>0){const n=e.price*e.remainingQuantity,r=e.GST*e.price/100*e.remainingQuantity,s=n+r;return(0,u.jsxs)(o.A,{children:[(0,u.jsxs)(a.A,{children:[(0,u.jsx)("img",{src:null===e||void 0===e?void 0:e.image,style:{width:50,height:50,marginRight:10}}),(0,u.jsx)(x.A,{variant:"subtitle1",children:null===e||void 0===e?void 0:e.name})]}),(0,u.jsxs)(a.A,{align:"center",children:["\u20b9",e.price.toFixed(2)]}),(0,u.jsx)(a.A,{align:"center",children:e.remainingQuantity}),(0,u.jsxs)(a.A,{align:"center",children:["\u20b9",n.toFixed(2)]}),(0,u.jsxs)(a.A,{align:"center",children:[e.GST.toFixed(2),"%"]}),(0,u.jsxs)(a.A,{align:"center",children:["\u20b9",r.toFixed(2)]}),(0,u.jsxs)(a.A,{align:"center",children:["\u20b9",s.toFixed(2)]})]},i)}return null})})]})})})})})}}}]);