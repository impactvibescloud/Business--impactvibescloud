"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[924],{10924:function(e,r,t){t.r(r);var n=t(9950),a=t(2235),s=t(82053),i=t(46639),o=t(1320),c=t(15769),l=t(69780),d=t(9213),h=t(21671),u=t(34075),A=t(25277),m=t(10226),x=t(9567),v=t(11031),f=t(26910),g=t(28429),p=t(44414);r.default=()=>{const[e,r]=(0,n.useState)([]),[t,k]=(0,n.useState)(0),[j,S]=(0,n.useState)(5),[y,w]=(0,n.useState)(0),[b,C]=(0,n.useState)(!0),[_,P]=(0,n.useState)(null),D=(0,v.g)();(0,n.useEffect)(()=>{(async(e,t)=>{try{C(!0);const n=await f.A.get("/api/all-orders/history",{params:{page:e+1,limit:t},headers:{Authorization:"Bearer ".concat(D)}});console.log(n),r(n.data.data),w(n.data.pagination.totalOrders),C(!1)}catch(s){var n,a;P((null===(n=s.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)||"Failed to fetch orders."),C(!1)}})(t,j)},[t,j]);const N=e=>{switch(e){case"pending":return"warning";case"paid":return"success";case"failed":return"error";case"created":return"info";default:return"default"}},M=(0,g.Zp)();return(0,p.jsxs)(a.A,{sx:{padding:2},children:[(0,p.jsx)(s.A,{variant:"h5",sx:{marginBottom:2},children:"Order History"}),b?(0,p.jsx)(i.A,{}):_?(0,p.jsx)(s.A,{color:"error",children:_}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{children:(0,p.jsxs)(c.A,{children:[(0,p.jsx)(l.A,{children:(0,p.jsxs)(d.A,{children:[(0,p.jsx)(h.A,{children:"Order ID"}),(0,p.jsx)(h.A,{children:"Amount"}),(0,p.jsx)(h.A,{children:"Status"}),(0,p.jsx)(h.A,{children:"Created At"}),(0,p.jsx)(h.A,{children:"Outlet Name"}),(0,p.jsx)(h.A,{children:"Outlet Email"}),(0,p.jsx)(h.A,{children:"Action"})," "]})}),(0,p.jsx)(u.A,{children:e.length>0?e.map(e=>{var r,t;return(0,p.jsxs)(d.A,{children:[(0,p.jsx)(h.A,{children:e.orderId}),(0,p.jsx)(h.A,{children:e.amount}),(0,p.jsx)(h.A,{children:(0,p.jsx)(A.A,{label:e.status,color:N(e.status)})}),(0,p.jsx)(h.A,{children:new Date(e.createdAt).toLocaleString()}),(0,p.jsx)(h.A,{children:(null===(r=e.franchiseId)||void 0===r?void 0:r.name)||"N/A"}),(0,p.jsx)(h.A,{children:(null===(t=e.franchiseId)||void 0===t?void 0:t.email)||"N/A"}),(0,p.jsx)(h.A,{children:(0,p.jsx)(m.A,{variant:"contained",color:"primary",onClick:()=>{return r=e._id,void M("/order-history/".concat(r));var r},children:"View Details"})})]},e._id)}):(0,p.jsx)(d.A,{children:(0,p.jsx)(h.A,{colSpan:7,align:"center",children:"No orders found."})})})]})}),(0,p.jsx)(x.A,{component:"div",count:y,page:t,onPageChange:(e,r)=>{k(r)},rowsPerPage:j,onRowsPerPageChange:e=>{S(parseInt(e.target.value,10)),k(0)}})]})]})}},46639:function(e,r,t){t.d(r,{A:function(){return I}});var n=t(57528),a=t(98587),s=t(58168),i=t(9950),o=t(72004),c=t(88465),l=t(88283),d=t(61676),h=t(4236),u=t(59254),A=t(1763),m=t(423);function x(e){return(0,m.Ay)("MuiCircularProgress",e)}(0,A.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var v,f,g,p,k=t(44414);const j=["className","color","disableShrink","size","style","thickness","value","variant"];let S,y,w,b;const C=44,_=(0,l.keyframes)(S||(S=v||(v=(0,n.A)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),P=(0,l.keyframes)(y||(y=f||(f=(0,n.A)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),D=(0,u.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[t.variant],r["color".concat((0,d.A)(t.color))]]}})(e=>{let{ownerState:r,theme:t}=e;return(0,s.A)({display:"inline-block"},"determinate"===r.variant&&{transition:t.transitions.create("transform")},"inherit"!==r.color&&{color:(t.vars||t).palette[r.color].main})},e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&(0,l.css)(w||(w=g||(g=(0,n.A)(["\n      animation: "," 1.4s linear infinite;\n    "]))),_)}),N=(0,u.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),M=(0,u.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.circle,r["circle".concat((0,d.A)(t.variant))],t.disableShrink&&r.circleDisableShrink]}})(e=>{let{ownerState:r,theme:t}=e;return(0,s.A)({stroke:"currentColor"},"determinate"===r.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===r.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})},e=>{let{ownerState:r}=e;return"indeterminate"===r.variant&&!r.disableShrink&&(0,l.css)(b||(b=p||(p=(0,n.A)(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),P)});var I=i.forwardRef(function(e,r){const t=(0,h.b)({props:e,name:"MuiCircularProgress"}),{className:n,color:i="primary",disableShrink:l=!1,size:u=40,style:A,thickness:m=3.6,value:v=0,variant:f="indeterminate"}=t,g=(0,a.A)(t,j),p=(0,s.A)({},t,{color:i,disableShrink:l,size:u,thickness:m,value:v,variant:f}),S=(e=>{const{classes:r,variant:t,color:n,disableShrink:a}=e,s={root:["root",t,"color".concat((0,d.A)(n))],svg:["svg"],circle:["circle","circle".concat((0,d.A)(t)),a&&"circleDisableShrink"]};return(0,c.A)(s,x,r)})(p),y={},w={},b={};if("determinate"===f){const e=2*Math.PI*((C-m)/2);y.strokeDasharray=e.toFixed(3),b["aria-valuenow"]=Math.round(v),y.strokeDashoffset="".concat(((100-v)/100*e).toFixed(3),"px"),w.transform="rotate(-90deg)"}return(0,k.jsx)(D,(0,s.A)({className:(0,o.A)(S.root,n),style:(0,s.A)({width:u,height:u},w,A),ownerState:p,ref:r,role:"progressbar"},b,g,{children:(0,k.jsx)(N,{className:S.svg,ownerState:p,viewBox:"".concat(22," ").concat(22," ").concat(C," ").concat(C),children:(0,k.jsx)(M,{className:S.circle,style:y,ownerState:p,cx:C,cy:C,r:(C-m)/2,fill:"none",strokeWidth:m})})}))})}}]);