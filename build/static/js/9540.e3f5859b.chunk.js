"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9540],{89540:function(e,s,a){a.r(s),a.d(s,{default:function(){return j}});var n=a(9950),i=a(28429);function t(){try{const e=localStorage.getItem("purchasedNumbers");return e?JSON.parse(e):[]}catch(e){return console.error("Error retrieving purchased numbers:",e),[]}}function l(e){const s=t();if(e)return s.filter(s=>s.country===e);const a={};return s.forEach(e=>{const s=e.country||e.location||"Unknown";a[s]||(a[s]=[]),a[s].push(e)}),a}var c=a(49911),d=a(81949),r=a(10185),o=a(10113),m=a(63407),u=a(2720),h=a(44414);var x=function(){var e,s,a,i,t,l,d,r,o,x,j,p,v,N,b,y,g,f,S,I,w,C,P,D,A,k,T,B,L,F,_,E,M,U;const[q,R]=(0,n.useState)({}),[G,z]=(0,n.useState)(null),[O,Q]=(0,n.useState)([]),[H,K]=(0,n.useState)(!0),[V,$]=(0,n.useState)(null),[W,J]=(0,n.useState)(!1),Y=localStorage.getItem("authToken");(0,n.useEffect)(()=>{Y?(0,u.H2)(u.Hr.USER_DETAILS).then(e=>{R(e.user),z(e.user.businessId)}).catch(e=>{console.error("Failed to fetch user details:",e),$("Could not fetch business details. Please try logging in again.")}):$("Authentication token not found. Please login again.")},[Y]);const[X]=(0,n.useState)((new Date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})),[Z,ee]=(0,n.useState)(!1),[se,ae]=(0,n.useState)(null),[ne,ie]=(0,n.useState)(null),[te,le]=(0,n.useState)(!1),[ce,de]=(0,n.useState)("UPI"),[re,oe]=(0,n.useState)(""),[me,ue]=(0,n.useState)(!1),[he,xe]=(0,n.useState)(!1),[je,pe]=(0,n.useState)(!1),[ve,Ne]=(0,n.useState)(null),[be,ye]=(0,n.useState)(null),[ge,fe]=(0,n.useState)(!1),[Se,Ie]=(0,n.useState)(!1),[we,Ce]=(0,n.useState)(""),[Pe,De]=(0,n.useState)(!1),[Ae,ke]=(0,n.useState)(null);(0,n.useEffect)(()=>{null!==q&&void 0!==q&&q.businessId&&Te()},[null===q||void 0===q?void 0:q.businessId]);const Te=async()=>{try{const e=null===q||void 0===q?void 0:q.businessId;if(!e)return $("Business ID not found. Please check your authentication."),void K(!1);K(!0);const s=await(0,u.H2)(u.Hr.BILLING_BUSINESS(e));console.log("Payment requests data:",s);let a=[];s&&s.success&&Array.isArray(s.data)?a=s.data:Array.isArray(s)?a=s:"object"===typeof s&&(Array.isArray(s.requests)?a=s.requests:Array.isArray(s.paymentRequests)?a=s.paymentRequests:Array.isArray(s.results)&&(a=s.results));const n=a.map(e=>{if(e.template&&!e.planName&&e.template.includes("plan")){const s=e.template.match(/plan\s+([^,]+)/i);s&&s[1]&&(e.planName=s[1].trim())}return e});Q(n.map(e=>{var s;return{...e,planName:(null===(s=e.planId)||void 0===s?void 0:s.planName)||e.planName||"Subscription Plan"}})),K(!1)}catch(e){console.error("Error fetching payment requests:",e),$(e.message||"Failed to fetch payment requests"),K(!1)}},Be=e=>{Ne(e),Ie(!0),ke(null),Ce("")},Le=async e=>{e&&e._id&&(ae(e),await(async e=>{if(e){le(!0);try{var s,a,n,i,t,l,c,d;const r=await(0,u.H2)(u.Hr.INVOICES(e));console.log("Invoice details full response:",r);const o=r.data||r;ie({invoiceNumber:o._id,invoiceDate:o.createdAt,startDate:o.startDate,endDate:o.endDate,status:o.status,orderId:o.orderId,businessId:o.businessId,paymentMode:o.paymentMode,paymentType:o.paymentType,upgradeType:o.upgradeType,billingDetails:{channelsAdded:o.channelsAdded||1,usersOrChannelsCount:o.usersOrChannelsCount||1,totalDaysInMonth:o.totalDaysInMonth||31,billingDaysCount:o.billingDaysCount||31,dailyRate:o.dailyRate||0},pricing:{planBasePrice:o.planBasePrice||0,discountPercentage:o.discountPercentage||0,priceAfterDiscount:o.priceAfterDiscount||0,subtotalBeforeTax:o.subtotalBeforeTax||0,taxAmount:o.taxAmount||0,finalTotalAmount:o.finalTotalAmount||0,amountPaid:o.amountPaid||0,outstandingBalance:o.outstandingBalance||0},plan:{...o.planId,planName:(null===(s=o.planId)||void 0===s?void 0:s.planName)||"Subscription Plan",planId:(null===(a=o.planId)||void 0===a?void 0:a.planId)||"",rental:(null===(n=o.planId)||void 0===n?void 0:n.rental)||0,discountPercent:(null===(i=o.planId)||void 0===i?void 0:i.discountPercent)||0,displayDiscount:(null===(t=o.planId)||void 0===t?void 0:t.displayDiscount)||0,totalAfterDiscount:(null===(l=o.planId)||void 0===l?void 0:l.totalAfterDiscount)||0,duration:(null===(c=o.planId)||void 0===c?void 0:c.duration)||30,gracePeriod:(null===(d=o.planId)||void 0===d?void 0:d.gracePeriod)||0}})}catch(r){console.error("Error fetching plan details:",r),ie({invoiceNumber:"",invoiceDate:new Date,status:"pending",paymentStatus:"unpaid",amount:0,tax:0,subTotal:0,total:0,balance:0,description:"",customer:{name:"",email:"",phone:"",address:""},items:[{name:"Subscription Plan",quantity:1,price:0,total:0}]})}finally{le(!1)}}})(e.invoiceId||e._id),ee(!0))},[Fe,_e]=(0,n.useState)(!1),[Ee,Me]=(0,n.useState)(""),[Ue,qe]=(0,n.useState)(!1),Re=e=>{switch(e.toLowerCase()){case"approved":return(0,h.jsx)(c.$X,{color:"success",children:"Approved"});case"rejected":return(0,h.jsx)(c.$X,{color:"danger",children:"Rejected"});case"pending":return(0,h.jsx)(c.$X,{color:"warning",children:"Pending"});default:return(0,h.jsx)(c.$X,{color:"info",children:e})}},Ge=e=>{de(e)};return(0,h.jsxs)("div",{className:"payment-requests-container",children:[(0,h.jsx)("div",{className:"payment-requests-header d-flex justify-content-between align-items-center mb-4",children:(0,h.jsx)("h2",{children:"Payment Requests"})}),(0,h.jsxs)("div",{className:"pending-requests-section mb-4",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,h.jsx)("h3",{className:"section-title mb-0",children:"Pending Payment Requests"}),(0,h.jsxs)(c.Q_,{color:"primary",size:"sm",onClick:()=>{$(null),Te()},children:[(0,h.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Refresh"]})]}),H?(0,h.jsx)("div",{className:"loading-spinner d-flex align-items-center justify-content-center py-5",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"spinner-border text-primary mb-2",role:"status",children:(0,h.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,h.jsx)("p",{className:"mb-0",children:"Loading payment requests..."})]})}):V?(0,h.jsx)(c.E$,{className:"mb-4 border-danger",children:(0,h.jsx)(c.W6,{children:(0,h.jsxs)("div",{className:"error-message",children:[(0,h.jsx)("h5",{className:"text-danger",children:"Error Loading Payment Requests"}),(0,h.jsx)("p",{children:V}),(0,h.jsx)(c.Q_,{color:"primary",size:"sm",onClick:()=>{$(null),Te()},children:"Try Again"})]})})}):(0,h.jsx)("div",{className:"payment-notifications",children:O.length>0?O.map(e=>(0,h.jsx)(c.E$,{className:"notification-card mb-3 border-start border-4 border-primary shadow-sm",style:{cursor:"pointer"},onClick:()=>(async e=>{if(e&&e._id)try{fe(!0),Ne(e);const d=e.invoiceId||e._id;if(!localStorage.getItem("authToken"))throw new Error("Authentication token not found. Please login again.");const r="".concat(getBaseURL(),"/invoices/").concat(d);console.log("Fetching invoice details:",{invoiceId:d,endpoint:r});const o=await fetch(r,{method:"GET",headers:{...getHeaders(),"Cache-Control":"no-cache,no-store",Pragma:"no-cache"}});if(!o.ok)throw new Error("Failed to fetch invoice details. Status: ".concat(o.status));const m=await o.json();if(console.log("Invoice details response:",m),m.success&&m.data){var s,a,n,i,t,l,c;const d=m.data,r={invoiceNumber:d._id,id:d._id,invoiceDate:d.createdAt,date:d.createdAt,startDate:d.startDate,endDate:d.endDate,status:d.status,businessId:d.businessId,orderId:d.orderId,paymentMode:d.paymentMode,paymentType:d.paymentType,upgradeType:d.upgradeType,paymentStatus:d.paymentStatus||"pending",planName:(null===(s=d.planId)||void 0===s?void 0:s.planName)||"Subscription Plan",planDetails:{planId:null===(a=d.planId)||void 0===a?void 0:a._id,planName:null===(n=d.planId)||void 0===n?void 0:n.planName,duration:(null===(i=d.planId)||void 0===i?void 0:i.duration)||30,gracePeriod:(null===(t=d.planId)||void 0===t?void 0:t.gracePeriod)||0,features:(null===(l=d.planId)||void 0===l?void 0:l.features)||[],type:null===(c=d.planId)||void 0===c?void 0:c.type},financialDetails:{basePrice:d.planBasePrice||0,discountPercentage:d.discountPercentage||0,discountAmount:d.discountAmount||0,priceAfterDiscount:d.priceAfterDiscount||0,subtotalBeforeTax:d.subtotalBeforeTax||0,taxPercentage:d.taxPercentage||18,taxAmount:d.taxAmount||0,finalTotalAmount:d.finalTotalAmount||0,amountPaid:d.amountPaid||0,outstandingBalance:d.outstandingBalance||0},amount:d.finalTotalAmount||0,subTotal:d.subtotalBeforeTax||0,tax:d.taxAmount||0,totalAmount:d.finalTotalAmount||0,gst:d.taxAmount||0,balance:d.outstandingBalance||0,description:d.disputeNotes||e.template||e.description||""};ye(r)}pe(!0)}catch(V){console.error("Error fetching invoice details:",V),ye(null)}finally{fe(!1)}})(e),children:(0,h.jsx)(c.W6,{children:(0,h.jsx)("div",{className:"row align-items-center",children:(0,h.jsxs)("div",{className:"col",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)("div",{className:"notification-icon me-3",children:(0,h.jsx)("i",{className:"bi bi-bell-fill text-primary",style:{fontSize:"24px"}})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h5",{className:"mb-0",children:e.planName||"New Payment Request"}),(0,h.jsx)("small",{className:"text-muted",children:e.requestedAt?new Date(e.requestedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):X})]})]}),(0,h.jsx)("div",{className:"d-flex align-items-center",children:Re(e.status)})]}),(0,h.jsx)("p",{className:"mb-3",children:e.template||e.details||e.description}),(0,h.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"text-muted me-3",children:"Payment Status:"}),(0,h.jsx)("span",{className:"badge bg-".concat("paid"===e.paymentStatus?"success":"warning","-subtle text-").concat("paid"===e.paymentStatus?"success":"warning"),children:e.paymentStatus||"Pending"})]}),("Pending"===e.status||"pending"===e.status)&&(0,h.jsxs)("div",{className:"action-buttons",children:[(0,h.jsxs)(c.Q_,{color:"success",size:"sm",variant:"outline",className:"me-2",onClick:s=>{s.stopPropagation(),Le(e)},children:[(0,h.jsx)("i",{className:"bi bi-check-lg me-1"}),"Accept"]}),(0,h.jsxs)(c.Q_,{color:"danger",size:"sm",variant:"outline",onClick:s=>{s.stopPropagation(),(e=>{ae(e),Me(""),_e(!0)})(e)},children:[(0,h.jsx)("i",{className:"bi bi-x-lg me-1"}),"Reject"]})]}),"disputed"!==e.status&&(0,h.jsxs)(c.Q_,{color:"warning",size:"sm",variant:"outline",className:"ms-2",onClick:s=>{s.stopPropagation(),Be(e)},children:[(0,h.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),"Dispute"]})]})]})})})},e.id||e._id)):(0,h.jsx)(c.E$,{className:"text-center py-5",children:(0,h.jsx)(c.W6,{children:(0,h.jsxs)("div",{className:"empty-state",children:[(0,h.jsx)("div",{className:"empty-icon mb-3",children:(0,h.jsx)("i",{className:"bi bi-inbox text-muted",style:{fontSize:"48px"}})}),(0,h.jsx)("h4",{children:"No Payment Requests"}),(0,h.jsx)("p",{className:"text-muted",children:"Your payment requests inbox is empty."})]})})})})]}),(0,h.jsxs)(c.zS,{visible:W,onClose:()=>J(!1),className:"payment-request-modal",children:[(0,h.jsx)(c.E4,{closeButton:!0,children:(0,h.jsx)(c.lb,{children:"Create New Payment Request"})}),(0,h.jsx)(c.Tc,{children:(0,h.jsx)("p",{children:"Payment request creation form will be implemented here."})}),(0,h.jsxs)(c.If,{children:[(0,h.jsx)(c.Q_,{color:"secondary",onClick:()=>J(!1),children:"Cancel"}),(0,h.jsx)(c.Q_,{color:"primary",onClick:()=>{J(!1)},children:"Create Request"})]})]}),(0,h.jsxs)(c.zS,{visible:Fe,onClose:()=>!Ue&&_e(!1),backdrop:"static",size:"lg",children:[(0,h.jsx)(c.E4,{closeButton:!0,children:(0,h.jsx)(c.lb,{children:"Reject Payment Request"})}),(0,h.jsxs)(c.Tc,{children:[(0,h.jsxs)("p",{children:["You are rejecting payment request ",(0,h.jsx)("strong",{children:(null===se||void 0===se?void 0:se._id)||(null===se||void 0===se?void 0:se.id)}),null!==se&&void 0!==se&&se.planName?" for ".concat(se.planName):"","."]}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{htmlFor:"rejectionReason",className:"form-label",children:"Rejection Reason"}),(0,h.jsx)(c.Im,{id:"rejectionReason",value:Ee,onChange:e=>Me(e.target.value),rows:"4",placeholder:"Enter reason for rejection (required)",disabled:Ue})]})]}),(0,h.jsxs)(c.If,{children:[(0,h.jsx)(c.Q_,{color:"secondary",onClick:()=>_e(!1),disabled:Ue,children:"Cancel"}),(0,h.jsx)(c.Q_,{color:"danger",onClick:async()=>{const e=se;if(!e)return;const s=e.id||e._id;if(s){qe(!0);try{const e="RJ-".concat(Date.now().toString(36).toUpperCase().slice(-8)),a=(new Date).toISOString();await(0,u.H2)(u.Hr.BILLING_UPDATE(s),"PUT",{status:"rejected",paymentStatus:"unpaid",rejectionReason:Ee||"Not provided",rejectionCode:e,rejectedAt:a}),Q(n=>n.map(n=>n._id===s||n.id===s?{...n,status:"rejected",paymentStatus:"unpaid",rejectionReason:Ee||"Not provided",rejectionCode:e,rejectedAt:a}:n)),_e(!1)}catch(a){console.error("Error rejecting payment:",a),alert("Failed to reject payment request. Please try again.")}finally{qe(!1)}}},disabled:Ue||!Ee.trim(),children:Ue?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.JT,{size:"sm",className:"me-2"}),"Rejecting..."]}):"Reject Payment"})]})]}),(0,h.jsxs)(c.zS,{visible:Z,onClose:()=>!me&&!he&&ee(!1),className:"payment-modal",backdrop:"static",size:"lg",children:[(0,h.jsx)(c.E4,{closeButton:!me&&!he,children:(0,h.jsx)(c.lb,{children:"Complete Payment"})}),(0,h.jsx)(c.Tc,{children:he?(0,h.jsxs)("div",{className:"text-center py-3",children:[(0,h.jsx)("div",{className:"payment-success-icon mb-3",children:(0,h.jsx)("i",{className:"bi bi-check-circle-fill text-success",style:{fontSize:"48px"}})}),(0,h.jsx)("h5",{className:"mb-3",children:"Payment Successful!"}),(0,h.jsx)("p",{className:"mb-0",children:"Your payment has been processed successfully."})]}):te?(0,h.jsxs)("div",{className:"text-center py-3",children:[(0,h.jsx)(c.JT,{color:"primary"}),(0,h.jsx)("p",{className:"mt-3 mb-0",children:"Loading invoice details..."})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"invoice-content mb-4",children:[(0,h.jsx)("div",{className:"invoice-header mb-4",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("h5",{className:"mb-1",children:["Invoice #",null===ne||void 0===ne?void 0:ne.invoiceNumber]}),(0,h.jsxs)("p",{className:"text-muted mb-0",children:["Generated on: ",new Date(null===ne||void 0===ne?void 0:ne.invoiceDate).toLocaleDateString()]}),(null===ne||void 0===ne?void 0:ne.dueDate)&&(0,h.jsxs)("p",{className:"text-danger mb-0",children:["Due by: ",new Date(ne.dueDate).toLocaleDateString()]})]}),(0,h.jsx)("div",{className:"text-end",children:(0,h.jsx)("span",{className:"badge bg-".concat("paid"===(null===ne||void 0===ne?void 0:ne.status)?"success":"warning"),children:null===ne||void 0===ne?void 0:ne.status})})]})}),(0,h.jsxs)("div",{className:"customer-info mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Customer Details"}),(0,h.jsx)("div",{className:"card bg-light",children:(0,h.jsxs)("div",{className:"card-body",children:[(0,h.jsx)("h6",{className:"mb-2",children:null===ne||void 0===ne||null===(e=ne.customer)||void 0===e?void 0:e.name}),(0,h.jsx)("p",{className:"mb-1",children:null===ne||void 0===ne||null===(s=ne.customer)||void 0===s?void 0:s.email}),(0,h.jsx)("p",{className:"mb-1",children:null===ne||void 0===ne||null===(a=ne.customer)||void 0===a?void 0:a.phone}),(0,h.jsx)("p",{className:"mb-0",children:null===ne||void 0===ne||null===(i=ne.customer)||void 0===i?void 0:i.address})]})})]}),(0,h.jsxs)("div",{className:"billing-details mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Billing Period & Usage"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Start Date:"}),(0,h.jsx)("span",{children:new Date(null===ne||void 0===ne?void 0:ne.startDate).toLocaleDateString()})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"End Date:"}),(0,h.jsx)("span",{children:new Date(null===ne||void 0===ne?void 0:ne.endDate).toLocaleDateString()})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Billing Days:"}),(0,h.jsxs)("span",{children:[null===ne||void 0===ne||null===(t=ne.billingDetails)||void 0===t?void 0:t.billingDaysCount," / ",null===ne||void 0===ne||null===(l=ne.billingDetails)||void 0===l?void 0:l.totalDaysInMonth," days"]})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Daily Rate:"}),(0,h.jsxs)("span",{children:["\u20b9",null===ne||void 0===ne||null===(d=ne.billingDetails)||void 0===d?void 0:d.dailyRate.toFixed(2)]})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Channels Added:"}),(0,h.jsx)("span",{children:null===ne||void 0===ne||null===(r=ne.billingDetails)||void 0===r?void 0:r.channelsAdded})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Total Users/Channels:"}),(0,h.jsx)("span",{children:null===ne||void 0===ne||null===(o=ne.billingDetails)||void 0===o?void 0:o.usersOrChannelsCount})]})})]})})})]}),(0,h.jsxs)("div",{className:"plan-details mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Plan Information"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Plan Name:"}),(0,h.jsx)("span",{className:"fw-bold",children:null===ne||void 0===ne||null===(x=ne.plan)||void 0===x?void 0:x.planName})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Plan ID:"}),(0,h.jsx)("span",{children:null===ne||void 0===ne||null===(j=ne.plan)||void 0===j?void 0:j.planId})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Base Price:"}),(0,h.jsxs)("span",{children:["\u20b9",null===ne||void 0===ne||null===(p=ne.pricing)||void 0===p?void 0:p.planBasePrice.toLocaleString("en-IN")]})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Discount:"}),(0,h.jsxs)("span",{className:"text-success",children:[null===ne||void 0===ne||null===(v=ne.pricing)||void 0===v?void 0:v.discountPercentage,"%"]})]})})]})})})]}),(0,h.jsxs)("div",{className:"cost-breakdown mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Cost Breakdown"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsxs)("div",{className:"card-body",children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,h.jsx)("span",{className:"text-muted",children:"Base Price:"}),(0,h.jsxs)("span",{children:["\u20b9",null===ne||void 0===ne||null===(N=ne.pricing)||void 0===N?void 0:N.planBasePrice.toLocaleString("en-IN")]})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,h.jsx)("span",{className:"text-muted",children:"Price After Discount:"}),(0,h.jsxs)("span",{children:["\u20b9",null===ne||void 0===ne||null===(b=ne.pricing)||void 0===b?void 0:b.priceAfterDiscount.toLocaleString("en-IN")]})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,h.jsx)("span",{className:"text-muted",children:"Subtotal Before Tax:"}),(0,h.jsxs)("span",{children:["\u20b9",null===ne||void 0===ne||null===(y=ne.pricing)||void 0===y?void 0:y.subtotalBeforeTax.toLocaleString("en-IN")]})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,h.jsx)("span",{className:"text-muted",children:"Tax Amount:"}),(0,h.jsxs)("span",{children:["\u20b9",null===ne||void 0===ne||null===(g=ne.pricing)||void 0===g?void 0:g.taxAmount.toLocaleString("en-IN")]})]})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"d-flex justify-content-between fw-bold",children:[(0,h.jsx)("span",{children:"Final Total Amount:"}),(0,h.jsxs)("span",{children:["\u20b9",null===ne||void 0===ne||null===(f=ne.pricing)||void 0===f?void 0:f.finalTotalAmount.toLocaleString("en-IN")]})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-between mt-2",children:[(0,h.jsx)("span",{className:"text-muted",children:"Amount Paid:"}),(0,h.jsxs)("span",{className:"text-success",children:["\u20b9",null===ne||void 0===ne||null===(S=ne.pricing)||void 0===S?void 0:S.amountPaid.toLocaleString("en-IN")]})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-between mt-2",children:[(0,h.jsx)("span",{className:"text-muted",children:"Outstanding Balance:"}),(0,h.jsxs)("span",{className:"text-danger",children:["\u20b9",null===ne||void 0===ne||null===(I=ne.pricing)||void 0===I?void 0:I.outstandingBalance.toLocaleString("en-IN")]})]})]})})]}),(0,h.jsxs)("div",{className:"payment-info mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Payment Information"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Payment Mode:"}),(0,h.jsx)("span",{children:null===ne||void 0===ne?void 0:ne.paymentMode})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Payment Type:"}),(0,h.jsx)("span",{children:null===ne||void 0===ne?void 0:ne.paymentType})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Upgrade Type:"}),(0,h.jsx)("span",{children:null===ne||void 0===ne?void 0:ne.upgradeType})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Order ID:"}),(0,h.jsx)("span",{children:null===ne||void 0===ne?void 0:ne.orderId})]})})]})})})]})]}),(0,h.jsxs)("div",{className:"payment-method-section",children:[(0,h.jsx)("h6",{className:"mb-3",children:"Select Payment Method"}),(0,h.jsxs)("div",{className:"payment-method-options",children:[(0,h.jsx)("div",{className:"payment-method-option mb-2",children:(0,h.jsx)(c.CK,{type:"radio",name:"paymentMethod",id:"upi",value:"UPI",checked:"UPI"===ce,onChange:()=>Ge("UPI"),label:"UPI"})}),(0,h.jsx)("div",{className:"payment-method-option mb-2",children:(0,h.jsx)(c.CK,{type:"radio",name:"paymentMethod",id:"card",value:"Credit/Debit Card",checked:"Credit/Debit Card"===ce,onChange:()=>Ge("Credit/Debit Card"),label:"Credit/Debit Card"})}),(0,h.jsx)("div",{className:"payment-method-option mb-3",children:(0,h.jsx)(c.CK,{type:"radio",name:"paymentMethod",id:"netbanking",value:"Net Banking",checked:"Net Banking"===ce,onChange:()=>Ge("Net Banking"),label:"Net Banking"})})]}),"UPI"===ce&&(0,h.jsxs)("div",{className:"upi-section mt-3",children:[(0,h.jsx)("label",{htmlFor:"upiId",className:"form-label mb-2",children:"UPI ID"}),(0,h.jsx)(c.OG,{type:"text",id:"upiId",placeholder:"Enter UPI ID (e.g., username@upi)",value:re,onChange:e=>{oe(e.target.value)},disabled:me})]}),"Credit/Debit Card"===ce&&(0,h.jsxs)("div",{className:"card-section mt-3",children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{htmlFor:"cardNumber",className:"form-label mb-2",children:"Card Number"}),(0,h.jsx)(c.OG,{type:"text",id:"cardNumber",placeholder:"Enter card number",disabled:me})]}),(0,h.jsxs)("div",{className:"row mb-3",children:[(0,h.jsxs)("div",{className:"col-6",children:[(0,h.jsx)("label",{htmlFor:"expiryDate",className:"form-label mb-2",children:"Expiry Date"}),(0,h.jsx)(c.OG,{type:"text",id:"expiryDate",placeholder:"MM/YY",disabled:me})]}),(0,h.jsxs)("div",{className:"col-6",children:[(0,h.jsx)("label",{htmlFor:"cvv",className:"form-label mb-2",children:"CVV"}),(0,h.jsx)(c.OG,{type:"text",id:"cvv",placeholder:"CVV",disabled:me})]})]}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{htmlFor:"nameOnCard",className:"form-label mb-2",children:"Name on Card"}),(0,h.jsx)(c.OG,{type:"text",id:"nameOnCard",placeholder:"Enter name on card",disabled:me})]})]}),"Net Banking"===ce&&(0,h.jsxs)("div",{className:"netbanking-section mt-3",children:[(0,h.jsx)("label",{htmlFor:"bankSelection",className:"form-label mb-2",children:"Select Bank"}),(0,h.jsxs)("select",{className:"form-select",id:"bankSelection",disabled:me,children:[(0,h.jsx)("option",{value:"",children:"Select your bank"}),(0,h.jsx)("option",{value:"sbi",children:"State Bank of India"}),(0,h.jsx)("option",{value:"hdfc",children:"HDFC Bank"}),(0,h.jsx)("option",{value:"icici",children:"ICICI Bank"}),(0,h.jsx)("option",{value:"axis",children:"Axis Bank"}),(0,h.jsx)("option",{value:"kotak",children:"Kotak Mahindra Bank"})]})]})]})]})}),!he&&(0,h.jsxs)(c.If,{children:[(0,h.jsx)(c.Q_,{color:"secondary",onClick:()=>ee(!1),disabled:me,children:"Cancel"}),(0,h.jsx)(c.Q_,{color:"primary",onClick:async()=>{if(se&&se._id)if("UPI"!==ce||re){ue(!0);try{var e,s;const a=await(0,u.H2)(u.Hr.BILLING_UPDATE(se._id),"PUT",{status:"approved",paymentStatus:"paid",template:se.template||"An order request generated for plan ".concat((null===ne||void 0===ne||null===(e=ne.items)||void 0===e||null===(s=e[0])||void 0===s?void 0:s.name)||"Subscription Plan",", Business ID: ").concat(se.businessId||"123",", Plan ID: ").concat(se.planId||"456",", Status: approved, Payment Status: paid")});console.log("Payment processed:",a),Q(e=>e.map(e=>e._id===se._id?{...e,status:"approved",paymentStatus:"paid"}:e)),xe(!0),setTimeout(()=>{ee(!1),xe(!1),ae(null),de("UPI"),oe(""),setPlanDetails(null),ue(!1)},2e3)}catch(a){console.error("Error processing payment:",a),ue(!1),alert("Failed to process payment. Please try again.")}}else alert("Please enter a valid UPI ID");else alert("No payment request selected")},disabled:me||te,children:me?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.JT,{size:"sm",className:"me-2"}),"Processing..."]}):"Pay"})]})]}),(0,h.jsxs)(c.zS,{visible:je,onClose:()=>pe(!1),size:"lg",children:[(0,h.jsx)(c.E4,{closeButton:!0,children:(0,h.jsx)(c.lb,{children:"Invoice Details"})}),(0,h.jsx)(c.Tc,{children:ge?(0,h.jsxs)("div",{className:"text-center py-4",children:[(0,h.jsx)(c.JT,{color:"primary"}),(0,h.jsx)("p",{className:"mt-2",children:"Loading invoice details..."})]}):be?(0,h.jsxs)("div",{className:"invoice-details",children:[(0,h.jsx)("div",{className:"invoice-header mb-4",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("h5",{className:"mb-1",children:["Invoice #",be.invoiceNumber||be.id||(null===ve||void 0===ve?void 0:ve._id)]}),(0,h.jsxs)("p",{className:"text-muted mb-0",children:["Generated: ",new Date(be.invoiceDate||be.date||(null===ve||void 0===ve?void 0:ve.requestedAt)).toLocaleDateString()]}),be.endDate&&(0,h.jsxs)("p",{className:"text-muted mb-0",children:["Valid Until: ",new Date(be.endDate).toLocaleDateString()]})]}),(0,h.jsxs)("div",{className:"text-end",children:[Re(be.status||(null===ve||void 0===ve?void 0:ve.status)),(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)("span",{className:"badge bg-".concat("paid"===be.paymentStatus?"success":"warning","-subtle text-").concat("paid"===be.paymentStatus?"success":"warning"," ms-2"),children:be.paymentStatus})})]})]})}),(0,h.jsxs)("div",{className:"plan-details-section mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Plan Details"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Plan Name:"}),(0,h.jsx)("span",{className:"fw-semibold",children:(null===(w=be.planDetails)||void 0===w?void 0:w.planName)||be.planName})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Plan ID:"}),(0,h.jsx)("span",{children:(null===(C=be.planDetails)||void 0===C?void 0:C.planId)||"N/A"})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Duration:"}),(0,h.jsxs)("span",{children:[(null===(P=be.planDetails)||void 0===P?void 0:P.duration)||30," days"]})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Grace Period:"}),(0,h.jsxs)("span",{children:[(null===(D=be.planDetails)||void 0===D?void 0:D.gracePeriod)||0," days"]})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Plan Type:"}),(0,h.jsx)("span",{children:(null===(A=be.planDetails)||void 0===A?void 0:A.type)||"Standard"})]})})]})})})]}),(0,h.jsxs)("div",{className:"financial-details-section mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Financial Details"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsx)("div",{className:"table-responsive",children:(0,h.jsx)("table",{className:"table table-borderless mb-0",children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-muted",children:"Base Price:"}),(0,h.jsxs)("td",{className:"text-end",children:["\u20b9",(null===(k=be.financialDetails)||void 0===k?void 0:k.basePrice.toLocaleString("en-IN"))||"0"]})]}),(0,h.jsxs)("tr",{children:[(0,h.jsxs)("td",{className:"text-muted",children:["Discount (",(null===(T=be.financialDetails)||void 0===T?void 0:T.discountPercentage)||0,"%):"]}),(0,h.jsxs)("td",{className:"text-end text-success",children:["-\u20b9",(null===(B=be.financialDetails)||void 0===B?void 0:B.discountAmount.toLocaleString("en-IN"))||"0"]})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-muted",children:"Price After Discount:"}),(0,h.jsxs)("td",{className:"text-end",children:["\u20b9",(null===(L=be.financialDetails)||void 0===L?void 0:L.priceAfterDiscount.toLocaleString("en-IN"))||"0"]})]}),(0,h.jsxs)("tr",{children:[(0,h.jsxs)("td",{className:"text-muted",children:["GST (",(null===(F=be.financialDetails)||void 0===F?void 0:F.taxPercentage)||18,"%):"]}),(0,h.jsxs)("td",{className:"text-end",children:["\u20b9",(null===(_=be.financialDetails)||void 0===_?void 0:_.taxAmount.toLocaleString("en-IN"))||"0"]})]}),(0,h.jsxs)("tr",{className:"border-top",children:[(0,h.jsx)("td",{className:"fw-bold",children:"Final Total Amount:"}),(0,h.jsxs)("td",{className:"text-end fw-bold",children:["\u20b9",(null===(E=be.financialDetails)||void 0===E?void 0:E.finalTotalAmount.toLocaleString("en-IN"))||"0"]})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-muted",children:"Amount Paid:"}),(0,h.jsxs)("td",{className:"text-end text-success",children:["\u20b9",(null===(M=be.financialDetails)||void 0===M?void 0:M.amountPaid.toLocaleString("en-IN"))||"0"]})]}),(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-muted",children:"Outstanding Balance:"}),(0,h.jsxs)("td",{className:"text-end text-danger",children:["\u20b9",(null===(U=be.financialDetails)||void 0===U?void 0:U.outstandingBalance.toLocaleString("en-IN"))||"0"]})]})]})})})})})]}),(0,h.jsxs)("div",{className:"payment-info-section mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Payment Information"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Payment Mode:"}),(0,h.jsx)("span",{children:be.paymentMode||"N/A"})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Payment Type:"}),(0,h.jsx)("span",{children:be.paymentType||"N/A"})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Order ID:"}),(0,h.jsx)("span",{children:be.orderId||"N/A"})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Business ID:"}),(0,h.jsx)("span",{children:be.businessId||"N/A"})]})}),(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("span",{className:"text-muted",children:"Upgrade Type:"}),(0,h.jsx)("span",{children:be.upgradeType||"N/A"})]})})]})})})]}),(0,h.jsxs)("div",{className:"invoice-items mb-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Invoice Items"}),(0,h.jsx)("div",{className:"table-responsive",children:(0,h.jsxs)("table",{className:"table table-bordered",children:[(0,h.jsx)("thead",{className:"bg-light",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Item"}),(0,h.jsx)("th",{className:"text-end",children:"Quantity"}),(0,h.jsx)("th",{className:"text-end",children:"Price"}),(0,h.jsx)("th",{className:"text-end",children:"Total"})]})}),(0,h.jsx)("tbody",{children:(be.items||[{name:be.planName||requestPlanNames[null===ve||void 0===ve?void 0:ve._id]||"Subscription Plan",quantity:1,price:be.amount||0,total:be.totalAmount||be.amount||0}]).map((e,s)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.name}),(0,h.jsx)("td",{className:"text-end",children:e.quantity}),(0,h.jsxs)("td",{className:"text-end",children:["\u20b9",e.price.toLocaleString("en-IN")]}),(0,h.jsxs)("td",{className:"text-end",children:["\u20b9",e.total.toLocaleString("en-IN")]})]},s))})]})})]}),(0,h.jsxs)("div",{className:"invoice-summary",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Invoice Summary"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsxs)("div",{className:"card-body",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,h.jsx)("span",{children:"Subtotal:"}),(0,h.jsxs)("span",{children:["\u20b9",(be.subTotal||be.amount||0).toLocaleString("en-IN")]})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,h.jsx)("span",{children:"Tax:"}),(0,h.jsxs)("span",{children:["\u20b9",(be.tax||be.gst||0).toLocaleString("en-IN")]})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"d-flex justify-content-between fw-bold",children:[(0,h.jsx)("span",{children:"Total Amount:"}),(0,h.jsxs)("span",{children:["\u20b9",(be.total||be.totalAmount||0).toLocaleString("en-IN")]})]}),(be.balance||be.remainingAmount)>0&&(0,h.jsxs)("div",{className:"d-flex justify-content-between text-danger mt-2",children:[(0,h.jsx)("span",{children:"Balance Due:"}),(0,h.jsxs)("span",{children:["\u20b9",(be.balance||be.remainingAmount||0).toLocaleString("en-IN")]})]})]})})]}),(be.description||be.details||(null===ve||void 0===ve?void 0:ve.template)||(null===ve||void 0===ve?void 0:ve.details))&&(0,h.jsxs)("div",{className:"additional-info mt-4",children:[(0,h.jsx)("h6",{className:"text-primary mb-3",children:"Additional Information"}),(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body",children:(0,h.jsx)("p",{className:"mb-0",children:be.description||be.details||(null===ve||void 0===ve?void 0:ve.template)||(null===ve||void 0===ve?void 0:ve.details)})})})]})]}):(0,h.jsx)("div",{className:"text-center py-4",children:(0,h.jsx)("p",{children:"No invoice details available"})})}),(0,h.jsxs)(c.If,{children:[(0,h.jsx)(c.Q_,{color:"primary",variant:"outline",onClick:()=>{if(!be&&!ve)return;const e=be||ve,s={id:e.id||e._id||"N/A",date:e.date||(e.requestedAt?new Date(e.requestedAt).toLocaleDateString():(new Date).toLocaleDateString()),planName:e.planName||"N/A",status:e.status||"N/A",paymentStatus:e.paymentStatus||"pending",amount:e.amount||e.totalAmount||0,gst:e.gst||e.tax||0,balance:e.balance||e.remainingAmount||0,description:e.details||e.template||e.description||"Credit Note Invoice Upgrade Request"},a=new m.Ay;a.setFont("helvetica","normal"),a.setFontSize(20),a.setTextColor(40,40,40),a.text("INVOICE DETAILS",105,30,{align:"center"}),a.setLineWidth(.5),a.line(20,40,190,40),a.setFontSize(12),a.setTextColor(0,0,0);let n=60;const i=15;a.setFont("helvetica","bold"),a.text("Invoice ID:",20,n),a.setFont("helvetica","normal"),a.text(s.id,70,n),n+=i,a.setFont("helvetica","bold"),a.text("Date:",20,n),a.setFont("helvetica","normal"),a.text(s.date,70,n),n+=i,a.setFont("helvetica","bold"),a.text("Plan Name:",20,n),a.setFont("helvetica","normal"),a.text(s.planName,70,n),n+=i,a.setFont("helvetica","bold"),a.text("Status:",20,n),a.setFont("helvetica","normal"),a.text(s.status,70,n),n+=i,a.setFont("helvetica","bold"),a.text("Payment Status:",20,n),a.setFont("helvetica","normal"),a.text(s.paymentStatus,70,n),n+=i,a.setFont("helvetica","bold"),a.text("Amount:",20,n),a.setFont("helvetica","normal"),a.text("\u20b9".concat(s.amount),70,n),n+=i,a.setFont("helvetica","bold"),a.text("GST:",20,n),a.setFont("helvetica","normal"),a.text("\u20b9".concat(s.gst),70,n),n+=i,a.setFont("helvetica","bold"),a.text("Balance:",20,n),a.setFont("helvetica","normal"),a.text("\u20b9".concat(s.balance),70,n),n+=30,a.setFont("helvetica","bold"),a.text("Description:",20,n),n+=i,a.setFont("helvetica","normal");const t=a.splitTextToSize(s.description,170);a.text(t,20,n),n+=6*t.length+i,a.setLineWidth(.5),a.line(20,n,190,n),n+=i,a.setFontSize(10),a.setTextColor(100,100,100),a.text("Generated on: ".concat((new Date).toLocaleString()),20,n),a.save("Invoice_".concat(s.id,"_").concat((new Date).toISOString().split("T")[0],".pdf"))},className:"me-2",children:"Download PDF"}),(0,h.jsx)(c.Q_,{color:"secondary",onClick:()=>pe(!1),children:"Close"}),ve&&("Pending"===ve.status||"pending"===ve.status)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.Q_,{color:"success",onClick:()=>{pe(!1),Le(ve)},className:"me-2",children:"Accept & Pay"}),(0,h.jsx)(c.Q_,{color:"danger",variant:"outline",onClick:()=>{pe(!1),Be(ve)},children:"Dispute Invoice"})]})]})]}),(0,h.jsxs)(c.zS,{visible:Se,onClose:()=>Ie(!1),backdrop:"static",children:[(0,h.jsx)(c.E4,{closeButton:!0,children:(0,h.jsx)(c.lb,{children:"Dispute Invoice"})}),(0,h.jsx)(c.Tc,{children:ve&&(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsxs)("h6",{children:["Invoice Number: ",ve._id]}),(0,h.jsxs)("p",{className:"text-muted",children:["Amount: ",ve.amount||ve.totalAmount]})]}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{htmlFor:"disputeReason",className:"form-label",children:"Reason for Dispute"}),(0,h.jsx)("textarea",{id:"disputeReason",className:"form-control",value:we,onChange:e=>Ce(e.target.value),rows:"4",placeholder:"Please provide detailed reason for the dispute..."})]}),Ae&&(0,h.jsx)("div",{className:"alert alert-danger",role:"alert",children:Ae})]})}),(0,h.jsxs)(c.If,{children:[(0,h.jsx)(c.Q_,{color:"secondary",onClick:()=>Ie(!1),children:"Cancel"}),(0,h.jsx)(c.Q_,{color:"primary",onClick:async()=>{if(ve&&we.trim())try{De(!0),ke(null);(await(0,u.H2)(u.Hr.DISPUTES,"POST",{invoiceId:ve._id,businessId:q.businessId,reason:we})).success&&(Ie(!1),Ce(""),Te(),alert("Dispute created successfully"))}catch(V){var e,s;console.error("Error creating dispute:",V),ke((null===(e=V.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to create dispute. Please try again.")}finally{De(!1)}else ke("Please provide a reason for the dispute")},disabled:Pe||!we.trim(),children:Pe?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.JT,{size:"sm",className:"me-2"}),"Creating Dispute..."]}):"Submit Dispute"})]})]})]})};var j=function(){const[e,s]=(0,n.useState)(1),[a,m]=(0,n.useState)(!1),[u,j]=(0,n.useState)(!1),[p,v]=(0,n.useState)([]),[N,b]=(0,n.useState)({}),[y,g]=(0,n.useState)(!1),[f,S]=(0,n.useState)(""),[I,w]=(0,n.useState)("India"),[C,P]=(0,n.useState)(!1),[D,A]=(0,n.useState)(null),[k,T]=(0,n.useState)(""),[B,L]=(0,n.useState)(!1),[F,_]=(0,n.useState)(!1);(0,i.Zp)(),(0,n.useEffect)(()=>{const e=t();v(e);const s=l();b(s)},[]),(0,n.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("tab");"billing"===e?s(2):"payment-requests"===e&&s(3)},[]);const E=e=>{s(e);const a=1===e?"":2===e?"billing":3===e?"payment-requests":"";if(a){const e=new URL(window.location);e.searchParams.set("tab",a),window.history.pushState({},"",e)}else{const e=new URL(window.location);e.searchParams.delete("tab"),window.history.pushState({},"",e)}},M=[{id:1,number:"+91 98765 43215",location:"Mumbai",type:"Toll-Free",price:1200},{id:2,number:"+91 98765 43216",location:"Delhi",type:"Local",price:999},{id:3,number:"+91 98765 43217",location:"Bangalore",type:"Local",price:999},{id:4,number:"+91 98765 43218",location:"Chennai",type:"Toll-Free",price:1200},{id:5,number:"+91 98765 43219",location:"Hyderabad",type:"Local",price:999},{id:6,number:"+91 98765 43220",location:"Kolkata",type:"Toll-Free",price:1200},{id:7,number:"+91 98765 43221",location:"Pune",type:"Local",price:999}].filter(e=>e.number.toLowerCase().includes(f.toLowerCase())||e.location.toLowerCase().includes(f.toLowerCase())||e.type.toLowerCase().includes(f.toLowerCase())),U=e=>{T(e.target.value)};return(0,h.jsxs)("div",{className:"billing-container",children:[(0,h.jsx)("h1",{className:"page-title",children:"Plans & Numbers"}),(0,h.jsx)(c.E$,{className:"mb-4",children:(0,h.jsxs)(c.W6,{children:[(0,h.jsxs)(c.by,{variant:"tabs",role:"tablist",className:"billing-tabs",children:[(0,h.jsx)(c.g9,{children:(0,h.jsx)(c.HQ,{active:1===e,onClick:()=>E(1),className:"tab-link",children:"Overview"})}),(0,h.jsx)(c.g9,{children:(0,h.jsx)(c.HQ,{active:2===e,onClick:()=>E(2),className:"tab-link",children:"Billing"})}),(0,h.jsx)(c.g9,{children:(0,h.jsx)(c.HQ,{active:3===e,onClick:()=>E(3),className:"tab-link",children:"Payment Requests"})})]}),(0,h.jsxs)(c.eL,{children:[(0,h.jsx)(c.x1,{role:"tabpanel",visible:1===e,children:(0,h.jsxs)("div",{className:"tab-content-wrapper",children:[(0,h.jsx)(c.E$,{className:"plan-card mb-4",children:(0,h.jsxs)(c.W6,{children:[(0,h.jsx)("div",{className:"plan-header d-flex justify-content-between align-items-center mb-3",children:(0,h.jsx)("div",{children:(0,h.jsx)("h3",{className:"plan-title",children:"Account Overview"})})}),(0,h.jsx)(c.sK,{className:"plan-stats",children:(0,h.jsx)(c.UF,{md:12,children:(0,h.jsxs)("div",{className:"stat-item",children:[(0,h.jsx)("span",{className:"stat-label",children:"Total calls"}),(0,h.jsx)("span",{className:"stat-value",children:"0"})]})})})]})}),(0,h.jsx)(c.E$,{className:"numbers-card mb-4",children:(0,h.jsx)(c.W6,{children:y?(0,h.jsxs)("div",{className:"buy-number-section",children:[(0,h.jsxs)("div",{className:"section-header d-flex justify-content-between align-items-center mb-4",children:[(0,h.jsx)("h3",{className:"section-title",children:"Buy Virtual Number"}),(0,h.jsx)(c.Q_,{color:"primary",className:"cancel-btn",onClick:()=>g(!1),children:"Cancel"})]}),(0,h.jsxs)(c.sK,{className:"mb-4",children:[(0,h.jsx)(c.UF,{md:4,children:(0,h.jsxs)(c.MT,{value:I,onChange:e=>w(e.target.value),className:"country-selector",children:[(0,h.jsx)("option",{value:"India",children:"India"}),(0,h.jsx)("option",{value:"United States",children:"United States"}),(0,h.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,h.jsx)("option",{value:"Singapore",children:"Singapore"}),(0,h.jsx)("option",{value:"Australia",children:"Australia"})]})}),(0,h.jsx)(c.UF,{md:8,children:(0,h.jsx)("div",{className:"search-container",children:(0,h.jsxs)(c.BG,{children:[(0,h.jsx)(c.OG,{placeholder:"Search by number, location, or type...",value:f,onChange:e=>{S(e.target.value)}}),(0,h.jsx)(c.Q_,{color:"primary",variant:"outline",children:(0,h.jsx)(d.Ay,{icon:r.B})})]})})})]}),(0,h.jsxs)(c._v,{striped:!0,responsive:!0,className:"available-numbers-table",children:[(0,h.jsx)(c.wV,{children:(0,h.jsxs)(c.YI,{children:[(0,h.jsx)(c.$s,{children:"NUMBER"}),(0,h.jsx)(c.$s,{children:"LOCATION"}),(0,h.jsx)(c.$s,{children:"TYPE"}),(0,h.jsx)(c.$s,{children:"PRICE"}),(0,h.jsx)(c.$s,{children:"ACTION"})]})}),(0,h.jsx)(c.jS,{children:0===M.length?(0,h.jsx)(c.YI,{children:(0,h.jsx)(c.cC,{colSpan:5,className:"text-center py-4",children:"No numbers available matching your search"})}):M.map(e=>(0,h.jsxs)(c.YI,{children:[(0,h.jsx)(c.cC,{children:(0,h.jsxs)("div",{className:"number-cell",children:[(0,h.jsx)(d.Ay,{icon:o.L,className:"phone-icon"}),e.number]})}),(0,h.jsx)(c.cC,{children:e.location}),(0,h.jsx)(c.cC,{children:(0,h.jsx)(c.$X,{color:"Toll-Free"===e.type?"success":"info",children:e.type})}),(0,h.jsxs)(c.cC,{children:["\u20b9",e.price]}),(0,h.jsx)(c.cC,{children:(0,h.jsx)(c.Q_,{color:"primary",size:"sm",onClick:()=>(A(e),void P(!0)),children:"Buy"})})]},e.id))})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,h.jsx)("h3",{className:"card-section-title mb-0",children:"Numbers"}),(0,h.jsx)(c.Q_,{color:"primary",className:"buy-number-btn",onClick:()=>g(!0),children:"Buy Number"})]}),(0,h.jsx)("div",{className:"numbers-list",children:p.length>0?Object.entries(N).map(e=>{let[s,a]=e;return(0,h.jsxs)("div",{className:"number-item d-flex align-items-center mb-3",children:[(0,h.jsx)("div",{className:"country-flag me-3",children:(0,h.jsx)("img",{src:"https://flagcdn.com/w40/in.png",alt:"India flag",className:"flag-image"})}),(0,h.jsxs)("div",{className:"number-details",children:[(0,h.jsxs)("span",{className:"country-name",children:["+91 ",s," numbers"]}),(0,h.jsxs)("span",{className:"number-count",children:[Array.isArray(a)?a.length:0," ",Array.isArray(a)&&1===a.length?"number":"numbers"]}),(0,h.jsx)("div",{className:"purchased-numbers mt-1",children:Array.isArray(a)&&a.map(e=>(0,h.jsx)("div",{className:"purchased-number-item",children:e.number},e.id||Math.random().toString()))})]})]},s)}):(0,h.jsxs)("div",{className:"number-item d-flex align-items-center",children:[(0,h.jsx)("div",{className:"country-flag me-3",children:(0,h.jsx)("img",{src:"https://flagcdn.com/w40/in.png",alt:"India flag",className:"flag-image"})}),(0,h.jsxs)("div",{className:"number-details",children:[(0,h.jsx)("span",{className:"country-name",children:"+91 India numbers"}),(0,h.jsx)("span",{className:"number-count",children:"No numbers purchased yet"})]})]})})]})})}),(0,h.jsx)(c.E$,{className:"features-card",children:(0,h.jsxs)(c.W6,{children:[(0,h.jsx)("h3",{className:"card-section-title mb-3",children:"Features included"}),(0,h.jsxs)(c.sK,{children:[(0,h.jsx)(c.UF,{md:6,children:(0,h.jsxs)("div",{className:"feature-item",children:[(0,h.jsx)("div",{className:"feature-check-icon",children:(0,h.jsx)("span",{className:"check-mark",children:"\u2713"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h5",{className:"feature-name",children:"Call Recording"}),(0,h.jsx)("p",{className:"feature-description",children:"Record and store all your calls"})]})]})}),(0,h.jsx)(c.UF,{md:6,children:(0,h.jsxs)("div",{className:"feature-item",children:[(0,h.jsx)("div",{className:"feature-check-icon",children:(0,h.jsx)("span",{className:"check-mark",children:"\u2713"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h5",{className:"feature-name",children:"Browser Calling"}),(0,h.jsx)("p",{className:"feature-description",children:"Make calls directly from your browser"})]})]})}),(0,h.jsx)(c.UF,{md:6,children:(0,h.jsxs)("div",{className:"feature-item",children:[(0,h.jsx)("div",{className:"feature-check-icon",children:(0,h.jsx)("span",{className:"check-mark",children:"\u2713"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h5",{className:"feature-name",children:"IVR"}),(0,h.jsx)("p",{className:"feature-description",children:"Set up interactive voice response"})]})]})}),(0,h.jsx)(c.UF,{md:6,children:(0,h.jsxs)("div",{className:"feature-item",children:[(0,h.jsx)("div",{className:"feature-check-icon",children:(0,h.jsx)("span",{className:"check-mark",children:"\u2713"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h5",{className:"feature-name",children:"Call Analytics"}),(0,h.jsx)("p",{className:"feature-description",children:"Track and analyze call performance"})]})]})})]})]})})]})}),(0,h.jsx)(c.x1,{role:"tabpanel",visible:2===e,children:(0,h.jsx)("div",{className:"tab-content-wrapper",children:(0,h.jsxs)("div",{className:"billing-tab-content",children:[(0,h.jsx)("h3",{className:"mb-4",children:"Billing Details"}),(0,h.jsx)("div",{className:"d-flex justify-content-center",children:(0,h.jsx)(c.E$,{className:"mb-4",style:{width:"100%",maxWidth:600,boxShadow:"0 2px 16px 0 rgba(44,62,80,.07)"},children:(0,h.jsxs)(c.W6,{children:[(0,h.jsx)("h4",{className:"mb-4 text-center fw-bold",style:{letterSpacing:.2},children:"Billing information"}),(0,h.jsxs)(c.qI,{id:"billingForm",children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsxs)(c.A6,{children:["Company name ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(c.OG,{type:"text",placeholder:"Enter company name",required:!0})]}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsxs)(c.A6,{children:["GST number ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(c.OG,{type:"text",placeholder:"Enter GST number",required:!0})]}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsxs)(c.A6,{children:["Address ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(c.OG,{type:"text",placeholder:"Address line 1",className:"mb-2",required:!0}),(0,h.jsx)(c.OG,{type:"text",placeholder:"Address line 2"})]}),(0,h.jsxs)("div",{className:"row mb-3",children:[(0,h.jsxs)("div",{className:"col-md-6 mb-3 mb-md-0",children:[(0,h.jsxs)(c.A6,{children:["City ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(c.OG,{type:"text",placeholder:"Enter city",required:!0})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsxs)(c.A6,{children:["State ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsxs)(c.MT,{required:!0,children:[(0,h.jsx)("option",{value:"",children:"Select state"}),["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"].map(e=>(0,h.jsx)("option",{value:e,children:e},e))]})]})]}),(0,h.jsxs)("div",{className:"row mb-3",children:[(0,h.jsxs)("div",{className:"col-md-6 mb-3 mb-md-0",children:[(0,h.jsxs)(c.A6,{children:["Country ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsxs)(c.MT,{required:!0,children:[(0,h.jsx)("option",{value:"",children:"Select country"}),["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, North","Korea, South","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"].map(e=>(0,h.jsx)("option",{value:e,children:e},e))]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsxs)(c.A6,{children:["Postal code ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(c.OG,{type:"text",placeholder:"Enter postal code",required:!0})]})]}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsxs)(c.A6,{children:["Email for invoices ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(c.OG,{type:"email",placeholder:"Enter email address",required:!0})]}),(0,h.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,h.jsx)("div",{className:"custom-toggle",children:(0,h.jsx)(c.Qb,{label:"Make default for all purchases",id:"defaultBillingSwitch"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)(c.Q_,{color:"light",className:"me-2",children:"Cancel"}),(0,h.jsx)(c.Q_,{color:"primary",onClick:e=>{e.preventDefault();const s=e.target.closest("form");!s||s.checkValidity()?(j(!0),setTimeout(()=>{j(!1),m(!0),setTimeout(()=>{m(!1)},5e3)},800)):s.reportValidity()},disabled:u,children:u?"Saving...":"Save Changes"})]})]}),a&&(0,h.jsx)(c.kj,{color:"success",className:"mt-4",children:"Billing details saved successfully."})]})]})})}),(0,h.jsx)("div",{className:"d-flex justify-content-center",children:(0,h.jsx)("div",{style:{width:"100%",maxWidth:700},children:(0,h.jsxs)("div",{className:"payment-history-section mt-4",style:{border:"1px solid #d1d5db",borderRadius:8,background:"#fff"},children:[(0,h.jsx)("div",{className:"py-3 px-4 border-bottom",style:{borderBottom:"1px solid #d1d5db",fontWeight:600,fontSize:18,textAlign:"center"},children:"Payment History"}),(0,h.jsx)("div",{className:"p-4 text-center",style:{color:"#6b7280",fontSize:16},children:"No payment history available"})]})})})]})})}),(0,h.jsx)(c.x1,{role:"tabpanel",visible:3===e,children:(0,h.jsx)(x,{})})]})]})}),(0,h.jsxs)(c.zS,{visible:C,onClose:()=>P(!1),className:"payment-modal",children:[(0,h.jsx)(c.E4,{closeButton:!0,children:(0,h.jsx)(c.lb,{children:"Confirm Your Purchase"})}),(0,h.jsx)(c.Tc,{children:F?(0,h.jsxs)("div",{className:"text-center py-4",children:[(0,h.jsx)("div",{className:"success-icon mb-3",children:(0,h.jsx)("i",{className:"success-check",children:"\u2713"})}),(0,h.jsx)("h4",{className:"mb-3",children:"Payment Successful!"}),(0,h.jsx)("p",{children:"Your number has been purchased successfully."}),(0,h.jsx)("p",{className:"mb-0",children:"Redirecting back to overview..."})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"selected-number-info mb-4",children:[(0,h.jsx)("div",{className:"number-label",children:"Selected Number:"}),(0,h.jsx)("div",{className:"number-value",children:null===D||void 0===D?void 0:D.number})]}),(0,h.jsxs)("div",{className:"payment-methods",children:[(0,h.jsxs)("div",{className:"method-item",children:[(0,h.jsx)(c.CK,{type:"radio",id:"payment-method-1",name:"paymentMethod",value:"creditCard",checked:"creditCard"===k,onChange:U,className:"custom-radio"}),(0,h.jsx)(c.A6,{htmlFor:"payment-method-1",className:"method-label",children:"Credit Card"})]}),(0,h.jsxs)("div",{className:"method-item",children:[(0,h.jsx)(c.CK,{type:"radio",id:"payment-method-2",name:"paymentMethod",value:"upi",checked:"upi"===k,onChange:U,className:"custom-radio"}),(0,h.jsx)(c.A6,{htmlFor:"payment-method-2",className:"method-label",children:"UPI"})]}),(0,h.jsxs)("div",{className:"method-item",children:[(0,h.jsx)(c.CK,{type:"radio",id:"payment-method-3",name:"paymentMethod",value:"netBanking",checked:"netBanking"===k,onChange:U,className:"custom-radio"}),(0,h.jsx)(c.A6,{htmlFor:"payment-method-3",className:"method-label",children:"Net Banking"})]})]}),k&&(0,h.jsxs)("div",{className:"payment-summary mt-4",children:[(0,h.jsxs)("div",{className:"summary-item d-flex justify-content-between",children:[(0,h.jsx)("div",{className:"item-label",children:"Number Price:"}),(0,h.jsxs)("div",{className:"item-value",children:["\u20b9",null===D||void 0===D?void 0:D.price]})]}),(0,h.jsxs)("div",{className:"summary-item d-flex justify-content-between",children:[(0,h.jsx)("div",{className:"item-label",children:"Tax (18% GST):"}),(0,h.jsxs)("div",{className:"item-value",children:["\u20b9",(.18*(null===D||void 0===D?void 0:D.price)).toFixed(2)]})]}),(0,h.jsxs)("div",{className:"summary-item d-flex justify-content-between fw-bold",children:[(0,h.jsx)("div",{className:"item-label",children:"Total Amount:"}),(0,h.jsxs)("div",{className:"item-value",children:["\u20b9",(1.18*(null===D||void 0===D?void 0:D.price)).toFixed(2)]})]})]})]})}),!F&&(0,h.jsxs)(c.If,{children:[(0,h.jsx)(c.Q_,{color:"primary",onClick:()=>{k&&(L(!0),setTimeout(()=>{if(D){const e=function(e){const s=[...t(),{...e,purchaseDate:(new Date).toISOString()}];return localStorage.setItem("purchasedNumbers",JSON.stringify(s)),s}(D);v(e),b(l())}L(!1),_(!0),setTimeout(()=>{P(!1),g(!1),s(1),A(null),T(""),_(!1)},2e3)},1500))},disabled:B||!k,children:B?"Processing...":"Confirm and Pay"}),(0,h.jsx)(c.Q_,{color:"secondary",onClick:()=>P(!1),disabled:B,children:"Cancel"})]})]})]})}}}]);