"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[290],{40290:function(e,t,r){r.r(t),r.d(t,{default:function(){return U}});var i=r(9950),a=r(26910),n=r(28429),o=r(78317),s=r(46639),l=r(62999),c=r(82053),d=r(10226),m=r(74745),u=r(60899),p=r(48089),h=r(98587),v=r(58168),g=r(72004),A=r(88465),f=r(4236),b=r(59254),x=r(1763),y=r(423);function w(e){return(0,y.Ay)("MuiCardMedia",e)}(0,x.A)("MuiCardMedia",["root","media","img"]);var S=r(44414);const j=["children","className","component","image","src","style"],C=(0,b.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{isMediaComponent:i,isImageComponent:a}=r;return[t.root,i&&t.media,a&&t.img]}})(e=>{let{ownerState:t}=e;return(0,v.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})}),N=["video","audio","picture","iframe","img"],M=["picture","img"];var R=i.forwardRef(function(e,t){const r=(0,f.b)({props:e,name:"MuiCardMedia"}),{children:i,className:a,component:n="div",image:o,src:s,style:l}=r,c=(0,h.A)(r,j),d=-1!==N.indexOf(n),m=!d&&o?(0,v.A)({backgroundImage:'url("'.concat(o,'")')},l):l,u=(0,v.A)({},r,{component:n,isMediaComponent:d,isImageComponent:-1!==M.indexOf(n)}),p=(e=>{const{classes:t,isMediaComponent:r,isImageComponent:i}=e,a={root:["root",r&&"media",i&&"img"]};return(0,A.A)(a,w,t)})(u);return(0,S.jsx)(C,(0,v.A)({className:(0,g.A)(p.root,a),as:n,role:!d&&o?"img":void 0,ref:t,style:m,ownerState:u,src:d?o||s:void 0},c,{children:i}))}),_=r(50704),I=r(29925),L=r(61676),k=r(15866),P=r(39766);function z(e){return(0,y.Ay)("MuiInputAdornment",e)}var E,O=(0,x.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);const H=["children","className","component","disablePointerEvents","disableTypography","position","variant"],T=(0,b.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["position".concat((0,L.A)(r.position))],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})(e=>{let{theme:t,ownerState:r}=e;return(0,v.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===r.variant&&{["&.".concat(O.positionStart,"&:not(.").concat(O.hiddenLabel,")")]:{marginTop:16}},"start"===r.position&&{marginRight:8},"end"===r.position&&{marginLeft:8},!0===r.disablePointerEvents&&{pointerEvents:"none"})});var V=i.forwardRef(function(e,t){const r=(0,f.b)({props:e,name:"MuiInputAdornment"}),{children:a,className:n,component:o="div",disablePointerEvents:s=!1,disableTypography:l=!1,position:d,variant:m}=r,u=(0,h.A)(r,H),p=(0,P.A)()||{};let b=m;m&&p.variant,p&&!b&&(b=p.variant);const x=(0,v.A)({},r,{hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:s,position:d,variant:b}),y=(e=>{const{classes:t,disablePointerEvents:r,hiddenLabel:i,position:a,size:n,variant:o}=e,s={root:["root",r&&"disablePointerEvents",a&&"position".concat((0,L.A)(a)),o,i&&"hiddenLabel",n&&"size".concat((0,L.A)(n))]};return(0,A.A)(s,z,t)})(x);return(0,S.jsx)(k.A.Provider,{value:null,children:(0,S.jsx)(T,(0,v.A)({as:o,ownerState:x,className:(0,g.A)(y.root,n),ref:t},u,{children:"string"!==typeof a||l?(0,S.jsxs)(i.Fragment,{children:["start"===d?E||(E=(0,S.jsx)("span",{className:"notranslate",children:"\u200b"})):null,a]}):(0,S.jsx)(c.A,{color:"text.secondary",children:a})}))})});function W(e){return(0,y.Ay)("MuiCardActions",e)}(0,x.A)("MuiCardActions",["root","spacing"]);const D=["disableSpacing","className"],B=(0,b.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})(e=>{let{ownerState:t}=e;return(0,v.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})});var F=i.forwardRef(function(e,t){const r=(0,f.b)({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:a}=r,n=(0,h.A)(r,D),o=(0,v.A)({},r,{disableSpacing:i}),s=(e=>{const{classes:t,disableSpacing:r}=e,i={root:["root",!r&&"spacing"]};return(0,A.A)(i,W,t)})(o);return(0,S.jsx)(B,(0,v.A)({className:(0,g.A)(s.root,a),ownerState:o,ref:t},n))}),K=r(98785),X=r(65429),q=r(72934),G=r(23235),J=(0,G.A)((0,S.jsx)("path",{d:"M22.73 22.73 2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2"}),"RemoveShoppingCart"),Q=(0,G.A)((0,S.jsx)("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2m-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25"}),"AddShoppingCart");var U=()=>{const[e,t]=(0,i.useState)([]),[r,h]=(0,i.useState)([]),[v,g]=(0,i.useState)({}),[A,f]=(0,i.useState)(!0),b=(0,n.g)().id,[x,y]=(0,i.useState)({open:!1,message:"",severity:"success"});(0,i.useEffect)(()=>{(async()=>{try{f(!0);const e=(await a.A.get("/api/outlet/get")).data.data,r=(await a.A.get("/api/outlet/get/".concat(b))).data.data.map(e=>e.menuItem._id),i=0===r.length?e:e.filter(e=>!r.includes(e._id));t(i),h(r)}catch(e){console.error(e),y({open:!0,message:"Failed to load products",severity:"error"})}finally{f(!1)}})()},[b]);const w=()=>{y(e=>({...e,open:!1}))},j=e=>{const t=v[e._id];return null!==t&&void 0!==t&&t.added&&void 0!==(null===t||void 0===t?void 0:t.price)?t.price:e.price},C={};return e.forEach(e=>{C[e.category.categoryName]||(C[e.category.categoryName]=[]),C[e.category.categoryName].push(e)}),A&&0===e.length?(0,S.jsx)(o.A,{className:"flex justify-center items-center h-screen",children:(0,S.jsx)(s.A,{})}):(0,S.jsxs)(l.A,{className:"py-8",children:[(0,S.jsxs)(o.A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:4,children:[(0,S.jsx)(c.A,{variant:"h4",component:"h1",className:"font-bold text-gray-800",children:"Outlet Products Management"}),(0,S.jsx)(d.A,{variant:"contained",color:"primary",startIcon:(0,S.jsx)(q.A,{}),onClick:async()=>{try{f(!0);const e=Object.keys(v).filter(e=>v[e].added).map(e=>({menuItem:e,outlet:b,price:v[e].price}));await a.A.post("/api/outlet/add",{products:e}),y({open:!0,message:"Products added to outlet successfully",severity:"success"});const r=(await a.A.get("/api/outlet/get")).data.data,i=(await a.A.get("/api/outlet/get/".concat(b))).data.data.map(e=>e.menuItem._id),n=r.filter(e=>!i.includes(e._id));t(n),g({})}catch(e){console.error(e),y({open:!0,message:"Failed to add products to outlet",severity:"error"})}finally{f(!1)}},disabled:A,children:"Save Outlet Products"})]}),0===Object.keys(C).length?(0,S.jsx)(c.A,{variant:"h6",color:"text.secondary",className:"text-center",children:"No new products available to add"}):Object.keys(C).map(t=>(0,S.jsxs)(o.A,{className:"mx-10",children:[(0,S.jsxs)(o.A,{className:"my-4",children:[(0,S.jsx)(c.A,{variant:"h5",component:"h2",className:"font-semibold text-gray-700",children:t}),(0,S.jsx)(m.A,{className:"mt-2"})]}),(0,S.jsx)(u.Ay,{container:!0,spacing:3,children:C[t].map(t=>{var r,i,a,n,s,l,m;return(0,S.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,S.jsxs)(p.A,{className:"h-full flex flex-col hover:shadow-lg transition-shadow duration-300",children:[(0,S.jsx)(o.A,{className:"h-64 flex items-center justify-center bg-gray-50 p-2",children:(0,S.jsx)(R,{component:"img",image:t.photo,alt:t.item,className:"max-h-full max-w-full object-contain",sx:{objectFit:"contain"}})}),(0,S.jsxs)(_.A,{className:"flex-grow",children:[(0,S.jsx)(c.A,{variant:"h6",component:"div",className:"font-medium mb-2 text-gray-800",children:t.item}),(0,S.jsxs)(c.A,{variant:"body2",color:"text.secondary",className:"mb-3",children:["Original Price: \u20b9",t.price]}),(0,S.jsx)(I.A,{label:"Outlet Price",type:"number",size:"small",fullWidth:!0,variant:"outlined",value:j(t),onChange:e=>{return r=t._id,i=e.target.value,void g(e=>({...e,[r]:{price:i,added:!0}}));var r,i},className:"mb-2",InputProps:{startAdornment:(0,S.jsx)(V,{position:"start",children:"\u20b9"})},helperText:null!==(r=v[t._id])&&void 0!==r&&r.added?"Discounted price (edit to change)":"Original price (click Add to modify)",disabled:!(null!==(i=v[t._id])&&void 0!==i&&i.added)})]}),(0,S.jsx)(F,{className:"bg-gray-50",children:(0,S.jsx)(d.A,{fullWidth:!0,variant:null!==(a=v[t._id])&&void 0!==a&&a.added?"outlined":"contained",color:null!==(n=v[t._id])&&void 0!==n&&n.added?"error":"primary",onClick:()=>{return r=t._id,void g(t=>{const i=t[r];if(i&&i.added)return{...t,[r]:{...i,added:!1}};{const i=e.find(e=>e._id===r);return{...t,[r]:{price:i.price,added:!0}}}});var r},startIcon:null!==(s=v[t._id])&&void 0!==s&&s.added?(0,S.jsx)(J,{}):(0,S.jsx)(Q,{}),className:null!==(l=v[t._id])&&void 0!==l&&l.added?"text-red-500 border-red-500":"bg-blue-600 hover:bg-blue-700",children:null!==(m=v[t._id])&&void 0!==m&&m.added?"Remove":"Add to Outlet"})})]})},t._id)})})]},t)),(0,S.jsx)(K.A,{open:x.open,autoHideDuration:6e3,onClose:w,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,S.jsx)(X.A,{onClose:w,severity:x.severity,variant:"filled",children:x.message})})]})}},48089:function(e,t,r){r.d(t,{A:function(){return A}});var i=r(58168),a=r(98587),n=r(9950),o=r(72004),s=r(88465),l=r(59254),c=r(4236),d=r(2235),m=r(1763),u=r(423);function p(e){return(0,u.Ay)("MuiCard",e)}(0,m.A)("MuiCard",["root"]);var h=r(44414);const v=["className","raised"],g=(0,l.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"}));var A=n.forwardRef(function(e,t){const r=(0,c.b)({props:e,name:"MuiCard"}),{className:n,raised:l=!1}=r,d=(0,a.A)(r,v),m=(0,i.A)({},r,{raised:l}),u=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},p,t)})(m);return(0,h.jsx)(g,(0,i.A)({className:(0,o.A)(u.root,n),elevation:l?8:void 0,ref:t,ownerState:m},d))})},50704:function(e,t,r){r.d(t,{A:function(){return g}});var i=r(58168),a=r(98587),n=r(9950),o=r(72004),s=r(88465),l=r(59254),c=r(4236),d=r(1763),m=r(423);function u(e){return(0,m.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var p=r(44414);const h=["className","component"],v=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var g=n.forwardRef(function(e,t){const r=(0,c.b)({props:e,name:"MuiCardContent"}),{className:n,component:l="div"}=r,d=(0,a.A)(r,h),m=(0,i.A)({},r,{component:l}),g=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},u,t)})(m);return(0,p.jsx)(v,(0,i.A)({as:l,className:(0,o.A)(g.root,n),ownerState:m,ref:t},d))})},72934:function(e,t,r){var i=r(23235),a=r(44414);t.A=(0,i.A)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},74745:function(e,t,r){var i=r(98587),a=r(58168),n=r(9950),o=r(72004),s=r(88465),l=r(9240),c=r(59254),d=r(4236),m=r(40777),u=r(44414);const p=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],h=(0,c.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})(e=>{let{theme:t,ownerState:r}=e;return(0,a.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},r.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},r.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,l.X4)(t.palette.divider,.08)},"inset"===r.variant&&{marginLeft:72},"middle"===r.variant&&"horizontal"===r.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===r.variant&&"vertical"===r.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===r.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},r.flexItem&&{alignSelf:"stretch",height:"auto"})},e=>{let{ownerState:t}=e;return(0,a.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})},e=>{let{theme:t,ownerState:r}=e;return(0,a.A)({},r.children&&"vertical"!==r.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}})},e=>{let{theme:t,ownerState:r}=e;return(0,a.A)({},r.children&&"vertical"===r.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}})},e=>{let{ownerState:t}=e;return(0,a.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})}),v=(0,c.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})(e=>{let{theme:t,ownerState:r}=e;return(0,a.A)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===r.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})}),g=n.forwardRef(function(e,t){const r=(0,d.b)({props:e,name:"MuiDivider"}),{absolute:n=!1,children:l,className:c,component:g=(l?"div":"hr"),flexItem:A=!1,light:f=!1,orientation:b="horizontal",role:x=("hr"!==g?"separator":void 0),textAlign:y="center",variant:w="fullWidth"}=r,S=(0,i.A)(r,p),j=(0,a.A)({},r,{absolute:n,component:g,flexItem:A,light:f,orientation:b,role:x,textAlign:y,variant:w}),C=(e=>{const{absolute:t,children:r,classes:i,flexItem:a,light:n,orientation:o,textAlign:l,variant:c}=e,d={root:["root",t&&"absolute",c,n&&"light","vertical"===o&&"vertical",a&&"flexItem",r&&"withChildren",r&&"vertical"===o&&"withChildrenVertical","right"===l&&"vertical"!==o&&"textAlignRight","left"===l&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,s.A)(d,m.K,i)})(j);return(0,u.jsx)(h,(0,a.A)({as:g,className:(0,o.A)(C.root,c),role:x,ref:t,ownerState:j},S,{children:l?(0,u.jsx)(v,{className:C.wrapper,ownerState:j,children:l}):null}))});g.muiSkipListHighlight=!0,t.A=g}}]);