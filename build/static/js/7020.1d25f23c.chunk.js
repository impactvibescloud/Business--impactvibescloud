"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7020],{27020:function(e,n,r){r.r(n);var i=r(9950),t=r(78317),a=r(82053),c=r(25979),s=r(3788),l=r(27138),d=r(11088),o=r(29925),h=r(1320),u=r(2235),A=r(15769),x=r(69780),j=r(9213),v=r(21671),g=r(34075),p=r(14712),m=r(10226),I=r(9567),f=r(28429),S=r(26910),_=r(11031),D=r(41397),b=r(44414);const w=e=>{const n=new Date(e).getHours(),r=new Date(e).getMinutes(),i=n>=12?"PM":"AM",t=r<10?"0"+r:r;return"".concat(n%12||12,":").concat(t," ").concat(i)};n.default=()=>{const[e,n]=(0,i.useState)([]),[r,y]=(0,i.useState)(!0),[C,P]=(0,i.useState)(0),[O,k]=(0,i.useState)(5),[B,M]=(0,i.useState)(0),[R,E]=(0,i.useState)("Order ID"),[V,W]=(0,i.useState)(""),q=(0,f.Zp)(),z=(0,_.g)(),F=(0,i.useRef)(),H=(0,i.useRef)((0,D.debounce)((e,n,r,i)=>{L(e,n,r,i)},500)).current,L=async function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";y(!0);try{var a,c;const s=await S.A.get("/api/get-dispatched-invoice-admin",{headers:{Authorization:"Bearer ".concat(z)},params:{limit:r,page:e+1,["Order ID"===i?"orderId":"invoiceId"]:t||""}});n(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.invoices),M(null===s||void 0===s||null===(c=s.data)||void 0===c?void 0:c.totalCount)}catch(s){console.error("Error fetching orders:",s)}finally{y(!1)}};(0,i.useEffect)(()=>{H(C,O,R,V)},[C,O,R,V]);return(0,b.jsxs)(t.A,{children:[(0,b.jsx)(a.A,{variant:"h4",mb:2,textAlign:"center",children:"Dispatch Invoice List"}),(0,b.jsxs)(t.A,{display:"flex",mb:2,alignItems:"center",children:[(0,b.jsxs)(c.A,{variant:"outlined",sx:{minWidth:150,mr:2},children:[(0,b.jsx)(s.A,{id:"search-field-label",children:"Search By"}),(0,b.jsxs)(l.A,{labelId:"search-field-label",id:"search-field",value:R,onChange:e=>{E(e.target.value)},label:"Search By",children:[(0,b.jsx)(d.A,{value:"Order ID",children:"Order ID"}),(0,b.jsx)(d.A,{value:"Invoice ID",children:"Invoice ID"})]})]}),(0,b.jsx)(o.A,{label:"Search by ".concat(R),variant:"outlined",value:V,onChange:e=>{const n=e.target.value;W(n),F.current=n},fullWidth:!0})]}),(0,b.jsxs)(h.A,{component:u.A,children:[(0,b.jsxs)(A.A,{children:[(0,b.jsx)(x.A,{children:(0,b.jsxs)(j.A,{children:[(0,b.jsx)(v.A,{children:"Order ID"}),(0,b.jsx)(v.A,{children:"Invoice ID"}),(0,b.jsx)(v.A,{children:"Dispatched Date"}),(0,b.jsx)(v.A,{children:"Items"}),(0,b.jsx)(v.A,{children:"Invoice Value"}),(0,b.jsx)(v.A,{children:"Status"}),(0,b.jsx)(v.A,{children:"Action"})]})}),(0,b.jsx)(g.A,{children:r?Array.from(new Array(O)).map((e,n)=>(0,b.jsx)(j.A,{children:(0,b.jsx)(v.A,{colSpan:6,children:(0,b.jsx)(p.A,{height:40})})},n)):e.length>0?e.map(e=>(0,b.jsxs)(j.A,{children:[(0,b.jsx)(v.A,{children:e.orderId.uniqueId}),(0,b.jsx)(v.A,{children:e.invoiceId}),(0,b.jsxs)(v.A,{children:[new Date(e.courierstatus_timeline.dispatched).toDateString(),(0,b.jsxs)("span",{children:[", ",w(e.courierstatus_timeline.dispatched)]})]}),(0,b.jsx)(v.A,{children:e.items.length}),(0,b.jsxs)(v.A,{children:["\u20b9 ",e.invoiceAmount.toFixed(2)]}),(0,b.jsx)(v.A,{children:e.courierStatus}),(0,b.jsx)(v.A,{children:(0,b.jsx)(m.A,{variant:"contained",color:"primary",onClick:()=>q("/orders/invoice/".concat(e.courierStatus,"/").concat(e._id)),children:"View"})})]},e._id)):(0,b.jsx)(j.A,{children:(0,b.jsx)(v.A,{colSpan:6,align:"center",children:(0,b.jsx)(a.A,{variant:"body1",children:"No data found"})})})})]}),(0,b.jsx)(I.A,{rowsPerPageOptions:[5,10,25],component:"div",count:B,rowsPerPage:O,page:C,onPageChange:(e,n)=>{P(n)},onRowsPerPageChange:e=>{k(parseInt(e.target.value,10)),P(0)}})]})]})}}}]);