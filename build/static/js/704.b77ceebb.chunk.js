"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[704],{975:function(e,a,n){n(9950);var t=n(81949),s=n(15053),i=n(32805),l=n(44429),o=n(50347),r=n(92737),c=n(17604),d=n(87744),m=n(23286),h=n(10113),u=n(73600),p=n(11280),g=n(49911),A=n(44414);const v=[{component:g.g9,name:"Dashboard",to:"/dashboard",icon:(0,A.jsx)(t.Ay,{icon:p.I,customClassName:"nav-icon"}),group:""},{component:g.g9,name:"Agents",icon:(0,A.jsx)(t.Ay,{icon:c.r,customClassName:"nav-icon"}),to:"/branch",group:"Agents"},{component:g.g9,name:"Call Settings",icon:(0,A.jsx)(t.Ay,{icon:u.e,customClassName:"nav-icon"}),to:"/call-settings",group:"Settings"},{component:g.g9,name:"Contacts",icon:(0,A.jsx)(t.Ay,{icon:m.g,customClassName:"nav-icon"}),to:"/contacts",group:"Contacts"},{component:g.g9,name:"Contact Lists",icon:(0,A.jsx)(t.Ay,{icon:m.g,customClassName:"nav-icon"}),to:"/contactlists",group:"Contact Lists"},{component:g.g9,name:"Call Logs",icon:(0,A.jsx)(t.Ay,{icon:c.r,customClassName:"nav-icon"}),to:"/callogs",group:"Call Logs"},{component:g.g9,name:"Call Uses",icon:(0,A.jsx)(t.Ay,{icon:r.B,customClassName:"nav-icon"}),to:"/calluses",group:"Call Logs"},{component:g.g9,name:"Department",icon:(0,A.jsx)(t.Ay,{icon:s.d,customClassName:"nav-icon"}),to:"/department",group:"Department"},{component:g.qH,name:"Campaigns",icon:(0,A.jsx)(t.Ay,{icon:i.X,customClassName:"nav-icon"}),items:[{component:g.g9,name:"Audio",to:"/campaigns/audio"}]},{component:g.g9,name:"Virtual Numbers",icon:(0,A.jsx)(t.Ay,{icon:h.L,customClassName:"nav-icon"}),to:"/virtual-numbers",group:"Virtual Numbers"},{component:g.g9,name:"Billing",icon:(0,A.jsx)(t.Ay,{icon:o.v,customClassName:"nav-icon"}),to:"/billing",group:"Billing"},{component:g.g9,name:"Reports & Analytics",icon:(0,A.jsx)(t.Ay,{icon:l.H,customClassName:"nav-icon"}),to:"/reports-analytics",group:"Reports & Analytics"},{component:g.g9,name:"Support Tickets",icon:(0,A.jsx)(t.Ay,{icon:d.w,customClassName:"nav-icon"}),to:"/tickets",group:"Support"}];a.A=v},2237:function(e,a,n){n.r(a),n.d(a,{default:function(){return Ia}});var t=n(9950),s=n(49911),i=n(26910),l=n(4695),o=n.n(l),r=n(2720),c=n(44414);var d=()=>{const[e,a]=(0,t.useState)(""),[n,l]=(0,t.useState)(""),[d,m]=(0,t.useState)(""),[h,u]=(0,t.useState)([]),[p,g]=(0,t.useState)(!1),[A,v]=(0,t.useState)(""),[f,b]=(0,t.useState)(null),[y,x]=(0,t.useState)(null),[N,j]=(0,t.useState)(!1),[C,w]=(0,t.useState)(0),z=(0,t.useRef)(null),S=(0,t.useRef)(null),[E,P]=(0,t.useState)([]),[I,D]=(0,t.useState)(!1),[k,B]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{const e=await(0,r.H2)("/v1/user/details","GET"),a=e.user||e.data||e;a&&a.businessId&&l(a.businessId)}catch(e){console.warn("Could not fetch user details for businessId")}})()},[]),(0,t.useEffect)(()=>{(async()=>{if(n){g(!0);try{const e=await(0,r.H2)("/numbers/assigned-to/".concat(n),"GET"),a=e.data||e.numbers||e||[],t=(Array.isArray(a)?a:[]).map(e=>({id:e._id||e.id,number:e.number||e}));u(t),!d&&t.length>0&&m(t[0].number)}catch(e){console.error("Failed to fetch DID numbers",e)}finally{g(!1)}}})()},[n]),(0,t.useEffect)(()=>{n&&O()},[n]);const O=async()=>{if(n){D(!0);try{const e=await(0,r.H2)("/campaigns?businessId=".concat(n),"GET");let a=e;e&&e.data&&void 0!==e.data.data?a=e.data:e&&e.success&&void 0!==e.data&&(a=e);const t=a.data||a.campaigns||a.results||a||[];P(Array.isArray(t)?t:[])}catch(e){console.error("Failed to fetch campaigns",e)}finally{D(!1)}}},T=localStorage.getItem("authToken");return(0,c.jsxs)("div",{className:"p-3",children:[(0,c.jsx)(s.E$,{children:(0,c.jsxs)(s.W6,{children:[(0,c.jsxs)(s.sK,{className:"align-items-center mb-3",children:[(0,c.jsxs)(s.UF,{children:[(0,c.jsx)("h3",{children:"Audio Campaigns"}),(0,c.jsx)("p",{className:"text-muted",children:"Create and manage your audio campaigns here."})]}),(0,c.jsx)(s.UF,{className:"text-end",children:(0,c.jsx)(s.Q_,{color:"primary",onClick:()=>B(!0),children:"New Campaign"})})]}),(0,c.jsxs)(s.zS,{visible:k,onClose:()=>B(!1),backdrop:"static",children:[(0,c.jsx)(s.E4,{closeButton:!0,children:(0,c.jsx)(s.lb,{children:"New Audio Campaign"})}),(0,c.jsxs)(s.Tc,{children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"campaignName",children:"Campaign Name"}),(0,c.jsx)(s.OG,{id:"campaignName",value:e,onChange:e=>a(e.target.value),placeholder:"Enter audio campaign name"})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"didNumber",children:"DID Number"}),(0,c.jsxs)(s.MT,{id:"didNumber",value:d,onChange:e=>m(e.target.value),"aria-label":"Select DID Number",children:[(0,c.jsx)("option",{value:"",children:"Select DID Number"}),p?(0,c.jsx)("option",{disabled:!0,children:"Loading..."}):h.map(e=>(0,c.jsx)("option",{value:e.number,children:e.number},e.id))]}),(0,c.jsx)(s.a5,{className:"text-muted",children:"Destination DID number for outbound calls."})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"scheduledAt",children:"Schedule (UTC)"}),(0,c.jsx)(s.OG,{id:"scheduledAt",type:"datetime-local",value:A,onChange:e=>v(e.target.value)}),(0,c.jsx)(s.a5,{className:"text-muted",children:"Set scheduled start time for the campaign."})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"numbersFile",children:"Contacts File (CSV/XLSX)"}),(0,c.jsx)(s.OG,{type:"file",id:"numbersFile",accept:".csv,.xls,.xlsx",onChange:e=>{var a;return b((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)},ref:z})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"audioFile",children:"Audio File (optional)"}),(0,c.jsx)(s.OG,{type:"file",id:"audioFile",accept:"audio/*",onChange:e=>{var a;return x((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)},ref:S})]}),N&&(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsxs)(s.fZ,{value:C,children:[C,"%"]})})]}),(0,c.jsxs)(s.If,{children:[(0,c.jsx)(s.Q_,{color:"secondary",onClick:()=>B(!1),disabled:N,children:"Cancel"}),(0,c.jsx)(s.Q_,{color:"primary",onClick:async()=>{await(async()=>{if(!e||!n||!d||!A)return void o().fire({icon:"warning",title:"Missing fields",text:"Please fill name, business, DID and schedule."});if(!f)return void o().fire({icon:"warning",title:"Missing file",text:"Please upload contacts CSV/XLSX file."});const t=new FormData;t.append("name",e),t.append("businessId",n),t.append("didNumber",d);const s=A?new Date(A).toISOString():"";t.append("scheduledAt",s),t.append("file",f),y&&t.append("audio",y),j(!0),w(0);try{var l;const e="".concat((0,r.vo)(),"/api/campaigns/upload"),n=await i.A.post(e,t,{headers:{Authorization:"Bearer ".concat(T),"Content-Type":"multipart/form-data"},onUploadProgress:e=>{e.total&&w(Math.round(100*e.loaded/e.total))}});console.log("campaign upload response",n.data),o().fire({icon:"success",title:"Campaign Created",text:(null===(l=n.data)||void 0===l?void 0:l.message)||"Campaign uploaded successfully"}),a(""),m(""),v(""),b(null),x(null),z.current&&(z.current.value=""),S.current&&(S.current.value="");try{await O()}catch(u){}return!0}catch(p){var c,h;console.error("Upload failed",p);const e=(null===p||void 0===p||null===(c=p.response)||void 0===c||null===(h=c.data)||void 0===h?void 0:h.message)||p.message||"Upload failed";return o().fire({icon:"error",title:"Upload Failed",text:e}),!1}finally{j(!1),w(0)}})()&&B(!1)},disabled:N,children:N?"Uploading...":"Create Campaign"})]})]})]})}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("h5",{children:"Campaigns"}),I?(0,c.jsx)("div",{className:"py-3 text-center",children:(0,c.jsx)(s.JT,{})}):0===E.length?(0,c.jsx)("p",{className:"text-muted",children:"No campaigns found for this business."}):(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Name"}),(0,c.jsx)("th",{children:"DID"}),(0,c.jsx)("th",{children:"Numbers"}),(0,c.jsx)("th",{children:"Scheduled"}),(0,c.jsx)("th",{children:"Completed"}),(0,c.jsx)("th",{children:"Status"})]})}),(0,c.jsx)("tbody",{children:E.map(e=>{var a;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name||e.title||"Untitled Campaign"}),(0,c.jsx)("td",{children:e.didNumber||e.did||"-"}),(0,c.jsx)("td",{children:Array.isArray(e.numbers)?e.numbers.length:e.numbers?e.numbers:"-"}),(0,c.jsx)("td",{children:e.scheduledAt?new Date(e.scheduledAt).toLocaleString():"-"}),(0,c.jsx)("td",{children:null!==(a=e.result)&&void 0!==a&&a.completedAt?new Date(e.result.completedAt).toLocaleString():"-"}),(0,c.jsx)("td",{children:e.status||e.state||"N/A"})]},e._id||e.id||e.name)})})]})})]})]})};const m=t.lazy(()=>n.e(8213).then(n.bind(n,8213))),h=t.lazy(()=>n.e(617).then(n.bind(n,60617))),u=t.lazy(()=>Promise.all([n.e(9612),n.e(4480)]).then(n.bind(n,74480))),p=t.lazy(()=>n.e(1703).then(n.bind(n,1703))),g=t.lazy(()=>n.e(5772).then(n.bind(n,35772))),A=t.lazy(()=>n.e(3749).then(n.bind(n,33749))),v=t.lazy(()=>n.e(7582).then(n.bind(n,17582))),f=t.lazy(()=>n.e(8215).then(n.bind(n,8215))),b=t.lazy(()=>n.e(3507).then(n.bind(n,53507))),y=t.lazy(()=>n.e(9614).then(n.bind(n,19614))),x=t.lazy(()=>Promise.all([n.e(5783),n.e(9540)]).then(n.bind(n,89540))),N=t.lazy(()=>n.e(8010).then(n.bind(n,18010))),j=t.lazy(()=>n.e(3349).then(n.bind(n,13349))),C=t.lazy(()=>n.e(2998).then(n.bind(n,42998))),w=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(525)]).then(n.bind(n,40525))),z=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3806),n.e(2579)]).then(n.bind(n,32579))),S=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3806),n.e(4386)]).then(n.bind(n,94386))),E=t.lazy(()=>n.e(7313).then(n.bind(n,7313))),P=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6820),n.e(3654),n.e(8111)]).then(n.bind(n,68111))),I=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(2179)]).then(n.bind(n,52179))),D=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1397),n.e(2296)]).then(n.bind(n,2296))),k=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1397),n.e(7020)]).then(n.bind(n,27020))),B=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1397),n.e(4693)]).then(n.bind(n,14693))),O=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1754)]).then(n.bind(n,61754))),T=t.lazy(()=>n.e(9184).then(n.bind(n,29184))),M=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(8645),n.e(615)]).then(n.bind(n,20615))),R=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(8645),n.e(76)]).then(n.bind(n,76))),L=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(899),n.e(5277),n.e(247),n.e(7304),n.e(5270)]).then(n.bind(n,45270))),F=t.lazy(()=>n.e(9376).then(n.bind(n,19376))),U=t.lazy(()=>n.e(6085).then(n.bind(n,36085))),Q=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(1249)]).then(n.bind(n,31249))),K=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4697)]).then(n.bind(n,24697))),_=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(2571)]).then(n.bind(n,42571))),H=t.lazy(()=>n.e(9473).then(n.bind(n,49473))),V=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(4881)]).then(n.bind(n,84881))),W=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(4301)]).then(n.bind(n,24301))),Y=t.lazy(()=>Promise.all([n.e(7187),n.e(6385),n.e(2319)]).then(n.bind(n,32319))),q=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(8396)]).then(n.bind(n,8396))),G=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(8199)]).then(n.bind(n,28199))),X=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(2748)]).then(n.bind(n,22748))),Z=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(3632)]).then(n.bind(n,3632))),J=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(7307)]).then(n.bind(n,87307))),$=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3722),n.e(6002),n.e(2257)]).then(n.bind(n,32257))),ee=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6820),n.e(4549)]).then(n.bind(n,14549))),ae=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6820),n.e(5185)]).then(n.bind(n,35185))),ne=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4753),n.e(1613)]).then(n.bind(n,36633))),te=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4753),n.e(5354)]).then(n.bind(n,46822))),se=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(1404)]).then(n.bind(n,61404))),ie=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3722),n.e(6008),n.e(6002),n.e(4381)]).then(n.bind(n,34381))),le=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3722),n.e(6008),n.e(6002),n.e(4497)]).then(n.bind(n,54497))),oe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7939)]).then(n.bind(n,50320))),re=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(2985)]).then(n.bind(n,22985))),ce=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4753),n.e(6601)]).then(n.bind(n,38085))),de=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4753),n.e(1734),n.e(3158)]).then(n.bind(n,53158))),me=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(8406)]).then(n.bind(n,48406))),he=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(320)]).then(n.bind(n,30320))),ue=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(1244),n.e(2816)]).then(n.bind(n,82816))),pe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(1244),n.e(1621)]).then(n.bind(n,81621))),ge=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(5384)]).then(n.bind(n,5384))),Ae=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(1209)]).then(n.bind(n,61209))),ve=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(5277),n.e(3722),n.e(6008),n.e(4169),n.e(3368),n.e(5097),n.e(8614)]).then(n.bind(n,88614))),fe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(899),n.e(5277),n.e(3722),n.e(6008),n.e(4169),n.e(3368),n.e(4620)]).then(n.bind(n,24620))),be=t.lazy(()=>n.e(4946).then(n.bind(n,94946))),ye=t.lazy(()=>n.e(351).then(n.bind(n,80351))),xe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3975)]).then(n.bind(n,13975))),Ne=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(9077),n.e(5997)]).then(n.bind(n,3128))),je=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(9077),n.e(4988)]).then(n.bind(n,52459))),Ce=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(9466)]).then(n.bind(n,49466))),we=t.lazy(()=>n.e(5002).then(n.bind(n,85002))),ze=t.lazy(()=>n.e(8723).then(n.bind(n,78723))),Se=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(1783)]).then(n.bind(n,61783))),Ee=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(247),n.e(1111)]).then(n.bind(n,11347))),Pe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(2474)]).then(n.bind(n,32474))),Ie=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(899),n.e(5277),n.e(247),n.e(7304),n.e(9263)]).then(n.bind(n,39263))),De=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1108)]).then(n.bind(n,81108))),ke=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6379),n.e(9077),n.e(6990)]).then(n.bind(n,36990))),Be=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(8772)]).then(n.bind(n,38772))),Oe=t.lazy(()=>n.e(9316).then(n.bind(n,89316))),Te=t.lazy(()=>n.e(875).then(n.bind(n,20875))),Me=t.lazy(()=>n.e(1559).then(n.bind(n,11559))),Re=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(9079)]).then(n.bind(n,69079))),Le=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(6385),n.e(4753),n.e(6847)]).then(n.bind(n,6847))),Fe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6507),n.e(2326)]).then(n.bind(n,32326))),Ue=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6507),n.e(1651)]).then(n.bind(n,81651))),Qe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(7614),n.e(6385),n.e(9567),n.e(5277),n.e(924)]).then(n.bind(n,10924))),Ke=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7614),n.e(899),n.e(6173),n.e(4887)]).then(n.bind(n,14887))),_e=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(5975)]).then(n.bind(n,85975))),He=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(899),n.e(5277),n.e(6379),n.e(5871),n.e(8765)]).then(n.bind(n,58765))),Ve=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(899),n.e(6379),n.e(5871),n.e(290)]).then(n.bind(n,40290))),We=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(8447)]).then(n.bind(n,48447))),Ye=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6385),n.e(6379),n.e(5871),n.e(3055)]).then(n.bind(n,83055))),qe=t.lazy(()=>n.e(7945).then(n.bind(n,77945))),Ge=t.lazy(()=>n.e(8350).then(n.bind(n,78350))),Xe=t.lazy(()=>n.e(7009).then(n.bind(n,67009))),Ze=t.lazy(()=>n.e(9879).then(n.bind(n,19879)));var Je=[{path:"/dashboard",name:"Dashboard",element:u,navName:""},{path:"/tickets",name:"Support Tickets",element:h,navName:"Support"},{path:"/change_password",name:"Change Password",element:m,navName:""},{path:"/profile/edit",name:"Edit Profile",element:p,navName:""},{path:"/products",name:"products",element:w,navName:"Product Management"},{path:"/product/add",name:"Add products",element:z,navName:"Product Management"},{path:"/product/add/multiple",name:"Add products",element:we,navName:"Product Management"},{path:"/product/edit/:id",name:"Edit products",element:S,navName:"Product Management"},{path:"/product/view/:id",name:"view products",element:E,navName:"Product Management"},{path:"/categories",name:"Categories",element:V,navName:"Product Management"},{path:"/brands",name:"Brands",element:W,navName:"Product Management"},{path:"/product-manual",name:"Product Manual",element:P,navName:"Product Management"},{path:"/product-manual/view/:id",name:"Product Manual",element:Se,navName:"Product Management"},{path:"/task/today",name:"Today's Tasks",element:Be,navName:"Tasks"},{path:"/reports/opening-inventory",name:"Reports Opening Inventory",element:Te,navName:"Reports"},{path:"/reports/stock",name:"Reports Stock",element:Me,navName:"Reports"},{path:"/franchisee",name:"PrincipalDistributor",element:Ae,navName:"PrincipalDistributor"},{path:"/franchisee/:_id",name:"PrincipalDistributor",element:ve,navName:"PrincipalDistributor"},{path:"/add-principal-distributor",name:"PrincipalDistributor",element:fe,navName:"PrincipalDistributor"},{path:"/add-principal-distributor/multiple",name:"PrincipalDistributor",element:ze,navName:"PrincipalDistributor"},{path:"/view/mappedretaildistributor/:id",name:"view retail distributor",element:Ee,navName:"PrincipalDistributor"},{path:"/menu",name:"Menu",element:Le,navName:"Menu"},{path:"/add-menu",name:"Menu",element:Fe,navName:"Menu"},{path:"/edit-item/:id",name:"Menu",element:Ue,navName:"Menu"},{path:"/menu-categories",name:"Categories",element:_e,navName:"Menu"},{path:"/order-history",name:"Order history",element:Qe,navName:"Order history"},{path:"/order-history/:id",name:"Order history",element:Ke,navName:"Order history"},{path:"/videos",name:"videos",element:He,navName:"Videos"},{path:"/users-address/view",name:"Customers",element:$},{path:"/franchisee/products/:id",name:"Outlet Products",element:Ve},{path:"/campaigns/audio",name:"Audio Campaigns",element:d,navName:"Campaigns"},{path:"/registerImage",name:"RegisterImage",element:ee,navName:"Website Related"},{path:"/loginImage",name:"LoginImage",element:ae,navName:"Website Related"},{path:"/testimonials",name:"Testimonials",element:K,navName:"Website Related"},{path:"/currency",name:"Currency",element:Ce,navName:"Settings"},{path:"/testimonial/new",name:"AddTestimonial",element:_,navName:"Website Related"},{path:"/testimonial/view/:id",name:"ViewTestimonial",element:H,navName:"Website Related"},{path:"/testimonial/edit/:id",name:"EditTestimonial",element:me,navName:"Website Related"},{path:"/seo/request/new",name:"seo Request",element:Q,navName:"Website Related"},{path:"/content",name:"Website Related",element:Y,navName:"Website Related"},{path:"/content/terms-and-conditions",name:"Website Related",element:G,navName:"Website Related"},{path:"/content/privacy-policy",name:"Website Related",element:q,navName:"Website Related"},{path:"/content/shipping-policy",name:"Website Related",element:X,navName:"Website Related"},{path:"/content/refund-policy",name:"Website Related",element:Z,navName:"Website Related"},{path:"/content/about-us",name:"Website Related",element:J,navName:"Website Related"},{path:"/orders/new",name:"New Orders",element:I,navName:"Orders"},{path:"/order/add",name:"add Order",element:M,navName:"Orders"},{path:"/orders/edit/:id",name:"Edit Order",element:R,navName:"Orders"},{path:"/orders/:status/:id",name:"View Order",element:L,navName:"Orders"},{path:"/orders/invoice/:status/:id",name:"View Invoice ",element:Ie,navName:"Orders"},{path:"/orders/processing",name:"Processing Orders",element:D,navName:"Orders"},{path:"/orders/dispatched",name:"Dispatched Orders",element:k,navName:"Orders"},{path:"/orders/delivered",name:"Delivered Orders",element:B,navName:"Orders"},{path:"/orders/pending",name:"Pending Orders",element:Pe,navName:"Orders"},{path:"/orders/cancelled",name:"Cancelled Orders",element:O,navName:"Orders"},{path:"/orders/returned",name:"Returned Orders",element:T,navName:"Orders"},{path:"/inStoreCashOrders/new",name:"In Store Cash Orders",element:be,navName:"Orders"},{path:"/InStoreQRCodeOrders/new",name:"In Store QR Code Orders",element:ye,navName:"Orders"},{path:"/announcement",name:"Announcment",element:De,navName:"Announcment"},{path:"/announcement/create",name:"Announcment",element:ke,navName:"Announcment"},{path:"/socialmedia",name:"Social Media",element:g,navName:"Configuration"},{path:"/application/name",name:"ApplicationName",element:F,navName:"Configuration"},{path:"/copyright/message",name:"Copyright Message",element:U,navName:"Configuration"},{path:"/address",name:"Address",element:A,navName:"Configuration"},{path:"/logo",name:"Logo",element:v,navName:"Configuration"},{path:"/mobile-app",name:"MobileApp",element:Oe,navName:"Configuration"},{path:"/affiliate/coupons",name:"Coupon",element:ne,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates",name:"Affiliate",element:te,navName:"Affiliate & Coupons"},{path:"/affiliate/coupons/create",name:"Create Coupon",element:se,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates/create",name:"Create Affiliate",element:ie,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates/edit/:id",name:"Edit Affiliate",element:le,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates/pay/:id",name:"Pay Affiliate",element:re,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates/history/:id",name:"Pay Affiliate",element:ce,navName:"Affiliate & Coupons"},{path:"/affiliate/coupons/edit/:id",name:"Edit Coupon",element:oe,navName:"Affiliate & Coupons"},{path:"/affiliate/coupons/history/:id",name:"Edit Coupon",element:de,navName:"Affiliate & Coupons"},{path:"/blogs",name:"Blogs",element:he,navName:"Blog"},{path:"/blogs/create",name:"Blogs",element:ue,navName:"Blog"},{path:"/blog/edit/:id",name:"Blogs",element:pe,navName:"Blog"},{path:"/blog/view/:id",name:"Blogs",element:ge,navName:"Blog"},{path:"/employee",name:"Employee",element:xe,navName:"Employees & Access"},{path:"/add-employee",name:"Employee",element:Ne,navName:"Employees & Access"},{path:"edit-employee/:id",name:"Employee",element:je,navName:"Employees & Access"},{path:"/templates",name:"Templates",element:f,navName:"Templates"},{path:"transporter",name:"Transporter",element:Re,navName:"Employees & Access"},{path:"/equipment",exact:!0,name:"Equipment",element:We},{path:"franchisee/equipment/:id",name:"Add Equipment",element:Ye,navName:"Employees & Access"},{path:"/branch",name:"Branch",element:qe,navName:"Branch"},{path:"/contactlists",name:"Contact Lists",element:t.lazy(()=>Promise.all([n.e(5271),n.e(6231)]).then(n.bind(n,66231))),navName:"Contact Lists"},{path:"/contacts",name:"Contacts",element:t.lazy(()=>n.e(2141).then(n.bind(n,62141))),navName:"Contacts"},{path:"/callogs",name:"Call Logs",element:Ge,navName:"Call Logs"},{path:"/calluses",name:"Call Uses",element:Xe,navName:"Call Logs"},{path:"/call-settings",name:"Call Settings",element:Ze,navName:"Settings"},{path:"/department",name:"Department",element:C,navName:"Department"},{path:"/users-teams",name:"Users & Teams",element:b,navName:"Users & Teams"},{path:"/virtual-numbers",name:"Virtual Numbers",element:y,navName:"Virtual Numbers"},{path:"/billing",name:"Billing",element:x,navName:"Billing"},{path:"/reports-analytics",name:"Reports & Analytics",element:N,navName:"Reports & Analytics"},{path:"/settings",name:"Settings",element:j,navName:"Settings"}];var $e=n(28429);class ea extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null,isChunkLoadError:!1}}static getDerivedStateFromError(e){const a=!!(e&&e.message&&-1!==e.message.indexOf("Loading chunk")||e&&"ChunkLoadError"===e.name);return{hasError:!0,error:e,isChunkLoadError:a}}componentDidCatch(e,a){console.error("ErrorBoundary caught an error:",e,a);try{if(this.state.isChunkLoadError){const e="chunkReload:".concat(window.location.pathname);if(!sessionStorage.getItem(e)){sessionStorage.setItem(e,Date.now());const a=window.location.search?"&":"?",n=window.location.pathname+window.location.search+a+"r="+Date.now();window.location.replace(n)}}}catch(n){console.warn("ErrorBoundary recovery failed",n)}}render(){return this.state.hasError?(0,c.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("h4",{children:"Something went wrong"}),(0,c.jsx)("p",{className:"text-muted",children:"Please refresh the page or try again later."}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Refresh Page"})]})}):this.props.children}}var aa=ea,na=n(11031);n(35887);const ta=()=>{const[e,a]=(0,t.useState)(null),[n,l]=(0,t.useState)(!0),o=(0,na.g)();(0,t.useEffect)(()=>{(async()=>{if(localStorage.getItem("authToken"))try{let e=await i.A.get("/api/v1/user/details",{headers:{Authorization:"Bearer ".concat(o)}});const n=null===e||void 0===e?void 0:e.data;null!==n&&void 0!==n&&n.success&&null!==n&&void 0!==n&&n.user?a(n.user):a({role:"business_admin",accessTo:{}})}catch(e){console.warn("User API failed, using default admin access:",e.message),a({role:"business_admin",accessTo:{}})}else a(null),l(!1);l(!1)})()},[]);const[r,d]=(0,t.useState)(Je);return n?(0,c.jsxs)(s.T5,{lg:!0,className:"text-center py-5",children:[(0,c.jsx)(s.JT,{color:"primary"}),(0,c.jsx)("div",{className:"mt-2",children:"Loading..."})]}):(0,c.jsx)(aa,{children:(0,c.jsx)(s.T5,{lg:!0,children:(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(s.JT,{color:"primary"}),children:(0,c.jsxs)($e.BV,{children:[r.map((a,n)=>{var t;return"business_admin"===(null===e||void 0===e?void 0:e.role)||!a.navName||""===(null===(t=a.navName)||void 0===t?void 0:t.trim())||(null===e||void 0===e?void 0:e.accessTo)&&!0===(null===e||void 0===e?void 0:e.accessTo[null===a||void 0===a?void 0:a.navName])?a.element&&(0,c.jsx)($e.qh,{path:a.path,exact:a.exact,name:a.name,element:(0,c.jsx)(a.element,{})},n):null}),(0,c.jsx)($e.qh,{path:"/",element:(0,c.jsx)($e.C5,{to:"dashboard",replace:!0})})]})})})})};var sa=t.memo(ta);const ia=()=>{const e=(0,na.g)(),[a,n]=(0,t.useState)("");return(0,t.useEffect)(()=>{!async function(){try{const a=await i.A.get("/api/config",{headers:{Authorization:"Bearer ".concat(e)}});a.data&&a.data.result&&Array.isArray(a.data.result)?a.data.result.map(e=>{n((null===e||void 0===e?void 0:e.copyrightMessage)||"ImpactVibes Cloud")}):n("ImpactVibes Cloud")}catch(a){console.warn("Config API failed, using default copyright:",a.message),n("ImpactVibes Cloud")}}()},[]),(0,c.jsx)(s.FO,{children:(0,c.jsx)("div",{children:(0,c.jsx)("span",{className:"ms-1"})})})};var la=t.memo(ia),oa=n(42074),ra=n(27081),ca=n(81949),da=n(10114),ma=n(82754),ha=n(27760),ua=n(3629),pa=n(6536),ga=n.n(pa);var Aa=()=>{const[e,a]=(0,t.useState)();let n=(0,$e.Zp)();return(0,t.useEffect)(()=>{(async()=>{let e=localStorage.getItem("authToken");try{let n=await i.A.get("/api/v1/user/details",{headers:{Authorization:"Bearer ".concat(e)}});!0===n.data.success&&a(n.data.user)}catch(n){console.log(n)}})()},[]),(0,c.jsxs)(s.ji,{variant:"nav-item",children:[(0,c.jsx)(s.VH,{placement:"bottom-end",className:"py-0",caret:!1,children:(0,c.jsx)(s.re,{src:"data:image/jpeg;base64,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",size:"md"})}),(0,c.jsxs)(s.QR,{className:"pt-0",placement:"bottom-end",children:[(0,c.jsx)(s.IE,{className:"bg-light fw-semibold py-2",children:"Account"}),(0,c.jsx)(s.kd,{href:"#"}),(0,c.jsxs)(s.kd,{href:"#",onClick:e=>{e.preventDefault(),n("/profile/edit")},children:[(0,c.jsx)(ca.Ay,{icon:ma.o,className:"me-2"}),"Edit Profile"]}),(0,c.jsxs)(s.kd,{href:"#",onClick:e=>{e.preventDefault(),n("/change_password")},children:[(0,c.jsx)(ca.Ay,{icon:ha.K,className:"me-2"}),"Change Password"]}),(0,c.jsxs)(s.kd,{href:"#",onClick:e=>{e.preventDefault(),(async()=>{localStorage.removeItem("authToken"),ga()("success!","Logged Out","success"),n("/")})()},children:[(0,c.jsx)(ca.Ay,{icon:ua.q,className:"me-2"}),"Log Out"]})]})]})};var va=function(){const[e,a]=(0,t.useState)(navigator.onLine),[n,i]=(0,t.useState)("good"),[l,o]=(0,t.useState)(!1),[r,d]=(0,t.useState)(null),[m,h]=(0,t.useState)("good");(0,t.useEffect)(()=>{const e=()=>{const e=navigator.onLine;a(e),e?(i("good"),setTimeout(()=>o(!1),3e3)):(o(!0),i("offline"))};window.addEventListener("online",e),window.addEventListener("offline",e);const n=()=>{try{const e=localStorage.getItem("lastAPICall");if(e){const a=Date.now()-parseInt(e);d(a),h(a>36e5?"stale":a>18e5?"warning":"good")}const a=JSON.parse(localStorage.getItem("globalErrors")||"[]");a.filter(e=>Date.now()-e.timestamp<3e5).length>3&&(i("poor"),o(!0))}catch(e){console.warn("Error monitoring session:",e)}},t=setInterval(n,3e4);return n(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e),clearInterval(t)}},[]);const u=()=>e?"poor"===n||"stale"===m?"warning":"success":"danger",p=()=>e?"poor"===n?"Poor Connection":"stale"===m?"Session Stale":"warning"===m?"Session Inactive":"Online":"Offline",g=()=>e?"poor"===n?"Connection quality is poor. Some features may be slower than usual.":"stale"===m?"Your session has been inactive for a while. Please refresh if you experience any issues.":null:"You are currently offline. The app will continue to work with cached data and sync when connection is restored.";return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"connection-status-badge me-3",children:(0,c.jsxs)(s.$X,{color:u(),shape:"rounded-pill",title:g()||"Connection is stable",children:[(0,c.jsx)("i",{className:"bi bi-".concat(e?"wifi":"wifi-off"," me-1")}),p()]})}),l&&g()&&(0,c.jsx)("div",{className:"position-fixed",style:{top:"20px",right:"20px",zIndex:9999},children:(0,c.jsxs)(s.kj,{color:u(),dismissible:!0,onClose:()=>o(!1),className:"d-flex align-items-center",style:{minWidth:"300px"},children:[(0,c.jsx)("i",{className:"bi bi-".concat(e?"exclamation-triangle":"wifi-off"," me-2")}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:p()}),(0,c.jsx)("div",{className:"small mt-1",children:g()})]})]})})]})};var fa=()=>{const e=(0,ra.wA)(),a=((0,$e.Zp)(),(0,ra.d4)(e=>e.coreUI.sidebarShow)),[n,l]=(0,t.useState)("Businesses"),[o,r]=(0,t.useState)(null),d=(0,na.g)();return(0,t.useEffect)(()=>{!async function(){await i.A.get("/api/config",{headers:{Authorization:"Bearer ".concat(d)}}),l("Businesses")}(),async function(){try{const e=await i.A.get("/api/v1/user/details",{headers:{Authorization:"Bearer ".concat(d)}});e.data&&e.data.user&&e.data.user._id&&r(e.data.user._id)}catch(e){console.warn("Failed to fetch user details:",e.message)}}()},[d]),(0,c.jsx)(s.vs,{position:"sticky",className:"mb-4",children:(0,c.jsxs)(s.T5,{fluid:!0,className:"d-flex align-items-center",children:[(0,c.jsx)(s.hf,{className:"ps-1 d-flex align-items-center",onClick:()=>e({type:"set",payload:{sidebarShow:!a}}),children:(0,c.jsx)(ca.Ay,{icon:da.o,size:"lg"})}),(0,c.jsx)(s.jn,{className:"mx-auto d-md-none",to:"/",children:(0,c.jsx)("h5",{className:"m-0",children:n})}),(0,c.jsx)(s.qY,{className:"d-none d-md-flex me-auto align-items-center",children:(0,c.jsx)(s.g9,{children:(0,c.jsx)(s.HQ,{to:"/dashboard",component:oa.k2,activeclassname:"active",children:(0,c.jsx)("h5",{className:"m-0",children:n})})})}),(0,c.jsxs)(s.qY,{className:"d-flex align-items-center",children:[(0,c.jsx)(va,{}),(0,c.jsx)(za,{})]}),(0,c.jsx)(s.qY,{className:"d-flex align-items-center ms-3",children:(0,c.jsx)(Aa,{})})]})})};const ba=e=>{let{items:a}=e;const n=(0,$e.zy)(),i=(e,a,n)=>(0,c.jsxs)(c.Fragment,{children:[a&&a,e&&e,n&&(0,c.jsx)(s.$X,{color:n.color,className:"ms-auto",children:n.text})]}),l=(e,a)=>{const{component:n,name:s,badge:l,icon:o,...r}=e,c=n;return(0,t.createElement)(c,{...r.to&&!r.items&&{component:oa.k2,activeclassname:"active"},key:"navitem-".concat(a),...r},i(s,o,l))},o=(e,a)=>{var t;const{component:s,name:r,icon:d,to:m,...h}=e,u=s;return(0,c.jsx)(u,{idx:String(a),toggler:i(r,d),visible:n.pathname.startsWith(m),...h,children:null===(t=e.items)||void 0===t?void 0:t.map((e,a)=>e.items?o(e,"".concat(a,"-").concat(e.name)):l(e,"".concat(a,"-").concat(e.name)))},"navgroup-".concat(a,"-").concat(r))};return(0,c.jsx)(t.Fragment,{children:a&&a.map((e,a)=>e.items?o(e,"main-".concat(a,"-").concat(e.name)):l(e,"main-".concat(a,"-").concat(e.name)))})};var ya=n(63344),xa=(n(36762),n(975));const Na=()=>{const e=(0,ra.wA)(),a=(0,ra.d4)(e=>e.sidebarUnfoldable),n=(0,ra.d4)(e=>e.coreUI.sidebarShow),[l,o]=(0,t.useState)(xa.A),[r,d]=(0,t.useState)(null),m=(0,na.g)();(0,t.useEffect)(()=>{(async()=>{if(localStorage.getItem("authToken"))try{const e=(await i.A.get("/api/v1/user/details",{headers:{Authorization:"Bearer ".concat(m)}})).data;e.success&&e.user&&e.user.role&&("business_admin"===e.user.role||"Employee"===e.user.role)?d(e.user):d(!1)}catch(e){d(!1),console.log(e)}else d(!1)})()},[]),(0,t.useEffect)(()=>{if(r&&r.accessTo){const e=xa.A.filter(e=>!!r.accessTo[e.name]);o(e)}else o(xa.A)},[r]);const[h,u]=(0,t.useState)(!1),[p,g]=(0,t.useState)("ImpactVibes"),[A,v]=(0,t.useState)(""),[f,b]=(0,t.useState)(""),[y,x]=(0,t.useState)("");return(0,t.useEffect)(()=>{!async function(){try{const e=await i.A.get("/api/config",{headers:{Authorization:"Bearer ".concat(m)}});g("ImpactVibes"),e.data&&e.data.result&&Array.isArray(e.data.result)&&e.data.result.map(e=>{null!==e&&void 0!==e&&e.logo&&e.logo[0]&&(v(e.logo[0].Headerlogo||""),b(e.logo[0].Footerlogo||""),x(e.logo[0].Adminlogo||""))})}catch(e){console.warn("Config API failed, using defaults:",e.message),g("ImpactVibes"),v(""),b(""),x("")}}()},[]),(0,c.jsxs)(s._z,{position:"fixed",unfoldable:a,visible:n,onVisibleChange:a=>{e({type:"set",payload:{sidebarShow:a}})},children:[(0,c.jsx)(s.lD,{className:"d-none d-md-flex",style:{background:"rgb(140, 213, 213)",height:"56px",position:"relative",overflow:"visible",display:"flex",alignItems:"center",justifyContent:"center",padding:0},to:"/",children:(0,c.jsxs)(oa.N_,{to:"/dashboard",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",position:"relative",padding:"8px 12px"},children:["undefined"!==typeof document&&document&&!document.__sidebar_dark_checked&&(document.__sidebar_dark_checked=!0),(0,c.jsxs)("div",{className:"d-flex align-items-center",style:{gap:10,justifyContent:"flex-start"},children:[(0,c.jsx)("img",{src:y?"".concat(y):"/Logos/sidebarlogo.ico",alt:"Just Connect",style:{width:44,height:44,objectFit:"contain"}}),(0,c.jsxs)("div",{style:{lineHeight:1,textAlign:"left"},children:[(0,c.jsxs)("div",{style:{fontSize:"1.15rem",fontWeight:650},children:[(0,c.jsx)("span",{style:{color:"#0760c7ff"},children:"just"}),(0,c.jsx)("span",{style:{marginLeft:6,color:"#f97316"},children:"Connect"})]}),(0,c.jsx)("div",{style:{fontSize:"9px",color:"undefined"!==typeof document&&document.body&&document.body.classList&&document.body.classList.contains("c-dark-theme")?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)",marginTop:6},children:"Enterprise Conversations Simplified"})]})]})]})}),(0,c.jsx)(s.Ti,{children:(0,c.jsx)(ya.A,{children:(0,c.jsx)(ba,{items:l})})}),(0,c.jsx)(s.yk,{className:"d-none d-lg-flex",onClick:()=>e({type:"set",sidebarUnfoldable:!a})})]})};var ja=t.memo(Na);var Ca=e=>{let{message:a="System maintenance is scheduled. Some features may be temporarily unavailable.",title:n,scheduledAt:i,resolvedAt:l,severity:o="warning",showCountdown:r=!0,dismissible:d=!0,onClose:m}=e;const[h,u]=(0,t.useState)(!0),[p,g]=(0,t.useState)("");(0,t.useEffect)(()=>{if(!r||!i)return;const e=()=>{const e=(new Date).getTime(),a=new Date(i).getTime(),n=l?new Date(l).getTime():a+864e5;if(e<a){g("Maintenance starts in ".concat(A(a-e)))}else{if(!(e>=a&&e<=n))return u(!1),m&&m(),!1;g(l?"Maintenance ends in ".concat(A(n-e)):"Maintenance in progress")}return!0};if(!e())return;const a=setInterval(()=>{e()||clearInterval(a)},1e3);return()=>clearInterval(a)},[i,l,r,m]);const A=e=>{const a=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),t=Math.floor(e%6e4/1e3);return"".concat(a,"h ").concat(n,"m ").concat(t,"s")};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"maintenance-alert-backdrop ".concat(h?"visible":"")}),(0,c.jsxs)(s.zS,{visible:h,backdrop:"static",keyboard:!1,alignment:"center",className:"maintenance-alert-modal",children:[(0,c.jsx)(s.E4,{closeButton:!1,children:(0,c.jsxs)("div",{className:"maintenance-alert__header",children:[(0,c.jsx)("div",{className:"maintenance-alert__icon",children:(0,c.jsx)(s.JT,{size:"sm",variant:"grow"})}),(0,c.jsx)("div",{className:"maintenance-alert__title",children:n||"System Maintenance"})]})}),(0,c.jsx)(s.Tc,{children:(0,c.jsxs)("div",{className:"maintenance-alert__content",children:[(0,c.jsx)("div",{className:"maintenance-alert__message",children:a}),r&&p&&(0,c.jsx)("div",{className:"maintenance-alert__countdown",children:p}),i&&(0,c.jsxs)("div",{className:"maintenance-alert__schedule",children:[(0,c.jsxs)("div",{className:"schedule-item",children:[(0,c.jsx)("span",{className:"label",children:"Scheduled Start:"}),(0,c.jsx)("span",{className:"value",children:new Date(i).toLocaleString()})]}),l&&(0,c.jsxs)("div",{className:"schedule-item",children:[(0,c.jsx)("span",{className:"label",children:"Expected Resolution:"}),(0,c.jsx)("span",{className:"value",children:new Date(l).toLocaleString()})]})]})]})}),(0,c.jsx)(s.If,{className:"maintenance-alert__footer",children:(0,c.jsx)("div",{className:"maintenance-status",children:"System is currently under maintenance. Please wait..."})})]})]})},wa=n(82200);var za=function(){const{userStatus:e,userData:a,updateStatus:n,loading:t,STATUS_OPTIONS:i,STATUS_COLORS:l}=(0,wa.I)(),o=e=>{n(e)},r=e=>{switch(e){case i.ONLINE:return"Online";case i.OFFLINE:return"Offline";case i.LUNCH:return"Lunch";case i.BREAK:return"Break";default:return"Unknown"}};return(0,c.jsxs)(s.ji,{variant:"nav-item",children:[(0,c.jsx)(s.VH,{caret:!1,placement:"bottom-end",className:"py-0",style:{cursor:"pointer"},children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[t?(0,c.jsx)(s.JT,{size:"sm",color:"primary",className:"me-2",style:{width:"10px",height:"10px"}}):(0,c.jsx)(s.$X,{color:l[e],shape:"rounded-pill",className:"me-2",style:{width:"10px",height:"10px",display:"inline-block"}}),(0,c.jsx)("span",{children:a?(0,c.jsxs)("small",{className:"d-flex flex-column",children:[(0,c.jsx)("span",{children:a.name}),(0,c.jsx)("span",{className:"text-muted",children:r(e)})]}):r(e)})]})}),(0,c.jsxs)(s.QR,{children:[a&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(s.kd,{disabled:!0,className:"pb-2",children:[(0,c.jsx)("div",{children:(0,c.jsx)("strong",{children:a.name})}),(0,c.jsxs)("small",{className:"text-muted",children:["Last seen: ",new Date(a.lastSeen).toLocaleString()]})]}),(0,c.jsx)(s.kd,{divider:"true"})]}),(0,c.jsxs)(s.kd,{onClick:()=>o(i.ONLINE),active:e===i.ONLINE,disabled:t,children:[(0,c.jsx)(s.$X,{color:l[i.ONLINE],shape:"rounded-pill",className:"me-2"}),"Online"]}),(0,c.jsxs)(s.kd,{onClick:()=>o(i.OFFLINE),active:e===i.OFFLINE,disabled:t,children:[(0,c.jsx)(s.$X,{color:l[i.OFFLINE],shape:"rounded-pill",className:"me-2"}),"Offline"]}),(0,c.jsxs)(s.kd,{onClick:()=>o(i.LUNCH),active:e===i.LUNCH,disabled:t,children:[(0,c.jsx)(s.$X,{color:l[i.LUNCH],shape:"rounded-pill",className:"me-2"}),"Lunch"]}),(0,c.jsxs)(s.kd,{onClick:()=>o(i.BREAK),active:e===i.BREAK,disabled:t,children:[(0,c.jsx)(s.$X,{color:l[i.BREAK],shape:"rounded-pill",className:"me-2"}),"Break"]})]})]})};const Sa={active:!1,message:"System maintenance is scheduled",title:"",scheduledAt:null,resolvedAt:null,severity:"warning"},Ea=async()=>{try{const e=await(0,r.H2)(r.Hr.MAINTENANCE,"GET");if(e.success&&e.maintenances&&e.maintenances.length>0){const a=e.maintenances.filter(e=>"scheduled"===e.status&&e.targetPlatforms.includes("business")&&!e.resolvedAt);a.sort((e,a)=>new Date(a.scheduledAt)-new Date(e.scheduledAt));const n=a[0];if(n){console.log("Found current maintenance:",n);const e={active:"scheduled"===n.status,title:n.title,message:n.description,scheduledAt:n.scheduledAt,resolvedAt:n.resolvedAt,severity:"warning",id:n._id};return console.log("Transformed config:",e),e}}return Sa}catch(e){return console.error("Error fetching maintenance status:",e),Sa}},Pa=e=>{if(console.log("Checking maintenance window for config:",e),!e)return console.log("No config provided"),!1;if(!e.active)return console.log("Maintenance not active"),!1;const a=(new Date).getTime();if(console.log("Current time:",new Date(a).toISOString()),!e.scheduledAt)return console.log("No scheduled time, considering active since status is scheduled"),!0;const n=new Date(e.scheduledAt).getTime();if(console.log("Scheduled time:",new Date(n).toISOString()),!e.resolvedAt){const e=a>=n-3e5;return console.log("No resolved time, showing based on schedule. Is active:",e),e}const t=new Date(e.resolvedAt).getTime();console.log("Resolved time:",new Date(t).toISOString());const s=a>=n-3e5&&a<=t;return console.log("Checking against schedule and resolution. Is active:",s),s};var Ia=()=>{const[e,a]=(0,t.useState)({active:!1,title:"",message:"",scheduledAt:null,resolvedAt:null,severity:"warning"}),[n,s]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{const e=async()=>{try{const e=await Ea();console.log("Maintenance config:",e),a(e);const n=e.active&&Pa(e);console.log("Should show maintenance:",n),s(n)}catch(e){console.error("Error checking maintenance status:",e)}finally{l(!1)}};e();const n=setInterval(e,6e4);return()=>clearInterval(n)},[]),(0,c.jsxs)("div",{className:"main-layout",children:[(0,c.jsx)(ja,{}),(0,c.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,c.jsx)(fa,{}),i?(0,c.jsx)("div",{children:"Loading maintenance status..."}):n?(0,c.jsx)(Ca,{title:e.title,message:e.message,scheduledAt:e.scheduledAt,resolvedAt:e.resolvedAt,severity:e.severity,showCountdown:!0,dismissible:!0,onClose:()=>s(!1)}):null,(0,c.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,c.jsx)(sa,{})}),(0,c.jsx)(la,{})]})]})}}}]);