"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1108],{81108:function(e,n,t){t.r(n);var s=t(9950),r=t(82053),a=t(10226),c=t(1320),o=t(2235),i=t(15769),l=t(69780),d=t(9213),h=t(21671),A=t(34075),u=t(14712),x=t(9567),j=t(26910),g=t(78317),m=t(28429),p=t(11031),f=t(44414);n.default=()=>{const[e,n]=(0,s.useState)([]),[t,_]=(0,s.useState)(!0),[w,P]=(0,s.useState)(0),[S,y]=(0,s.useState)(5),[b,v]=(0,s.useState)(0),k=(0,p.g)();(0,s.useEffect)(()=>{(async(e,t)=>{_(!0);try{const s=await j.A.get("/api/announcement/get",{params:{page:e+1,rowsPerPage:t},headers:{Authorization:"Bearer ".concat(k)}});console.log(s);const{announcements:r,totalAnnouncements:a}=s.data;n(r),v(a)}catch(s){console.error("Error fetching announcements",s)}finally{_(!1)}})(w,S)},[w,S]);const C=e=>{const n=new Date(e);let t=n.getHours(),s=n.getMinutes();const r=t>=12?"PM":"AM";return t=t%12||12,s=s<10?"0"+s:s,"".concat(t,":").concat(s," ").concat(r)},D=(0,m.Zp)();return(0,f.jsxs)(g.A,{children:[(0,f.jsxs)(g.A,{display:"flex",mb:2,children:[(0,f.jsx)(r.A,{flex:1,textAlign:"center",fontWeight:"bold",variant:"h4",children:"Announcements"}),(0,f.jsxs)(a.A,{variant:"contained",onClick:()=>D("/announcement/create"),sx:{textTransform:"none"},children:["Add New"," "]})]}),(0,f.jsxs)(c.A,{component:o.A,children:[(0,f.jsxs)(i.A,{children:[(0,f.jsx)(l.A,{sx:{fontWeight:"bold"},children:(0,f.jsxs)(d.A,{children:[(0,f.jsx)(h.A,{children:"ID"}),(0,f.jsx)(h.A,{children:"Time"}),(0,f.jsx)(h.A,{children:"Sent to"}),(0,f.jsx)(h.A,{children:"Message"})]})}),(0,f.jsx)(A.A,{children:t?Array.from(new Array(S)).map((e,n)=>(0,f.jsx)(d.A,{children:(0,f.jsx)(h.A,{colSpan:5,children:(0,f.jsx)(u.A,{height:40})})},n)):e.length>0?e.map(e=>(0,f.jsxs)(d.A,{children:[(0,f.jsx)(h.A,{children:e.uniqueId}),(0,f.jsxs)(h.A,{children:[new Date(e.createdAt).toDateString(),(0,f.jsxs)("span",{children:[", ",C(e.createdAt)]})]}),(0,f.jsx)(h.A,{children:e.sentTo.join(", ")}),(0,f.jsx)(h.A,{children:e.message})]},e._id)):(0,f.jsx)(d.A,{children:(0,f.jsx)(h.A,{colSpan:5,align:"center",children:(0,f.jsx)(r.A,{variant:"body1",children:"Data not found"})})})})]}),(0,f.jsx)(x.A,{rowsPerPageOptions:[5,10,25],component:"div",count:b,rowsPerPage:S,page:w,onPageChange:(e,n)=>{P(n)},onRowsPerPageChange:e=>{y(parseInt(e.target.value,10)),P(0)}})]})]})}}}]);