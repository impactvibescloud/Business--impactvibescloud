"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2326],{32326:function(e,t,a){a.r(t);var i=a(9950),r=a(78317),l=a(48089),n=a(82053),s=a(29925),c=a(25979),d=a(3788),o=a(27138),u=a(11088),p=a(25333),h=a(41413),m=a(10226),f=a(28429),g=a(26910),x=a(33742),y=a(11031),b=a(4695),v=a.n(b),A=a(44414);t.default=()=>{const[e,t]=(0,i.useState)(""),[a,b]=(0,i.useState)(""),[j,_]=(0,i.useState)(""),[C,S]=(0,i.useState)(null),[w,T]=(0,i.useState)([]),[q,I]=(0,i.useState)(""),[W,k]=(0,i.useState)(!1),[N,D]=(0,i.useState)(null),[F,R]=(0,i.useState)(""),[z,B]=(0,i.useState)(""),E=(0,f.Zp)(),L=(0,y.g)();(0,i.useEffect)(()=>{(async()=>{try{const t=await g.A.get("/api/menu-category/getCategories",{headers:{Authorization:"Bearer ".concat(L)}});var e;if(200===t.status)T(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.categories);else v().fire({title:"Failed to fetch categories",icon:"error"})}catch(t){v().fire({title:"Error fetching categories",text:t.message,icon:"error"})}})()},[L]);return(0,A.jsxs)(r.A,{p:2,component:l.A,children:[(0,A.jsx)(n.A,{variant:"h5",mb:2,children:"Add New Item"}),(0,A.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),k(!0);const i=new FormData;i.append("item",e),i.append("description",a),i.append("price",j),i.append("category",q),i.append("photo",C),i.append("time",F),i.append("machineType",z);try{const e=await g.A.post("/api/add-items",i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(L)}});console.log(e),v().fire({title:"Menu added successfully !",icon:"success"}),E("/menu")}catch(r){v().fire({title:"Something went wrong!",icon:"error"})}finally{k(!1)}},children:[(0,A.jsx)(s.A,{label:"Item Name",variant:"outlined",fullWidth:!0,required:!0,value:e,onChange:e=>t(e.target.value),sx:{mb:2}}),(0,A.jsx)(s.A,{label:"Item Description",variant:"outlined",fullWidth:!0,required:!0,value:a,onChange:e=>b(e.target.value),sx:{mb:2}}),(0,A.jsx)(s.A,{label:"Price",variant:"outlined",required:!0,fullWidth:!0,type:"number",value:j,onChange:e=>_(e.target.value),sx:{mb:2}}),(0,A.jsx)(s.A,{label:"Time (in mins)",variant:"outlined",required:!0,fullWidth:!0,type:"number",value:F,onChange:e=>R(e.target.value),sx:{mb:2}}),(0,A.jsxs)(c.A,{fullWidth:!0,sx:{mb:2},children:[(0,A.jsx)(d.A,{id:"machine-type-select-label",children:"Type of Machine"}),(0,A.jsxs)(o.A,{labelId:"machine-type-select-label",value:z,onChange:e=>B(e.target.value),required:!0,children:[(0,A.jsx)(u.A,{value:"Type1",children:"Type1"}),(0,A.jsx)(u.A,{value:"Type2",children:"Type2"}),(0,A.jsx)(u.A,{value:"Type3",children:"Type3"})]})]}),(0,A.jsxs)(c.A,{fullWidth:!0,sx:{mb:2},children:[(0,A.jsx)(d.A,{id:"category-select-label",children:"Category"}),(0,A.jsx)(o.A,{labelId:"category-select-label",value:q,onChange:e=>I(e.target.value),required:!0,children:w.map(e=>(0,A.jsx)(u.A,{value:e._id,children:e.categoryName},e._id))})]}),(0,A.jsxs)(r.A,{display:"flex",alignItems:"center",mb:2,children:[(0,A.jsx)("input",{type:"file",accept:"image/*",required:!0,id:"file-input",style:{display:"none"},onChange:e=>{const t=e.target.files[0];if(S(t),t){const e=URL.createObjectURL(t);D(e)}}}),(0,A.jsx)("label",{htmlFor:"file-input",children:(0,A.jsx)(p.A,{color:"primary",component:"span",sx:{border:"1px solid",borderRadius:"8px",p:5,background:"#f4f5f5"},children:(0,A.jsx)(x.A,{})})}),N?(0,A.jsx)(h.A,{src:N,alt:"Preview",sx:{width:56,height:56,ml:2}}):(0,A.jsx)(n.A,{variant:"body1",ml:2,children:"No file selected"})]}),(0,A.jsx)(m.A,{disabled:W,variant:"contained",color:"primary",type:"submit",children:W?"Adding...":"Add Item"})]})]})}}}]);