"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8723],{78723:function(e,l,i){i.r(l);var r=i(9950),d=i(26910),s=i(6536),t=i.n(s),n=i(11031),a=i(28429),o=i(35887),c=i(44414);l.default=()=>{const[e,l]=(0,r.useState)(null),[i,s]=(0,r.useState)(!1),[h,u]=(0,r.useState)([]),[x,p]=(0,r.useState)([]),[v,j]=(0,r.useState)([]),m=(0,a.Zp)(),b=(0,n.g)();return(0,c.jsxs)("div",{className:"container mt-4",children:[(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsx)("button",{onClick:()=>m("/principal-distributor"),className:"btn btn-secondary",children:"Back"})}),(0,c.jsx)("h5",{className:"mb-6 mt-4",children:"Add Multiple Principal Distributor"}),(0,c.jsxs)("div",{className:"my-3",children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-lg-9",children:(0,c.jsx)("input",{type:"file",name:"file",className:"form-control",accept:".xlsx",onChange:e=>{const i=e.target.files[0];i&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===i.type?l(i):(t()("Error","Please upload a valid Excel file","error"),l(null))}})}),(0,c.jsx)("div",{className:"col-lg-3",children:(0,c.jsx)("button",{className:"btn btn-primary",onClick:async i=>{if(i.preventDefault(),e){s(!0),u([]),p([]),j([]);try{var r,n,a;const i=new FormData;i.append("file",e);const{data:s}=await d.A.post("/api/v1/principaldistributor/upload",i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(b)}});null!==s&&void 0!==s&&s.errors&&(null===s||void 0===s||null===(r=s.errors)||void 0===r?void 0:r.length)>0&&u(s.errors),null!==s&&void 0!==s&&s.newlyCreated&&(null===s||void 0===s||null===(n=s.newlyCreated)||void 0===n?void 0:n.length)>0&&p(null===s||void 0===s?void 0:s.newlyCreated),null!==s&&void 0!==s&&s.updatedDistributors&&(null===s||void 0===s||null===(a=s.updatedDistributors)||void 0===a?void 0:a.length)>0&&j(null===s||void 0===s?void 0:s.updatedDistributors),null!==s&&void 0!==s&&s.errors&&(null===s||void 0===s?void 0:s.errors.length)>0?(u(null===s||void 0===s?void 0:s.errors),t()({title:"SpreadSheet Upload Successful",text:"A few Principal Distributor have errors. Please fix them and upload again.",icon:"warning",button:"OK"})):(null===s||void 0===s?void 0:s.newlyCreated.length)>0||(null===s||void 0===s?void 0:s.updatedDistributors.length)>0?t()({title:"SpreadSheet Upload Successful",text:"Principal Distributors and Addresses added successfully.",icon:"success",buttons:"OK"}):(o.oR.success("File processed successfully with no new entries."),m("/principal-distributor")),l(null),document.querySelector('input[type="file"]').value=""}catch(x){var c,h;console.error("Upload error:",x),t()("Error","Failed to upload Principal Distributor: ".concat((null===(c=x.response)||void 0===c||null===(h=c.data)||void 0===h?void 0:h.message)||"An unexpected error occurred"),"error")}finally{s(!1)}}else o.oR.error("Please select a file to upload")},disabled:i,children:i?"Uploading...":"Upload"})})]}),(0,c.jsx)("p",{className:"pt-1 pl-2 text-secondary",children:"Upload only .xlsx files*"})]}),h.length>0&&(0,c.jsxs)("div",{className:"my-4",children:[(0,c.jsx)("h6",{children:"Finding errors while adding the Principal Distributor."}),(0,c.jsxs)("table",{className:"table table-bordered",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Principal Distributor Name"}),(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Phone"}),(0,c.jsx)("th",{children:"PAN"}),(0,c.jsx)("th",{children:"GST"}),(0,c.jsx)("th",{children:"Message"})]})}),(0,c.jsx)("tbody",{children:h.map((e,l)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name||"N/A"}),(0,c.jsx)("td",{children:e.email||"N/A"}),(0,c.jsx)("td",{children:e.phone||"N/A"}),(0,c.jsx)("td",{children:e.panNumber||"N/A"}),(0,c.jsx)("td",{children:e.gstNumber||"N/A"}),(0,c.jsx)("td",{children:e.message})]},l))})]})]}),v.length>0&&(0,c.jsxs)("div",{className:"my-4",children:[(0,c.jsx)("h6",{children:"Updated Principal Distributors"}),(0,c.jsxs)("table",{className:"table table-bordered",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Principal Distributor Name"}),(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Phone"}),(0,c.jsx)("th",{children:"Message"})]})}),(0,c.jsx)("tbody",{children:v.map((e,l)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name||"N/A"}),(0,c.jsx)("td",{children:e.email||"N/A"}),(0,c.jsx)("td",{children:e.phone||"N/A"}),(0,c.jsx)("td",{children:e.updatedFields})]},l))})]})]}),x.length>0&&(0,c.jsxs)("div",{className:"my-4",children:[(0,c.jsx)("h6",{children:"Newly Created Principal Distributors:"}),(0,c.jsxs)("table",{className:"table table-bordered",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"uniqueId"}),(0,c.jsx)("th",{children:"Principal Distributor Name"}),(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Phone"}),(0,c.jsx)("th",{children:"PAN"}),(0,c.jsx)("th",{children:"GST"})]})}),(0,c.jsx)("tbody",{children:x.map((e,l)=>{var i,r,d,s,t,n;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(null===e||void 0===e||null===(i=e.distributor)||void 0===i?void 0:i.uniqueId)||"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e||null===(r=e.distributor)||void 0===r?void 0:r.name)||"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e||null===(d=e.distributor)||void 0===d?void 0:d.email)||"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e||null===(s=e.distributor)||void 0===s?void 0:s.phone)||"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e||null===(t=e.address)||void 0===t?void 0:t.panNumber)||"N/A"}),(0,c.jsx)("td",{children:(null===e||void 0===e||null===(n=e.address)||void 0===n?void 0:n.gstNumber)||"N/A"})]},l)})})]})]})]})}}}]);