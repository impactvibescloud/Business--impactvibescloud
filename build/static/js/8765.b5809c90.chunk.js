"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8765],{10939:function(e,t,r){var n=r(24994);t.A=void 0;var o=n(r(79526)),i=r(44414);t.A=(0,o.default)((0,i.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload")},17034:function(e,t,r){r.r(t),r.d(t,{capitalize:function(){return o.A},createChainedFunction:function(){return i},createSvgIcon:function(){return a.A},debounce:function(){return l.A},deprecatedPropType:function(){return s},isMuiElement:function(){return c.A},ownerDocument:function(){return d.A},ownerWindow:function(){return u.A},requirePropFactory:function(){return h},setRef:function(){return f},unstable_ClassNameGenerator:function(){return y},unstable_useEnhancedEffect:function(){return p.A},unstable_useId:function(){return v.A},unsupportedProp:function(){return g},useControlled:function(){return x.A},useEventCallback:function(){return m.A},useForkRef:function(){return A.A},useIsFocusVisible:function(){return b.A}});var n=r(44501),o=r(61676),i=r(85511).A,a=r(23235),l=r(21209);var s=function(e,t){return()=>null},c=r(3828),d=r(27402),u=r(70827);var h=function(e,t){return()=>null},f=r(75587).A,p=r(79044),v=r(31014);var g=function(e,t,r,n,o){return null},x=r(48733),m=r(1976),A=r(31506),b=r(32937);const y={configure:e=>{n.A.configure(e)}}},18575:function(e,t,r){var n=r(24994);t.A=void 0;var o=n(r(79526)),i=r(44414);t.A=(0,o.default)((0,i.jsx)("path",{d:"m18 4 2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4z"}),"Movie")},31014:function(e,t,r){var n=r(93539);t.A=n.A},32085:function(e,t,r){var n=r(24994);t.A=void 0;var o=n(r(79526)),i=r(44414);t.A=(0,o.default)((0,i.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8 12.5v-9l6 4.5z"}),"VideoLibrary")},41328:function(e,t,r){var n=r(24994);t.A=void 0;var o=n(r(79526)),i=r(44414);t.A=(0,o.default)((0,i.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")},48089:function(e,t,r){r.d(t,{A:function(){return x}});var n=r(58168),o=r(98587),i=r(9950),a=r(72004),l=r(88465),s=r(59254),c=r(4236),d=r(2235),u=r(1763),h=r(423);function f(e){return(0,h.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var p=r(44414);const v=["className","raised"],g=(0,s.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"}));var x=i.forwardRef(function(e,t){const r=(0,c.b)({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,d=(0,o.A)(r,v),u=(0,n.A)({},r,{raised:s}),h=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},f,t)})(u);return(0,p.jsx)(g,(0,n.A)({className:(0,a.A)(h.root,i),elevation:s?8:void 0,ref:t,ownerState:u},d))})},50704:function(e,t,r){r.d(t,{A:function(){return g}});var n=r(58168),o=r(98587),i=r(9950),a=r(72004),l=r(88465),s=r(59254),c=r(4236),d=r(1763),u=r(423);function h(e){return(0,u.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var f=r(44414);const p=["className","component"],v=(0,s.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));var g=i.forwardRef(function(e,t){const r=(0,c.b)({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,d=(0,o.A)(r,p),u=(0,n.A)({},r,{component:s}),g=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},h,t)})(u);return(0,f.jsx)(v,(0,n.A)({as:s,className:(0,a.A)(g.root,i),ownerState:u,ref:t},d))})},57988:function(e,t,r){var n=r(24994);t.A=void 0;var o=n(r(79526)),i=r(44414);t.A=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},58765:function(e,t,r){r.r(t);var n=r(9950),o=r(26910),i=r(48089),a=r(78317),l=r(62999),s=r(98785),c=r(65429),d=r(2235),u=r(82053),h=r(74745),f=r(60899),p=r(25277),v=r(29925),g=r(10226),x=r(46639),m=r(25333),A=r(50704),b=r(59254),y=r(57988),j=r(32085),w=r(10939),C=r(18575),S=r(41328),R=r(44414);const D=(0,b.Ay)(i.A)(e=>{let{theme:t}=e;return{height:"100%",display:"flex",flexDirection:"column",borderRadius:2*t.shape.borderRadius,overflow:"hidden",transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 20px rgba(0, 0, 0, 0.1)"}}}),_=(0,b.Ay)(a.A)(e=>{let{theme:t,isDragActive:r}=e;return{border:"2px dashed ".concat(r?t.palette.primary.main:t.palette.divider),borderRadius:t.shape.borderRadius,padding:t.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:r?"rgba(25, 118, 210, 0.04)":"transparent",transition:"all 0.2s ease-in-out",cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.02)"}}});t.default=()=>{const[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(""),[b,L]=(0,n.useState)(null),[k,z]=(0,n.useState)(""),[M,I]=(0,n.useState)(!1),[E,V]=(0,n.useState)(!1),[W,H]=(0,n.useState)({}),[T,N]=(0,n.useState)(null),[F,P]=(0,n.useState)(""),[U,B]=(0,n.useState)({}),O=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{try{const e=await o.A.get("/api/videos/get-all");t(e.data),e.data.forEach(e=>{(async(e,t)=>{if(!W[t])try{const r=document.createElement("video");r.src=e,r.currentTime=2,await new Promise(e=>{r.onloadeddata=e});const n=document.createElement("canvas");n.width=320,n.height=180,n.getContext("2d").drawImage(r,0,0,n.width,n.height);const o=n.toDataURL("image/jpeg");H(e=>({...e,[t]:o}))}catch(T){console.error("Error generating thumbnail for video ".concat(t,":"),T),H(e=>({...e,[t]:"https://via.placeholder.com/320x180?text=Error"}))}})(e.video.url,e._id)})}catch(T){console.error("Error fetching videos:",T),N("Failed to load videos")}})()},[]),(0,n.useEffect)(()=>()=>{k&&URL.revokeObjectURL(k)},[k]);const Y=()=>{P("")},G=()=>{N(null)};return(0,R.jsxs)(l.A,{maxWidth:"lg",sx:{py:6},children:[(0,R.jsx)(s.A,{open:!!F,autoHideDuration:4e3,onClose:Y,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,R.jsx)(c.A,{onClose:Y,severity:"success",sx:{width:"100%"},children:F})}),(0,R.jsx)(s.A,{open:!!T,autoHideDuration:6e3,onClose:G,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,R.jsx)(c.A,{onClose:G,severity:"error",sx:{width:"100%"},children:T})}),(0,R.jsxs)(d.A,{elevation:3,sx:{p:4,mb:6,borderRadius:3,background:"linear-gradient(to right, #ffffff, #f9f9f9)"},children:[(0,R.jsxs)(a.A,{display:"flex",alignItems:"center",mb:4,children:[(0,R.jsx)(j.A,{color:"primary",sx:{mr:2,fontSize:32}}),(0,R.jsx)(u.A,{variant:"h4",color:"primary",fontWeight:"500",children:"Video Library"})]}),(0,R.jsx)(h.A,{sx:{mb:4}}),(0,R.jsxs)(f.Ay,{container:!0,spacing:4,children:[(0,R.jsx)(f.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(_,{isDragActive:E,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),V(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),V(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),V(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0){const t=e.dataTransfer.files[0];if(t.type.startsWith("video/")&&(L(t),z(URL.createObjectURL(t)),!r)){const e=t.name.replace(/\.[^/.]+$/,"");i(e)}}},onClick:()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.click()},sx:{height:"100%",minHeight:k?"auto":250},children:[(0,R.jsx)("input",{type:"file",hidden:!0,ref:O,accept:"video/*",onChange:e=>{const t=e.target.files[0];if(!t)return;L(t);const n=URL.createObjectURL(t);if(z(n),!r){const e=t.name.replace(/\.[^/.]+$/,"");i(e)}}}),k?(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(a.A,{sx:{width:"100%",mb:2,position:"relative"},children:[(0,R.jsxs)("video",{width:"100%",height:"auto",controls:!0,style:{borderRadius:8,maxHeight:240},children:[(0,R.jsx)("source",{src:k}),"Your browser does not support the video tag."]}),(0,R.jsx)(p.A,{label:(null===b||void 0===b?void 0:b.name)||"Selected Video",sx:{mt:1},onDelete:()=>{L(null),z(""),O.current&&(O.current.value="")}})]})}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(w.A,{sx:{fontSize:60,color:"primary.main",mb:2}}),(0,R.jsx)(u.A,{variant:"h6",align:"center",children:"Drag and drop video here"}),(0,R.jsx)(u.A,{variant:"body2",color:"textSecondary",align:"center",sx:{mt:1},children:"or click to browse files"})]})]})}),(0,R.jsx)(f.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(a.A,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,R.jsx)(v.A,{fullWidth:!0,label:"Video Title",value:r,onChange:e=>i(e.target.value),variant:"outlined",margin:"normal",sx:{mb:3}}),(0,R.jsx)(g.A,{variant:"contained",color:"primary",size:"large",onClick:async()=>{if(!b||!r)return;I(!0);const e=new FormData;e.append("videoFile",b),e.append("name",r);try{const r=await o.A.post("/api/videos/add",e,{headers:{"Content-Type":"multipart/form-data"}});t(e=>[...e,r.data.video]),i(""),L(null),z(""),P("Video uploaded successfully!")}catch(T){console.error("Error uploading video:",T),N("Failed to upload video")}finally{I(!1)}},disabled:!b||!r||M,startIcon:M?(0,R.jsx)(x.A,{size:20,color:"inherit"}):(0,R.jsx)(C.A,{}),sx:{py:1.5,fontWeight:600,letterSpacing:.5,boxShadow:2},children:M?"Uploading...":"Upload Video"})]})})]})]}),(0,R.jsxs)(a.A,{mb:4,display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,R.jsx)(u.A,{variant:"h5",fontWeight:"500",children:"My Videos"}),(0,R.jsx)(p.A,{icon:(0,R.jsx)(j.A,{}),label:"".concat(e.length," videos"),color:"primary",variant:"outlined"})]}),e.length>0?(0,R.jsx)(f.Ay,{container:!0,spacing:3,children:e.map(e=>(0,R.jsx)(f.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,R.jsxs)(D,{children:[(0,R.jsxs)(a.A,{sx:{position:"relative",bgcolor:"#000",overflow:"hidden"},children:[(0,R.jsxs)("video",{width:"100%",height:"180",controls:!0,preload:"metadata",poster:W[e._id],children:[(0,R.jsx)("source",{src:e.video.url,type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,R.jsx)(a.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,background:"rgba(0,0,0,0.4)",transition:"opacity 0.2s ease","&:hover":{opacity:1}},children:(0,R.jsx)(m.A,{sx:{bgcolor:"rgba(255,255,255,0.9)","&:hover":{bgcolor:"white",transform:"scale(1.1)"}},children:(0,R.jsx)(S.A,{})})})]}),(0,R.jsxs)(A.A,{sx:{flexGrow:1},children:[(0,R.jsx)(u.A,{variant:"h6",fontWeight:"500",gutterBottom:!0,noWrap:!0,children:e.name}),(0,R.jsx)(u.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:new Date(e.createdAt||Date.now()).toLocaleDateString()}),(0,R.jsx)(a.A,{mt:2,display:"flex",justifyContent:"flex-end",children:(0,R.jsx)(m.A,{color:"error",onClick:()=>(async e=>{B(t=>({...t,[e]:!0}));try{await o.A.delete("/api/videos/delete/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}}),t(t=>t.filter(t=>t._id!==e)),H(t=>{const r={...t};return delete r[e],r}),P("Video deleted successfully!")}catch(T){console.error("Error deleting video:",T),N("Failed to delete video. Ensure you are authorized.")}finally{B(t=>{const r={...t};return delete r[e],r})}})(e._id),disabled:U[e._id],size:"small",sx:{"&:hover":{backgroundColor:"rgba(211, 47, 47, 0.04)"}},children:U[e._id]?(0,R.jsx)(x.A,{size:20,color:"error"}):(0,R.jsx)(y.A,{})})})]})]})},e._id))}):(0,R.jsxs)(a.A,{textAlign:"center",py:8,children:[(0,R.jsx)(C.A,{sx:{fontSize:60,color:"text.disabled",mb:2}}),(0,R.jsx)(u.A,{variant:"h6",color:"text.secondary",children:"No videos uploaded yet"}),(0,R.jsx)(u.A,{variant:"body2",color:"text.disabled",children:"Upload your first video to get started"})]})]})}},74745:function(e,t,r){var n=r(98587),o=r(58168),i=r(9950),a=r(72004),l=r(88465),s=r(9240),c=r(59254),d=r(4236),u=r(40777),h=r(44414);const f=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],p=(0,c.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})(e=>{let{theme:t,ownerState:r}=e;return(0,o.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},r.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},r.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,s.X4)(t.palette.divider,.08)},"inset"===r.variant&&{marginLeft:72},"middle"===r.variant&&"horizontal"===r.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===r.variant&&"vertical"===r.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===r.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},r.flexItem&&{alignSelf:"stretch",height:"auto"})},e=>{let{ownerState:t}=e;return(0,o.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})},e=>{let{theme:t,ownerState:r}=e;return(0,o.A)({},r.children&&"vertical"!==r.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}})},e=>{let{theme:t,ownerState:r}=e;return(0,o.A)({},r.children&&"vertical"===r.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}})},e=>{let{ownerState:t}=e;return(0,o.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})}),v=(0,c.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})(e=>{let{theme:t,ownerState:r}=e;return(0,o.A)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===r.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})}),g=i.forwardRef(function(e,t){const r=(0,d.b)({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:c,component:g=(s?"div":"hr"),flexItem:x=!1,light:m=!1,orientation:A="horizontal",role:b=("hr"!==g?"separator":void 0),textAlign:y="center",variant:j="fullWidth"}=r,w=(0,n.A)(r,f),C=(0,o.A)({},r,{absolute:i,component:g,flexItem:x,light:m,orientation:A,role:b,textAlign:y,variant:j}),S=(e=>{const{absolute:t,children:r,classes:n,flexItem:o,light:i,orientation:a,textAlign:s,variant:c}=e,d={root:["root",t&&"absolute",c,i&&"light","vertical"===a&&"vertical",o&&"flexItem",r&&"withChildren",r&&"vertical"===a&&"withChildrenVertical","right"===s&&"vertical"!==a&&"textAlignRight","left"===s&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]};return(0,l.A)(d,u.K,n)})(C);return(0,h.jsx)(p,(0,o.A)({as:g,className:(0,a.A)(S.root,c),role:b,ref:t,ownerState:C},w,{children:s?(0,h.jsx)(v,{className:S.wrapper,ownerState:C,children:s}):null}))});g.muiSkipListHighlight=!0,t.A=g},79526:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(17034)}}]);