"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1621],{37494:function(e,t,r){var a=r(24994);t.A=void 0;var n=a(r(79526)),o=r(44414);t.A=(0,n.default)((0,o.jsx)("path",{d:"M6 21h12V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"DeleteSharp")},81621:function(e,t,r){r.r(t),r.d(t,{default:function(){return W}});var a=r(9950),n=r(10226),o=r(28429),i=r(42074),l=r(6536),s=r.n(l),c=r(26910),d=r(11031),u=r(10939),h=r(37494),p=r(78317),m=r(29925),g=r(82108),y=r(47065),f=r(77212);function b(e,t,r){for(var a=e.text,n=e.characterMeta,o=t.length,i=r.length,l=[],s=n.slice(0,0),c=0,d=a.indexOf(t);-1!==d;)l.push(a.slice(c,d)+r),s=s.concat(n.slice(c,d),v(n.slice(d,d+1),i)),c=d+o,d=a.indexOf(t,c);return l.push(a.slice(c)),s=s.concat(n.slice(c)),{text:l.join(""),characterMeta:s}}function v(e,t){for(var r=e.slice(0,0);t-- >0;)r=r.concat(e);return r}var x=r(35542),E=r(40517);var k={a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1,acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1},j={area:1,base:1,br:1,col:1,colgroup:1,command:1,dl:1,embed:1,head:1,hgroup:1,hr:1,iframe:1,img:1,input:1,keygen:1,link:1,meta:1,ol:1,optgroup:1,option:1,param:1,script:1,select:1,source:1,style:1,table:1,tbody:1,textarea:1,tfoot:1,thead:1,title:1,tr:1,track:1,ul:1,wbr:1,basefont:1,dialog:1,dir:1,isindex:1},S={img:1};function w(e){return w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function N(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function O(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=/^data:/i,C=(0,x.OrderedSet)(),M=new y.ContentBlock({key:(0,y.genKey)(),text:"",type:E.ny.UNSTYLED,characterList:(0,x.List)(),depth:0}),L=/(\r\n|\r|\n)/g,D="\r",R=/^data-([a-z0-9-]+)$/,_={a:{href:"url",rel:"rel",target:"target",title:"title"},img:{src:"src",alt:"alt",width:"width",height:"height"}},F=function(e,t){var r={};if(_.hasOwnProperty(e))for(var a=_[e],n=0;n<t.attributes.length;n++){var o=t.attributes[n],i=o.name,l=o.value;if("string"===typeof l){var s=l;if(a.hasOwnProperty(i))r[a[i]]=s;else R.test(i)&&(r[i]=s)}}return r},I={a:function(e,t,r){var a,n=F(t,r);if(null!=(a=n.url)&&!a.match(A))return e.createEntity(E.zQ.LINK,n)},img:function(e,t,r){var a=F(t,r);if(null!=a.src)return e.createEntity(E.zQ.IMAGE,a)}},B=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"contentStateForEntities",void 0),T(this,"blockStack",void 0),T(this,"blockList",void 0),T(this,"depth",void 0),T(this,"options",void 0),T(this,"inlineCreators",{Style:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return{type:"STYLE",style:e}}),Entity:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MUTABLE";return{type:"ENTITY",entityKey:t.createEntity(e,P(r),a)}}}),this.options=r,this.contentStateForEntities=y.ContentState.createFromBlockArray([]),this.blockStack=[],this.blockList=[],this.depth=0}var t,r,a;return t=e,r=[{key:"process",value:function(e){this.processBlockElement(e);var t=[];return this.blockList.forEach(function(e){var r=function(e){var t="",r=(0,x.Seq)();return e.forEach(function(e){t+=e.text,r=r.concat(e.characterMeta)}),{text:t,characterMeta:r}}(e.textFragments),a=r.text,n=r.characterMeta,o=!1;if(a===D&&(o=!0,a=""),"pre"===e.tagName){var i=function(e,t){return"\n"===e.charAt(0)&&(e=e.slice(1),t=t.slice(1)),{text:e,characterMeta:t}}(a,n);a=i.text,n=i.characterMeta}else{var l=function(e,t){var r=function(e,t){for(;" "===e.charAt(0);)e=e.slice(1),t=t.slice(1);return{text:e,characterMeta:t}}(e=e.replace(/[ \t\n]/g," "),t);e=r.text,t=r.characterMeta;var a=function(e,t){for(;" "===e.slice(-1);)e=e.slice(0,-1),t=t.slice(0,-1);return{text:e,characterMeta:t}}(e,t);e=a.text,t=a.characterMeta;for(var n=e.length;n--;)" "===e.charAt(n)&&" "===e.charAt(n-1)&&(e=e.slice(0,n)+e.slice(n+1),t=t.slice(0,n).concat(t.slice(n+1)));var o=b({text:e,characterMeta:t},"\r ",D);e=o.text,t=o.characterMeta;var i=b({text:e,characterMeta:t}," \r",D);return e=i.text,t=i.characterMeta,{text:e,characterMeta:t}}(a,n);a=l.text,n=l.characterMeta}((a=a.split(D).join("\n")).length||o)&&t.push(new y.ContentBlock({key:(0,y.genKey)(),text:a,type:e.type,characterList:n.toList(),depth:e.depth,data:e.data?(0,x.Map)(e.data):(0,x.Map)()}))}),t.length||(t=[M]),y.ContentState.createFromBlockArray(t,this.contentStateForEntities.getEntityMap())}},{key:"getBlockTypeFromTagName",value:function(e){var t=this.options.blockTypes;if(t&&t[e])return t[e];switch(e){case"li":return"ol"===this.blockStack.slice(-1)[0].tagName?E.ny.ORDERED_LIST_ITEM:E.ny.UNORDERED_LIST_ITEM;case"blockquote":return E.ny.BLOCKQUOTE;case"h1":return E.ny.HEADER_ONE;case"h2":return E.ny.HEADER_TWO;case"h3":return E.ny.HEADER_THREE;case"h4":return E.ny.HEADER_FOUR;case"h5":return E.ny.HEADER_FIVE;case"h6":return E.ny.HEADER_SIX;case"pre":return E.ny.CODE;case"figure":return E.ny.ATOMIC;default:return E.ny.UNSTYLED}}},{key:"processBlockElement",value:function(e){if(e){var t,r,a=this.options.customBlockFn,n=e.nodeName.toLowerCase();if(a){var o=a(e);null!=o&&(t=o.type,r=o.data)}var i=!0;if(null==t&&(i=!1,t=this.getBlockTypeFromTagName(n)),t===E.ny.CODE){var l=e.getAttribute("data-language");l&&(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(r,!0).forEach(function(t){T(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r,{language:l}))}var s=function(e){switch(e){case E.ny.UNORDERED_LIST_ITEM:case E.ny.ORDERED_LIST_ITEM:return!0;default:return!1}}(t),c=!j.hasOwnProperty(n);if(!i&&t===E.ny.UNSTYLED){var d=this.blockStack.slice(-1)[0];d&&(t=d.type)}var u={tagName:n,textFragments:[],type:t,styleStack:[C],entityStack:[null],depth:s?this.depth:0,data:r};c&&(this.blockList.push(u),s&&(this.depth+=1)),this.blockStack.push(u),null!=e.childNodes&&Array.from(e.childNodes).forEach(this.processNode,this),this.blockStack.pop(),c&&s&&(this.depth-=1)}}},{key:"processInlineElement",value:function(e){var t=e.nodeName.toLowerCase();if("br"!==t){var r=this.blockStack.slice(-1)[0],a=r.styleStack.slice(-1)[0],n=r.entityStack.slice(-1)[0],o=this.options.customInlineFn,i=o?o(e,this.inlineCreators):null;if(null!=i)switch(i.type){case"STYLE":a=a.add(i.style);break;case"ENTITY":n=i.entityKey}else a=function(e,t,r){switch(t){case"b":case"strong":return e.add(E.CF.BOLD);case"i":case"em":return e.add(E.CF.ITALIC);case"u":case"ins":return e.add(E.CF.UNDERLINE);case"code":return e.add(E.CF.CODE);case"s":case"del":return e.add(E.CF.STRIKETHROUGH);default:return r&&r[t]?e.add(r[t]):e}}(a,t,this.options.elementStyles),I.hasOwnProperty(t)&&(n=I[t](this,t,e)||n);r.styleStack.push(a),r.entityStack.push(n),null!=e.childNodes&&Array.from(e.childNodes).forEach(this.processNode,this),S.hasOwnProperty(t)&&this.processText("\xa0"),r.entityStack.pop(),r.styleStack.pop()}else this.processText(D)}},{key:"processTextNode",value:function(e){var t=e.nodeValue;t=(t=t.replace(L,"\n")).split("\u200b").join(D),this.processText(t)}},{key:"processText",value:function(e){var t=this.blockStack.slice(-1)[0],r=t.styleStack.slice(-1)[0],a=t.entityStack.slice(-1)[0],n=y.CharacterMetadata.create({style:r,entity:a}),o=(0,x.Repeat)(n,e.length);t.textFragments.push({text:e,characterMeta:o})}},{key:"processNode",value:function(e){if(1===e.nodeType){var t=e,r=t.nodeName.toLowerCase();k.hasOwnProperty(r)?this.processInlineElement(t):this.processBlockElement(t)}else 3===e.nodeType&&this.processTextNode(e)}},{key:"createEntity",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MUTABLE";return this.contentStateForEntities=this.contentStateForEntities.createEntity(e,r,t),this.contentStateForEntities.getLastCreatedEntityKey()}}],r&&O(t.prototype,r),a&&O(t,a),e}();function P(e){var t={};if(null!==e&&"object"===w(e)&&!Array.isArray(e))for(var r=e,a=0,n=Object.keys(r);a<n.length;a++){var o=n[a],i=r[o];"string"===typeof i&&(t[o]=i)}return t}function U(e,t){return new B(t).process(e)}function z(e){var t;"undefined"!==typeof DOMParser?t=(new DOMParser).parseFromString(e,"text/html"):(t=document.implementation.createHTMLDocument("")).documentElement&&(t.documentElement.innerHTML=e);return t.body||t.createElement("body")}function H(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Y={};var K=r(44414);var W=()=>{var e;const t=(0,d.g)(),r=(0,o.Zp)(),[l,b]=(0,a.useState)(!1),[v,x]=(0,a.useState)(null),[E,k]=(0,a.useState)(""),[j,S]=(0,a.useState)(""),[w,N]=(0,a.useState)(y.EditorState.createEmpty()),[O,T]=(0,a.useState)(""),[A,C]=(0,a.useState)(null),[M,L]=(0,a.useState)(!0),D=null===(e=(0,o.g)())||void 0===e?void 0:e.id,R=async()=>{try{var e,r,a,n,o,i,l,d;const s=await c.A.get("/api/v1/blog/getoneblog/".concat(D),{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(t)}});k(null===s||void 0===s||null===(e=s.data)||void 0===e||null===(r=e.blog)||void 0===r?void 0:r.title),x(null===s||void 0===s||null===(a=s.data)||void 0===a||null===(n=a.blog)||void 0===n?void 0:n.image);const u=function(e,t){var r=t||Y,a=r.parser,n=H(r,["parser"]);return null==a&&(a=z),U(a(e),n)}(null===s||void 0===s||null===(o=s.data)||void 0===o||null===(i=o.blog)||void 0===i?void 0:i.blog_content),h=y.EditorState.createWithContent(u);N(h),L(!1);const p=null===s||void 0===s||null===(l=s.data)||void 0===l||null===(d=l.blog)||void 0===d?void 0:d.tags.join(",");S(p)}catch(u){s()({title:"Error",text:"Unable to fetch the blog",icon:"error",button:"Retry",dangerMode:!0})}};(0,a.useEffect)(()=>{R()},[]);return(0,K.jsxs)("div",{className:"container",children:[(0,K.jsx)("div",{className:"row",children:(0,K.jsx)("div",{className:"col-12",children:(0,K.jsxs)("div",{className:" page-title-box d-flex align-items-center justify-content-between ",children:[(0,K.jsx)("div",{style:{fontSize:"22px"},className:"fw-bold",children:"Update Blog"}),(0,K.jsx)("div",{style:{display:"flex",gap:"1rem"},children:(0,K.jsx)("h4",{className:"mb-0"})}),(0,K.jsxs)("div",{className:"page-title-right",children:[(0,K.jsx)(n.A,{variant:"contained",color:"primary",style:{fontWeight:"bold",marginBottom:"1rem",textTransform:"capitalize",marginRight:"5px"},onClick:()=>(()=>{if(""===E||""===w||""===j)return void s()({title:"Warning",text:"Fill all mandatory fields",icon:"error",button:"Close",dangerMode:!0});b(!0);const e=w.getCurrentContent(),a=(0,f.W)(e),n=new FormData;n.append("title",E),n.append("blog_content",a),n.append("tags",j),null!==A&&n.append("image",A),c.A.patch("/api/v1/blog/updateblog/".concat(D),n,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}}).then(e=>{s()({title:"Updated",text:"Blog Updated successfully!",icon:"success",button:"ok"}),b(!1),r("/blogs",{replace:!0})}).catch(e=>{var t,r,a,n;b(!1);const o=null!==(t=e.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.message?null===(a=e.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message:"Something went wrong!";s()({title:"Warning",text:o,icon:"error",button:"Retry",dangerMode:!0})})})(),disabled:l,children:l?"Loading":"Save"}),(0,K.jsx)(i.N_,{to:"/blogs",children:(0,K.jsx)(n.A,{variant:"contained",color:"secondary",style:{fontWeight:"bold",marginBottom:"1rem",textTransform:"capitalize"},children:"Back"})})]})]})})}),(0,K.jsxs)("div",{className:"row",children:[(0,K.jsx)("div",{className:"col-lg-6 col-md-6  col-sm-12 my-1",children:(0,K.jsx)("div",{className:"card h-100",children:(0,K.jsxs)("div",{className:"card-body px-5",children:[(0,K.jsxs)("div",{className:"mb-3",children:[(0,K.jsx)("label",{htmlFor:"title",className:"form-label",children:"Blog Title"}),(0,K.jsx)("input",{type:"text",className:"form-control",id:"name",placeHolder:"enter Title",value:E,onChange:e=>k(e.target.value)})]}),(0,K.jsxs)("div",{className:"mb-3",children:[(0,K.jsx)("label",{htmlFor:"tag",className:"form-label",children:"Tags"}),(0,K.jsx)("input",{type:"text",value:j,onChange:e=>S(e.target.value),className:"form-control",id:"tag",placeHolder:"enter Tags"}),(0,K.jsx)("em",{style:{fontSize:"0.8rem"},children:"enter space or comma to add new tag"})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)("label",{htmlFor:"image",className:"form-label",children:"Blog Image"}),(0,K.jsx)(p.A,{children:(0,K.jsxs)("label",{htmlFor:"upload-Image",children:[(0,K.jsx)(m.A,{style:{display:"none",width:"350px",height:"350px",borderRadius:"10%"},fullWidth:!0,id:"upload-Image",type:"file",accept:".jpg , .png ,.jpeg",label:"file",multiple:!0,variant:"outlined",onChange:e=>(e=>{const t=e.target.files;if(T(""),t.length>1||!1===M||null!==A)return void T("You can only upload one image.");const r=t[0];["image/jpeg","image/png","image/jpg"].includes(r.type)?C(r):T("Please upload only PNG, JPEG, or JPG files.")})(e)}),(0,K.jsx)(p.A,{style:{borderRadius:"10%"},sx:{margin:"1rem 0rem",cursor:"pointer",width:"100px",height:"100px",border:"2px solid grey","&:hover":{background:"rgba(112,112,112,0.5)"}},children:(0,K.jsx)(u.A,{style:{color:"grey",margin:"auto",fontSize:"5rem",marginLeft:"0.5rem",marginTop:"0.5rem"},fontSize:"large"})})]})}),O&&(0,K.jsx)("p",{style:{color:"red"},children:O}),(0,K.jsx)("div",{children:(0,K.jsx)("strong",{className:"fs-6 fst-italic",children:"*You cannot upload more than 1 image"})}),(0,K.jsxs)(p.A,{style:{display:"flex"},children:[!1===M&&null!==v?(0,K.jsxs)(p.A,{marginRight:"2rem",children:[(0,K.jsx)("img",{src:v.url,alt:"profileImage",style:{width:70,height:70,marginBottom:"1rem"}}),(0,K.jsx)(h.A,{onClick:()=>(async e=>{const r=e.split("/");await c.A.delete("/api/v1/blog/deleteImage/jatinMor/Blog/".concat(r[2]),{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(t)}})&&(x(null),L(!0))})(v.public_id),fontSize:"small",sx:{color:"white",position:"absolute",cursor:"pointer",padding:"0.2rem",background:"black",borderRadius:"50%"}})]}):null,null!==A&&M&&(0,K.jsxs)(p.A,{marginRight:"2rem",children:[(0,K.jsx)("img",{src:A?URL.createObjectURL(A):"",alt:"profileImage",style:{width:70,height:70,marginBottom:"1rem"}}),(0,K.jsx)(h.A,{onClick:()=>{C(null)},fontSize:"small",sx:{color:"white",position:"absolute",cursor:"pointer",padding:"0.2rem",background:"black",borderRadius:"50%"}})]})]})]})]})})}),(0,K.jsx)("div",{className:"col-lg-6 col-md-6  col-sm-12 my-1",children:(0,K.jsx)("div",{className:"card h-100",children:(0,K.jsxs)("div",{className:"card-body px-5",children:[(0,K.jsx)("label",{children:"Blog Content"}),(0,K.jsx)(g.Editor,{editorState:w,toolbarClassName:"blog-toolbar",wrapperClassName:"wrapperClassName",editorClassName:"blog-content",onEditorStateChange:e=>{N(e)}})]})})})]})]})}}}]);