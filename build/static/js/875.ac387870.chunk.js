"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[875],{20875:function(e,l,a){a.r(l);var s=a(9950),t=a(26910),i=a(28429),n=a(11031),r=a(6536),d=a.n(r),c=a(64267),o=a.n(c),h=(a(35887),a(44414));l.default=()=>{const e=(0,n.g)(),[l,a]=((0,i.Zp)(),(0,s.useState)(!1)),[r,c]=(0,s.useState)([]),[x,m]=(0,s.useState)([]),[v,u]=(0,s.useState)([]),p=(0,s.useRef)(),j=(0,s.useRef)(),N=(0,s.useRef)(),[g,b]=(0,s.useState)(1),[w,f]=(0,s.useState)(10),[y,_]=(0,s.useState)(0),S=async()=>{a(!0);try{var l,s,i,n,r,o;const a=await t.A.get("/api/report/opening-inventory",{headers:{Authorization:"Bearer ".concat(e)},params:{page:g,show:w,name:(null===(l=p.current)||void 0===l?void 0:l.value)||"",category:(null===(s=j.current)||void 0===s?void 0:s.value)||"",brand:(null===(i=N.current)||void 0===i?void 0:i.value)||""}});c((null===(n=a.data)||void 0===n?void 0:n.data)||[]),_((null===(r=a.data)||void 0===r||null===(o=r.pagination)||void 0===o?void 0:o.total)||0)}catch(m){var h,x;const e=(null===m||void 0===m||null===(h=m.response)||void 0===h||null===(x=h.data)||void 0===x?void 0:x.msg)||"Something went wrong!";d()({title:"Error",text:e,icon:"error",button:"Retry",dangerMode:!0})}finally{a(!1)}};(0,s.useEffect)(()=>{t.A.get("/api/category/getCategories",{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(e)}}).then(e=>{var l;m(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.categories)}),t.A.get("/api/brand/getBrands",{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(e)}}).then(e=>{var l;u(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.brands)})},[]),(0,s.useEffect)(()=>{S()},[w,g]);const C=(0,s.useCallback)(o()(()=>{b(1),S()},500),[]),A=()=>{C()};return(0,h.jsx)("div",{className:"main-content",children:(0,h.jsx)("div",{className:"page-content",children:(0,h.jsxs)("div",{className:"container-fluid",children:[(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-12",children:(0,h.jsx)("div",{className:" page-title-box d-flex align-items-center justify-content-between ",children:(0,h.jsx)("div",{style:{fontSize:"22px"},className:"fw-bold",children:"Opening Inventory Reports"})})})}),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-lg-12",children:(0,h.jsx)("div",{className:"card",children:(0,h.jsxs)("div",{className:"card-body",children:[(0,h.jsxs)("div",{className:"row ml-0 mr-0 mb-10",children:[(0,h.jsx)("div",{className:"col-lg-1",children:(0,h.jsx)("div",{className:"dataTables_length",children:(0,h.jsxs)("label",{className:"w-100",children:["Show",(0,h.jsxs)("select",{onChange:e=>{f(e.target.value),b(1)},className:"form-control",disabled:l,children:[(0,h.jsx)("option",{value:"10",children:"10"}),(0,h.jsx)("option",{value:"25",children:"25"}),(0,h.jsx)("option",{value:"50",children:"50"}),(0,h.jsx)("option",{value:"100",children:"100"})]}),"entries"]})})}),(0,h.jsxs)("div",{className:"col-lg-3",children:[(0,h.jsx)("label",{children:"Product Name:"}),(0,h.jsx)("input",{type:"text",placeholder:"product name",className:"form-control",ref:p,onChange:A,disabled:l})]}),(0,h.jsxs)("div",{className:"col-lg-3",children:[(0,h.jsx)("label",{children:"Filter by Category:"}),(0,h.jsxs)("select",{className:"form-control",ref:j,onChange:A,disabled:l,children:[(0,h.jsx)("option",{value:"",children:"All"}),null===x||void 0===x?void 0:x.map((e,l)=>(0,h.jsx)("option",{value:e._id,children:null===e||void 0===e?void 0:e.categoryName},l))]})]}),(0,h.jsxs)("div",{className:"col-lg-3",children:[(0,h.jsx)("label",{children:"Filter by Brand:"}),(0,h.jsxs)("select",{className:"form-control",ref:N,onChange:A,disabled:l,children:[(0,h.jsx)("option",{value:"",children:"All"}),null===v||void 0===v?void 0:v.map((e,l)=>(0,h.jsx)("option",{value:e._id,children:null===e||void 0===e?void 0:e.brandName},l))]})]})]}),(0,h.jsx)("div",{className:"table-responsive table-shoot mt-3",children:(0,h.jsxs)("table",{className:"table table-centered table-nowrap",style:{border:"1px solid"},children:[(0,h.jsx)("thead",{className:"thead-light",style:{background:"#ecdddd"},children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"text-start",style:{width:"10%"},children:"SKU Code"}),(0,h.jsx)("th",{className:"text-start",style:{width:"25%"},children:"SKU Description"}),(0,h.jsx)("th",{className:"text-start",style:{width:"15%"},children:"Category Name"}),(0,h.jsx)("th",{className:"text-start",style:{width:"15%"},children:"Brand Name"}),(0,h.jsx)("th",{className:"text-start",style:{width:"15%"},children:"Total At PD & RD"}),(0,h.jsx)("th",{className:"text-start",style:{width:"10%"},children:"All PDs"}),(0,h.jsx)("th",{className:"text-start",style:{width:"10%"},children:"All RDs"})]})}),(0,h.jsx)("tbody",{children:l?(0,h.jsx)("tr",{children:(0,h.jsx)("td",{className:"text-center",colSpan:"7",children:"Loading..."})}):(null===r||void 0===r?void 0:r.length)>0?null===r||void 0===r?void 0:r.map((e,l)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-start",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.SKU}),(0,h.jsx)("td",{className:"text-start",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.name}),(0,h.jsx)("td",{className:"text-start",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.category||"Category Not selected"}),(0,h.jsx)("td",{className:"text-start",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.brand||"Brand Not selected"}),(0,h.jsx)("td",{className:"text-start",children:e.allPdAndRd}),(0,h.jsx)("td",{className:"text-start",children:e.allPDs}),(0,h.jsx)("td",{className:"text-start",children:e.allRDs})]},l)):(0,h.jsx)("tr",{className:"text-center",children:(0,h.jsx)("td",{colSpan:"7",children:(0,h.jsx)("h5",{children:"No Product Available..."})})})})]})}),(0,h.jsxs)("div",{className:"row mt-20",children:[(0,h.jsx)("div",{className:"col-sm-12 col-md-6 mb-20",children:(0,h.jsxs)("div",{className:"dataTables_info",id:"datatable_info",role:"status","aria-live":"polite",children:["Showing ",g*w-w+1," to"," ",Math.min(g*w,y)," of"," ",y," entries"]})}),(0,h.jsx)("div",{className:"col-sm-12 col-md-6",children:(0,h.jsx)("div",{className:"d-flex",children:(0,h.jsxs)("ul",{className:"pagination ms-auto",children:[(0,h.jsx)("li",{className:1===g?"paginate_button page-item previous disabled":"paginate_button page-item previous",children:(0,h.jsx)("span",{className:"page-link",style:{cursor:"pointer"},onClick:()=>b(e=>e-1),disabled:l,children:"Previous"})}),!(g-1<1)&&(0,h.jsx)("li",{className:"paginate_button page-item",children:(0,h.jsx)("span",{className:"page-link",style:{cursor:"pointer"},onClick:e=>b(e=>e-1),disabled:l,children:g-1})}),(0,h.jsx)("li",{className:"paginate_button page-item active",children:(0,h.jsx)("span",{className:"page-link",style:{cursor:"pointer"},children:g})}),!((g+1)*w-w>y-1)&&(0,h.jsx)("li",{className:"paginate_button page-item ",children:(0,h.jsx)("span",{className:"page-link",style:{cursor:"pointer"},onClick:()=>{b(e=>e+1)},disabled:l,children:g+1})}),(0,h.jsx)("li",{className:(g+1)*w-w>y-1?"paginate_button page-item next disabled":"paginate_button page-item next",children:(0,h.jsx)("span",{className:"page-link",style:{cursor:"pointer"},onClick:()=>b(e=>e+1),disabled:l,children:"Next"})})]})})})]})]})})})})]})})})}}}]);