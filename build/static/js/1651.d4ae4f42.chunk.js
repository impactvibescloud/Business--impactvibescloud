"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1651],{81651:function(e,t,a){a.r(t);var r=a(9950),n=a(78317),i=a(48089),c=a(82053),l=a(29925),o=a(25979),s=a(3788),u=a(27138),d=a(11088),p=a(25333),m=a(41413),h=a(10226),g=a(28429),f=a(33742),x=a(4695),y=a.n(x),b=a(26910),A=a(11031),j=a(44414);t.default=()=>{const{id:e}=(0,g.g)(),t=(0,g.Zp)(),[a,x]=(0,r.useState)(""),[v,_]=(0,r.useState)(""),[w,C]=(0,r.useState)(""),[S,I]=(0,r.useState)([]),[k,E]=(0,r.useState)(null),[U,q]=(0,r.useState)(null),[N,R]=(0,r.useState)(!1),W=(0,A.g)();(0,r.useEffect)(()=>{D(),F()},[]);const D=async()=>{try{const t=await b.A.get("/api/get/".concat(e)),{item:a,price:r,category:n,photo:i}=t.data.menuItem;x(a),_(r),C(n),E(i)}catch(t){console.error("Error fetching menu item:",t)}},F=async()=>{try{const e=await b.A.get("/api/menu-category/getCategories");I(e.data.categories)}catch(e){console.error("Error fetching categories:",e)}};return(0,j.jsxs)(n.A,{p:2,component:i.A,children:[(0,j.jsx)(c.A,{variant:"h5",mb:2,children:"Edit Menu Item"}),(0,j.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),R(!0);const n=new FormData;n.append("item",a),n.append("price",v),n.append("category",w),U&&n.append("photo",U);try{const a=await b.A.put("/api/edit-items/".concat(e),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(W)}});console.log(a),y().fire({title:"Menu updated successfully!",icon:"success"}),t("/menu")}catch(i){console.error("Error updating menu item:",i),y().fire({title:"Something went wrong!",icon:"error"})}finally{R(!1)}},children:[(0,j.jsx)(l.A,{label:"Item Name",variant:"outlined",fullWidth:!0,required:!0,value:a,onChange:e=>x(e.target.value),sx:{mb:2}}),(0,j.jsx)(l.A,{label:"Price",variant:"outlined",required:!0,fullWidth:!0,type:"number",value:v,onChange:e=>_(e.target.value),sx:{mb:2}}),(0,j.jsxs)(o.A,{fullWidth:!0,sx:{mb:2},children:[(0,j.jsx)(s.A,{id:"category-label",children:"Category"}),(0,j.jsx)(u.A,{labelId:"category-label",value:w,onChange:e=>C(e.target.value),required:!0,children:S.map(e=>(0,j.jsx)(d.A,{value:e._id,children:e.categoryName},e._id))})]}),(0,j.jsxs)(n.A,{display:"flex",alignItems:"center",mb:2,children:[(0,j.jsx)("input",{type:"file",accept:"image/*",id:"file-input",style:{display:"none"},onChange:e=>{const t=e.target.files[0];if(q(t),t){const e=URL.createObjectURL(t);E(e)}}}),(0,j.jsx)("label",{htmlFor:"file-input",children:(0,j.jsx)(p.A,{color:"primary",component:"span",sx:{border:"1px solid",borderRadius:"8px",p:5,background:"#f4f5f5"},children:(0,j.jsx)(f.A,{})})}),k?(0,j.jsx)(m.A,{src:k,alt:"Preview",sx:{width:56,height:56,ml:2}}):(0,j.jsx)(c.A,{variant:"body1",ml:2,children:"No file selected"})]}),(0,j.jsx)(h.A,{disabled:N,variant:"contained",color:"primary",type:"submit",children:N?"Updating...":"Update Item"})]})]})}}}]);