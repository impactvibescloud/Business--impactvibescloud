"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2998],{10185:function(e,a,s){s.d(a,{B:function(){return t}});const t=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M479.6,399.716l-81.084-81.084-62.368-25.767A175.014,175.014,0,0,0,368,192c0-97.047-78.953-176-176-176S16,94.953,16,192,94.953,368,192,368a175.034,175.034,0,0,0,101.619-32.377l25.7,62.2L400.4,478.911a56,56,0,1,0,79.2-79.195ZM48,192c0-79.4,64.6-144,144-144s144,64.6,144,144S271.4,336,192,336,48,271.4,48,192ZM456.971,456.284a24.028,24.028,0,0,1-33.942,0l-76.572-76.572-23.894-57.835L380.4,345.771l76.573,76.572A24.028,24.028,0,0,1,456.971,456.284Z' class='ci-primary'/>"]},42998:function(e,a,s){s.r(a),s.d(a,{default:function(){return g}});var t=s(9950),n=s(49911),r=s(81949),o=s(71293),i=s(10185),d=s(15053),c=s(27760),l=s(50323),m=s(2720),u=s(85571),h=s(70428),p=s(44414);const b=()=>m.i3.PROD_URL;var g=function(){const[e,a]=(0,t.useState)([]),[g,x]=(0,t.useState)(!1),[j,v]=(0,t.useState)(""),[y,f]=(0,t.useState)(1),[N]=(0,t.useState)(10),[C,A]=(0,t.useState)(!1),[I,S]=(0,t.useState)(!1),[w,_]=(0,t.useState)(null),[k,E]=(0,t.useState)(!1),[H,T]=(0,t.useState)(""),[D,M]=(0,t.useState)(!1),[U,P]=(0,t.useState)(null),[B,L]=(0,t.useState)({show:!1,message:""}),[O,R]=(0,t.useState)(""),[q,G]=(0,t.useState)(""),[$,z]=(0,t.useState)(""),[V,Z]=(0,t.useState)([]),[Q,X]=(0,t.useState)([]),[Y,F]=(0,t.useState)([]),[J,K]=(0,t.useState)(""),[W,ee]=(0,t.useState)({businessId:"",name:"",description:"",status:"active",departmentHead:"",didNumber:"",members:[]}),{businessId:ae}=(0,h.As)();(0,t.useEffect)(()=>{(async()=>{const e=ae||localStorage.getItem("businessId")||"";if(e){G(e),ee(a=>({...a,businessId:e}));try{await se(e)}catch(a){(0,u.PT)("Error fetching business details during init:",a)}try{await te(e)}catch(a){(0,u.PT)("Error fetching agents during init:",a)}}else z("Business not found"),console.warn("No businessId available from Auth context or localStorage")})()},[ae]);const se=async e=>{try{var a,s,t,n,r;const o=await(0,m.H2)(m.Hr.BUSINESS_DETAILS(e),"GET");if(console.log("Business Details Response:",o),null!==o&&void 0!==o&&null!==(a=o.data)&&void 0!==a&&a.name)z(o.data.name);else if(null!==o&&void 0!==o&&o.name)z(o.name);else if(null!==o&&void 0!==o&&o.businessName)z(o.businessName);else if(null!==o&&void 0!==o&&null!==(s=o.data)&&void 0!==s&&s.businessName)z(o.data.businessName);else if(null!==o&&void 0!==o&&null!==(t=o.business)&&void 0!==t&&t.name)z(o.business.name);else if(null!==o&&void 0!==o&&null!==(n=o.data)&&void 0!==n&&null!==(r=n.business)&&void 0!==r&&r.name)z(o.data.business.name);else{const e=localStorage.getItem("businessName");z(e||"Impact Vibes Cloud")}}catch(o){(0,u.PT)("Error fetching business details:",o);const e=localStorage.getItem("businessName");z(e||"Impact Vibes Cloud")}},te=async e=>{try{var a;const n=await(0,m.H2)("/branch/".concat(e,"/branches"),"GET");let r=[];Array.isArray(n)?r=n:null!==n&&void 0!==n&&n.data&&Array.isArray(n.data)?r=n.data:null!==n&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.data&&Array.isArray(n.data.data)?r=n.data.data:null!==n&&void 0!==n&&n.branches&&Array.isArray(n.branches)&&(r=n.branches),r&&0!==r.length||(r=[],console.log("No branch data found, using empty array")),r.length>0&&(r=r.map(e=>{var a,s,t;return{_id:e._id||e.id||"branch-".concat(Math.random().toString(36).substring(2,9)),id:e.id||e._id||"branch-".concat(Math.random().toString(36).substring(2,9)),branchName:e.branchName||e.name||"Unnamed Branch",name:e.name||e.branchName||"Unnamed Branch",didNumber:e.didNumbers&&e.didNumbers.length>0?e.didNumbers[0]:e.didNumber||e.did||"",userId:(null===(a=e.user)||void 0===a?void 0:a._id)||(null===(s=e.user)||void 0===s?void 0:s.id)||e.userId||"",phone:(null===(t=e.user)||void 0===t?void 0:t.phone)||e.phone||"",role:"branch"}}),console.log("Processed branch data with user info:",r)),X(r);try{var s;const a=await(0,m.H2)("/users?businessId=".concat(encodeURIComponent(e)),"GET");console.log("Agent Response:",a);let t=[];Array.isArray(a)?t=a:null!==a&&void 0!==a&&a.data&&Array.isArray(a.data)?t=a.data:null!==a&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.data&&Array.isArray(a.data.data)?t=a.data.data:a&&"object"===typeof a&&(t=[a]),t&&0!==t.length?t=t.map(e=>({id:e.id||e._id||"agent-".concat(Math.random().toString(36).substring(2,9)),_id:e._id||e.id||"agent-".concat(Math.random().toString(36).substring(2,9)),name:e.name||e.fullName||"Unknown Agent",email:e.email||"no-email@example.com"})):(console.log("No agent data found, using empty array"),t=[]),Z(t)}catch(t){console.error("Error fetching agents:",t),Z([])}}catch(n){console.error("Error in fetchAvailableAgents:",n),(0,u.PT)("Error fetching agents/branches:",n),Z([]),X([])}};(0,t.useEffect)(()=>{q&&ne()},[q]);const ne=async()=>{x(!0);try{const e=localStorage.getItem("authToken")||localStorage.getItem("token");if(console.log("Using token:",e?"Token exists":"No token found"),!q)return void console.log("No business ID available yet");const t=await s.e(3062).then(s.bind(s,13062)),n=b();console.log("Making direct axios call to: ".concat(n,"/api/departments/business/").concat(q));const r=await t.default.get("".concat(n,"/api/departments/business/").concat(q),{headers:{Accept:"*/*","Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""}});console.log("Direct axios response:",r);let o=[];r.data?(console.log("Got data from direct axios call:",r.data),Array.isArray(r.data)?(o=r.data,console.log("Using array response from axios")):r.data.data&&Array.isArray(r.data.data)?(o=r.data.data,console.log("Using nested data array from axios")):r.data.departments&&Array.isArray(r.data.departments)?(o=r.data.departments,console.log("Using departments array from axios")):"object"===typeof r.data&&null!==r.data?r.data.name?(o=[r.data],console.log("Using single department object from axios")):console.log("Could not parse department data from axios response, using empty array"):console.log("Unexpected axios response format, using empty array")):console.log("No data in axios response, using empty array"),console.log("Final departments data to be used:",o),a(o)}catch(e){console.error("Error details when fetching departments:",e),e.response?(console.error("Server responded with error status:",e.response.status),console.error("Error response data:",e.response.data),console.error("Error response headers:",e.response.headers)):e.request?(console.error("No response received from server. Is the server running?"),console.error("Request details:",e.request)):console.error("Error setting up request:",e.message),console.log("Checking if backend is reachable...");try{const e=await s.e(3062).then(s.bind(s,13062)),a=b();await e.default.head(a,{timeout:2e3}),console.log("Backend server is reachable")}catch(t){console.error("Backend server unreachable:",t.message),console.log("Please ensure your backend server is running at ".concat(baseUrl))}(0,u.PT)("Error fetching departments:",e),console.log("Error occurred, using empty departments array"),a([])}finally{x(!1)}},re=()=>{P(null),F([]),K(""),ee({businessId:q||"",name:"",description:"",status:"active",departmentHead:"",didNumber:"",members:[]}),A(!0)},oe=()=>{A(!1),R("")},ie=e=>{const{name:a,value:s}=e.target;if("departmentHead"===a){const e=Q.find(e=>e._id===s||e.id===s);console.log("Selected branch for department head:",e),console.log("Branch userId:",null===e||void 0===e?void 0:e.userId),console.log("Branch didNumber:",null===e||void 0===e?void 0:e.didNumber),K(s),ee(t=>({...t,[a]:(null===e||void 0===e?void 0:e.userId)||s,didNumber:(null===e||void 0===e?void 0:e.didNumber)||""}))}else ee(e=>({...e,[a]:s}))},de=()=>{S(!1),_(null)},ce=e.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.description&&e.description.toLowerCase().includes(j.toLowerCase())||e.status.toLowerCase().includes(j.toLowerCase())),le=y*N,me=le-N,ue=ce.slice(me,le),he=Math.ceil(ce.length/N),pe=e=>{f(e)},be=e=>{const a=(null===e||void 0===e?void 0:e.toLowerCase())||"inactive",s="active"===a?"success":"secondary",t=a.charAt(0).toUpperCase()+a.slice(1);return(0,p.jsx)(n.$X,{color:s,children:t})},ge=e=>{if(!e.departmentHead)return"Not assigned";const a="object"===typeof e.departmentHead?e.departmentHead._id||e.departmentHead.id:e.departmentHead,s=Q.find(e=>e.userId===a);return s?s.branchName||s.name:e.departmentHead.email||"Unknown"},xe=e=>{if(!e.departmentHead)return"Not assigned";if(e.didNumber)return e.didNumber;const a="object"===typeof e.departmentHead?e.departmentHead._id||e.departmentHead.id:e.departmentHead,s=Q.find(e=>e.userId===a);return(null===s||void 0===s?void 0:s.didNumber)||"Not assigned"};return(0,p.jsxs)("div",{className:"contact-list-container",children:[B.show&&(0,p.jsx)(n.kj,{color:"success",dismissible:!0,onClose:()=>L({show:!1,message:""}),children:B.message}),(0,p.jsxs)(n.E$,{className:"mb-4",children:[(0,p.jsx)("style",{children:"\n          /* Compact table tweaks scoped to this component (match Agents page) */\n          .compact-table th, .compact-table td {\n            padding: 0.25rem 0.4rem !important;\n            vertical-align: middle !important;\n            line-height: 1.15 !important;\n            font-size: 0.8125rem !important;\n          }\n          .compact-table td { overflow: hidden; text-overflow: ellipsis; }\n          .compact-table .note-col { white-space: normal !important; }\n          .compact-table .nowrap { white-space: nowrap !important; }\n        "}),(0,p.jsxs)(n.V0,{className:"d-flex justify-content-between align-items-center",children:[(0,p.jsx)("span",{children:"Departments"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>ne(),disabled:g,children:"Refresh"}),!1,(0,p.jsx)("button",{className:"btn btn-sm btn-outline-secondary me-2",onClick:()=>f(e=>Math.max(1,e-1)),disabled:1===y||g,children:"Prev"}),(0,p.jsxs)("span",{className:"mx-2",children:["Page ",y]}),(0,p.jsx)("button",{className:"btn btn-sm btn-outline-secondary me-2",onClick:()=>f(e=>e+1),disabled:g,children:"Next"}),(0,p.jsxs)("button",{className:"btn btn-sm btn-primary",onClick:re,children:[(0,p.jsx)(r.Ay,{icon:o.x,className:"me-1"})," New Department"]})]})]}),(0,p.jsxs)(n.W6,{children:[(0,p.jsx)(n.sK,{className:"mb-4",children:(0,p.jsx)(n.UF,{md:6,children:(0,p.jsxs)(n.BG,{children:[(0,p.jsx)(n.OG,{placeholder:"Search departments...",value:j,onChange:e=>v(e.target.value)}),(0,p.jsx)(n.Q_,{type:"button",color:"primary",variant:"outline",children:(0,p.jsx)(r.Ay,{icon:i.B})})]})})}),(0,p.jsxs)(n._v,{hover:!0,responsive:!0,className:"table-sm compact-table",style:{tableLayout:"auto"},children:[(0,p.jsx)(n.wV,{children:(0,p.jsxs)(n.YI,{children:[(0,p.jsx)(n.$s,{children:"S.NO"}),(0,p.jsx)(n.$s,{children:"DEPARTMENT NAME"}),(0,p.jsx)(n.$s,{children:"DESCRIPTION"}),(0,p.jsx)(n.$s,{children:"DEPARTMENT HEAD"}),(0,p.jsx)(n.$s,{children:"DID NUMBER"}),(0,p.jsx)(n.$s,{children:"MEMBERS"}),(0,p.jsx)(n.$s,{children:"STATUS"}),(0,p.jsx)(n.$s,{children:"ACTIONS"})]})}),(0,p.jsx)(n.jS,{children:g?(0,p.jsx)(n.YI,{children:(0,p.jsxs)(n.cC,{colSpan:"8",className:"text-center py-5",children:[(0,p.jsx)(n.JT,{color:"primary"}),(0,p.jsx)("div",{className:"mt-3",children:"Loading departments..."})]})}):0===ue.length?(0,p.jsx)(n.YI,{children:(0,p.jsx)(n.cC,{colSpan:"8",className:"text-center py-5",children:(0,p.jsxs)("div",{className:"empty-state",children:[(0,p.jsx)("div",{className:"empty-state-icon",children:(0,p.jsx)(r.Ay,{icon:d.d,size:"xl"})}),(0,p.jsx)("h4",{children:"No departments found"}),(0,p.jsx)("p",{children:"Create your first department to get started."}),(0,p.jsx)(n.Q_,{color:"primary",className:"mt-3",onClick:re,children:"Create Department"})]})})}):ue.map((e,a)=>(0,p.jsxs)(n.YI,{children:[(0,p.jsx)(n.cC,{children:(0,p.jsx)("div",{className:"contact-number",children:me+a+1})}),(0,p.jsx)(n.cC,{children:(0,p.jsx)("div",{className:"contact-name",children:e.name})}),(0,p.jsx)(n.cC,{children:(0,p.jsx)("div",{className:"contact-phone",children:e.description||"No description"})}),(0,p.jsx)(n.cC,{children:(0,p.jsx)("div",{className:"contact-name",children:ge(e)})}),(0,p.jsx)(n.cC,{children:(0,p.jsx)("div",{className:"contact-phone",children:xe(e)})}),(0,p.jsx)(n.cC,{children:(0,p.jsxs)(n.$X,{color:"info",children:[e.members&&Array.isArray(e.members)?e.members.length:0," Members"]})}),(0,p.jsx)(n.cC,{children:be(e.status)}),(0,p.jsxs)(n.cC,{children:[(0,p.jsx)(n.Q_,{color:"info",variant:"ghost",size:"sm",className:"me-2",onClick:()=>(e=>{var a,s;P(e);const t="object"===typeof e.departmentHead?(null===(a=e.departmentHead)||void 0===a?void 0:a._id)||(null===(s=e.departmentHead)||void 0===s?void 0:s.id):e.departmentHead;console.log("Editing department:",e),console.log("Department head object:",e.departmentHead),console.log("Extracted department head userId:",t);const n=Q.find(e=>e.userId===t);console.log("Available branches:",Q),console.log("Matched branch for dropdown:",n);const r=n?n._id||n.id:"";K(r);const o=[];e.members&&Array.isArray(e.members)&&e.members.forEach(e=>{const a=Q.find(a=>a.userId===e.userId||a._id===e.userId||a.id===e.userId);a&&o.push(a._id||a.id)}),F(o);const i=e.members&&Array.isArray(e.members)?e.members.map(e=>{const a=Q.find(a=>a.userId===e.userId||a._id===e.userId||a.id===e.userId);return{userId:e.userId||e.user||e._id||"",phone:e.phone||a&&(a.phone||a.didNumber)||"",didNumber:e.didNumber||a&&(a.didNumber||a.did)||"",role:e.role||"branch",_id:e._id||e.id||void 0}}):[];ee({businessId:e.businessId||q||"",name:e.name,description:e.description,status:e.status||"active",departmentHead:t||"",didNumber:e.didNumber||"",members:i}),A(!0)})(e),children:(0,p.jsx)(r.Ay,{icon:c.K})}),(0,p.jsx)(n.Q_,{color:"danger",variant:"ghost",size:"sm",onClick:()=>{return a=e.id||e._id,_(a),S(!0),T(""),void M(!1);var a},children:(0,p.jsx)(r.Ay,{icon:l.Z})})]})]},e.id||e._id))})]}),he>1&&(0,p.jsxs)(n._l,{"aria-label":"Page navigation example",className:"justify-content-center mt-4",children:[(0,p.jsx)(n.Xp,{disabled:1===y,onClick:()=>pe(y-1),children:"Previous"}),[...Array(he)].map((e,a)=>(0,p.jsx)(n.Xp,{active:a+1===y,onClick:()=>pe(a+1),children:a+1},a)),(0,p.jsx)(n.Xp,{disabled:y===he,onClick:()=>pe(y+1),children:"Next"})]})]})]}),(0,p.jsxs)(n.zS,{visible:C,onClose:oe,children:[(0,p.jsx)(n.E4,{children:(0,p.jsx)(n.lb,{children:U?"Edit Department":"Add New Department"})}),(0,p.jsxs)(n.Tc,{children:[O&&(0,p.jsx)(n.kj,{color:"danger",className:"mb-3",children:O}),(0,p.jsxs)(n.qI,{children:[(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(n.A6,{children:"Department Name"}),(0,p.jsx)(n.OG,{name:"name",value:W.name,onChange:ie,placeholder:"Enter department name"})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(n.A6,{children:"Description"}),(0,p.jsx)(n.OG,{name:"description",value:W.description,onChange:ie,placeholder:"Enter department description"})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(n.A6,{children:"Business"}),(0,p.jsx)(n.OG,{value:$,placeholder:"Business name",disabled:!0}),(0,p.jsx)("small",{className:"text-muted",children:"This is automatically set based on your current business"})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(n.A6,{children:"Department Head"}),Q.length>0?(0,p.jsxs)(n.MT,{name:"departmentHead",value:J,onChange:ie,children:[(0,p.jsx)("option",{value:"",children:"Select Department Head"}),Q.map(e=>(0,p.jsx)("option",{value:e._id||e.id,children:e.branchName||e.name},e._id||e.id))]}):(0,p.jsx)(n.OG,{value:"Loading branches...",disabled:!0}),(0,p.jsx)("small",{className:"text-muted",children:"Select the branch that will head this department"})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(n.A6,{children:"Department Members"}),Q.length>0?(0,p.jsx)("select",{multiple:!0,className:"form-select",value:Y,onChange:e=>{const a=e.target.options,s=[],t=[];for(let n=0;n<a.length;n++)if(a[n].selected){const e=a[n].value;t.push(e);const r=Q.find(a=>a._id===e||a.id===e);r&&s.push({userId:r.userId||r._id||r.id,phone:r.phone||r.didNumber||"",didNumber:r.didNumber||r.did||"",role:r.role||"branch"})}console.log("Selected members:",s),F(t),ee(e=>({...e,members:s}))},style:{minHeight:"150px"},children:Q.map(e=>(0,p.jsxs)("option",{value:e._id||e.id,children:[e.branchName||e.name," ",e.didNumber?"(".concat(e.didNumber,")"):""]},e._id||e.id))}):(0,p.jsx)(n.OG,{value:"Loading branches...",disabled:!0}),(0,p.jsx)("small",{className:"text-muted",children:"Hold Ctrl (Cmd on Mac) to select multiple members"})]}),U&&(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)(n.A6,{children:"Status"}),(0,p.jsxs)(n.MT,{name:"status",value:W.status,onChange:ie,children:[(0,p.jsx)("option",{value:"active",children:"Active"}),(0,p.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]})]}),(0,p.jsxs)(n.If,{children:[(0,p.jsx)(n.Q_,{color:"secondary",onClick:oe,children:"Cancel"}),(0,p.jsxs)(n.Q_,{color:"primary",onClick:async()=>{if(W.name.trim())try{const t=await s.e(3062).then(s.bind(s,13062)),n=localStorage.getItem("authToken")||localStorage.getItem("token"),r={Accept:"*/*","Content-Type":"application/json",Authorization:n?"Bearer ".concat(n):""},o=W.members&&Array.isArray(W.members)?W.members.map(e=>{const a=Q.find(a=>a.userId===e.userId||a._id===e.userId||a.id===e.userId);return{userId:e.userId||e._id||e.id||"",phone:e.phone||a&&(a.phone||a.didNumber)||"",didNumber:e.didNumber||a&&(a.didNumber||a.did)||"",role:e.role||"branch"}}):[],i={businessId:W.businessId,name:W.name,description:W.description,status:W.status,departmentHead:W.departmentHead,didNumber:W.didNumber,members:o};let d;if(console.log("Department data being sent:",JSON.stringify(i,null,2)),U){console.log("Updating department with data:",i);const s=U.id||U._id,n=b();console.log("Making PUT request to: ".concat(n,"/api/departments/").concat(s)),d=await t.default.put("".concat(n,"/api/departments/").concat(s),{name:W.name,description:W.description,status:W.status,departmentHead:W.departmentHead,didNumber:W.didNumber,members:i.members},{headers:r}),console.log("Update response:",d),200!==d.status&&204!==d.status||(a(e.map(e=>e.id===s||e._id===s?{...e,...W}:e)),L({show:!0,message:'Department "'.concat(W.name,'" has been updated successfully.')}))}else{console.log("Creating department with data:",i);const s=b();if(console.log("Making POST request to: ".concat(s,"/api/departments")),d=await t.default.post("".concat(s,"/api/departments"),i,{headers:r}),console.log("Create response:",d),200===d.status||201===d.status){const s=d.data._id||d.data.id||Date.now(),t={id:s,_id:s,...i,createdDate:(new Date).toISOString().split("T")[0]};a([...e,t]),L({show:!0,message:'New department "'.concat(W.name,'" has been created successfully.')})}}oe(),ne(),setTimeout(()=>{L({show:!1,message:""})},5e3)}catch(t){console.error("Error when saving department:",t),t.response?console.error("Server response error:",{status:t.response.status,data:t.response.data,headers:t.response.headers}):t.request?console.error("No response from server:",t.request):console.error("Request setup error:",t.message),(0,u.PT)("Error saving department:",t),R("Failed to save department: ".concat(t.message||"Unknown error"))}else R("Department name is required")},children:[U?"Update":"Save"," Department"]})]})]}),(0,p.jsxs)(n.zS,{visible:I,onClose:de,children:[(0,p.jsx)(n.E4,{children:(0,p.jsx)(n.lb,{children:"Confirm Delete"})}),(0,p.jsxs)(n.Tc,{children:[H&&(0,p.jsx)(n.kj,{color:"danger",className:"mb-3",children:H}),D?(0,p.jsx)(n.kj,{color:"success",className:"mb-3",children:"Department deleted successfully!"}):(0,p.jsx)("p",{children:"Are you sure you want to delete this department? This action cannot be undone."})]}),(0,p.jsxs)(n.If,{children:[(0,p.jsx)(n.Q_,{color:"secondary",onClick:de,disabled:k,children:"Cancel"}),(0,p.jsxs)(n.Q_,{color:"danger",onClick:async()=>{if(w){E(!0),T("");try{const t=localStorage.getItem("authToken")||localStorage.getItem("token"),n=await s.e(3062).then(s.bind(s,13062)),r=b();console.log("Making DELETE request to: ".concat(r,"/api/departments/").concat(w));const o=await n.default.delete("".concat(r,"/api/departments/").concat(w),{headers:{Accept:"*/*","Content-Type":"application/json",Authorization:t?"Bearer ".concat(t):""}});console.log("Delete response:",o),a(e.filter(e=>e.id!==w&&e._id!==w)),M(!0),setTimeout(()=>{ne()},1e3),setTimeout(()=>{S(!1),_(null),M(!1)},1500)}catch(t){(0,u.PT)("Error deleting department:",t),T("An error occurred while deleting the department. Please try again.")}finally{E(!1)}}},disabled:k||D,children:[k?(0,p.jsx)(n.JT,{size:"sm",className:"me-2"}):null,"Delete"]})]})]})]})}},50323:function(e,a,s){s.d(a,{Z:function(){return t}});const t=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"]},71293:function(e,a,s){s.d(a,{x:function(){return t}});const t=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>"]}}]);