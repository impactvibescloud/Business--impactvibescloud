"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[944],{30944:function(e,s,a){a.r(s);var t=a(9950),l=a(2720),n=a(49911),r=a(66187),d=a(62146),i=a(44414);d.t1.register(d.E8,d.PP,d.kc,d.m_,d.s$,d.Bs);s.default=()=>{const[e,s]=(0,t.useState)([]),[a,d]=(0,t.useState)(!0),[c,o]=(0,t.useState)("weekly"),[h,u]=(0,t.useState)({}),m=localStorage.getItem("authToken");(0,t.useEffect)(()=>{m&&(0,l.H2)("/v1/user/details","GET").then(e=>{var s,a,t;u(e.user||(null===(s=e.data)||void 0===s?void 0:s.user)||(null===(a=e.user)||void 0===a?void 0:a.user)||(null===(t=e.user)||void 0===t?void 0:t.data)||e.data||{})}).catch(()=>u({}))},[m]),(0,t.useEffect)(()=>{if(null===h||void 0===h||!h.businessId)return;d(!0);(async()=>{try{const e=await(0,l.H2)("/performance/departments?businessId=".concat(h.businessId,"&period=").concat(c),"GET"),a=Array.isArray(e)?e:e.data||e.departments||[];s(a)}catch(e){s([])}finally{d(!1)}})()},[null===h||void 0===h?void 0:h.businessId,c,m]);const p={labels:e.map(e=>e.departmentName||e.name||e.departmentId),datasets:[{label:"Handled Calls",data:e.map(e=>e.handledCalls||0),backgroundColor:"rgba(75, 192, 192, 0.6)"},{label:"Logged Hours",data:e.map(e=>e.loggedHours||0),backgroundColor:"rgba(153, 102, 255, 0.6)"}]},x={labels:e.map(e=>e.departmentName||e.name||e.departmentId),datasets:[{label:"Handled Calls",data:e.map(e=>e.handledCalls||0),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#C9CBCF"]}]};return(0,i.jsxs)("div",{className:"department-performance-container",children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)("h2",{children:["Department Performance (",c.charAt(0).toUpperCase()+c.slice(1),")"]}),(0,i.jsx)("div",{style:{width:180},children:(0,i.jsxs)(n.MT,{size:"sm",value:c,onChange:e=>o(e.target.value),children:[(0,i.jsx)("option",{value:"today",children:"Today"}),(0,i.jsx)("option",{value:"weekly",children:"Weekly"}),(0,i.jsx)("option",{value:"monthly",children:"Monthly"}),(0,i.jsx)("option",{value:"yearly",children:"Yearly"})]})})]}),(0,i.jsx)(n.E$,{className:"mb-4",children:(0,i.jsx)(n.W6,{children:a?(0,i.jsx)(n.JT,{color:"primary"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",gap:24,justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap"},children:[(0,i.jsx)("div",{style:{flex:"1 1 520px",maxWidth:520,minWidth:300,height:320},children:(0,i.jsx)("div",{style:{height:"100%"},children:(0,i.jsx)(r.yP,{data:p,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})})}),(0,i.jsx)("div",{style:{flex:"0 1 260px",maxWidth:260,minWidth:200,height:320},children:(0,i.jsx)("div",{style:{height:"100%"},children:(0,i.jsx)(r.Fq,{data:x,options:{responsive:!0,maintainAspectRatio:!1}})})})]}),(0,i.jsxs)(n._v,{hover:!0,responsive:!0,className:"mt-4",children:[(0,i.jsx)(n.wV,{children:(0,i.jsxs)(n.YI,{children:[(0,i.jsx)(n.$s,{children:"Department Name"}),(0,i.jsx)(n.$s,{children:"Members"}),(0,i.jsx)(n.$s,{children:"Handled Calls"}),(0,i.jsx)(n.$s,{children:"Logged Hours"}),(0,i.jsx)(n.$s,{children:"Presence %"})]})}),(0,i.jsx)(n.jS,{children:e.map(e=>{var s,a,t,l;return(0,i.jsxs)(n.YI,{children:[(0,i.jsx)(n.cC,{children:e.departmentName}),(0,i.jsx)(n.cC,{children:null!==(s=e.membersCount)&&void 0!==s?s:"-"}),(0,i.jsx)(n.cC,{children:null!==(a=e.handledCalls)&&void 0!==a?a:0}),(0,i.jsx)(n.cC,{children:null!==(t=e.loggedHours)&&void 0!==t?t:0}),(0,i.jsx)(n.cC,{children:null!==(l=e.presencePercent)&&void 0!==l?l:"-"})]},e.departmentId||e._id||e.departmentName)})})]})]})})})]})}}}]);