"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[643],{975:function(e,a,n){n(9950);var t=n(81949),s=n(15053),i=n(32805),l=n(44429),r=n(32340),o=n(49079),c=n(52818),d=n(92737),m=n(88681),u=n(87744),h=n(23286),p=n(10113),g=n(73600),v=n(11280),b=n(55678),y=n(51902),f=n(83925),N=n(49911),x=n(44414);const j=[{component:N.g9,name:"Dashboard",to:"/dashboard",icon:(0,x.jsx)(t.Ay,{icon:v.I,customClassName:"nav-icon"}),group:""},{component:N.g9,name:"Agents",icon:(0,x.jsx)(t.Ay,{icon:c.Q,customClassName:"nav-icon"}),to:"/branch",group:"Agents"},{component:N.g9,name:"Department",icon:(0,x.jsx)(t.Ay,{icon:s.d,customClassName:"nav-icon"}),to:"/department",group:"Department"},{component:N.g9,name:"Department Performance",icon:(0,x.jsx)(t.Ay,{icon:l.H,customClassName:"nav-icon"}),to:"/department-performance",group:"Reports & Analytics",feature:"advancedReporting"},{component:N.g9,name:"Call Dispositions",icon:(0,x.jsx)(t.Ay,{icon:l.H,customClassName:"nav-icon"}),to:"/reports/call-dispositions",group:"Data & Analytics",feature:"advancedDispositions"},{component:N.g9,name:"Reports & Analytics",icon:(0,x.jsx)(t.Ay,{icon:f.e,customClassName:"nav-icon"}),to:"/reports-analytics",group:"Reports & Analytics",feature:"analytics"},{component:N.g9,name:"Agent Performance",icon:(0,x.jsx)(t.Ay,{icon:h.g,customClassName:"nav-icon"}),to:"/agent-performance",group:"Reports & Analytics",feature:"advancedReporting"},{component:N.g9,name:"Call Logs",icon:(0,x.jsx)(t.Ay,{icon:d.B,customClassName:"nav-icon"}),to:"/callogs",group:"Call Logs",feature:"callRecording"},{component:N.g9,name:"Call Uses",icon:(0,x.jsx)(t.Ay,{icon:b.S,customClassName:"nav-icon"}),to:"/calluses",group:"Call Logs"},{component:N.g9,name:"Call Monitor",icon:(0,x.jsx)(t.Ay,{icon:y.q,customClassName:"nav-icon"}),to:"/callmonitor",group:"Call Logs"},{component:N.g9,name:"Call Settings",icon:(0,x.jsx)(t.Ay,{icon:g.e,customClassName:"nav-icon"}),to:"/call-settings",group:"Settings"},{component:N.g9,name:"IVR Management",icon:(0,x.jsx)(t.Ay,{icon:r.k,customClassName:"nav-icon"}),to:"/ivr-management",group:"Call Logs",feature:"ivrManagement"},{component:N.g9,name:"Virtual Numbers",icon:(0,x.jsx)(t.Ay,{icon:p.L,customClassName:"nav-icon"}),to:"/virtual-numbers",group:"Virtual Numbers"},{component:N.g9,name:"Contacts",icon:(0,x.jsx)(t.Ay,{icon:h.g,customClassName:"nav-icon"}),to:"/contacts",group:"Contacts"},{component:N.g9,name:"Contact Lists",icon:(0,x.jsx)(t.Ay,{icon:o.H,customClassName:"nav-icon"}),to:"/contactlists",group:"Contact Lists"},{component:N.g9,name:"Audio Campaign",icon:(0,x.jsx)(t.Ay,{icon:i.X,customClassName:"nav-icon"}),to:"/campaigns/audio",group:"Campaigns",feature:"bulkOperations"},{component:N.g9,name:"Billing",icon:(0,x.jsx)(t.Ay,{icon:m.T,customClassName:"nav-icon"}),to:"/billing",group:"Billing"},{component:N.g9,name:"Support Tickets",icon:(0,x.jsx)(t.Ay,{icon:u.w,customClassName:"nav-icon"}),to:"/tickets",group:"Support",feature:"ticketing"}];a.A=j},81240:function(e,a,n){n.r(a),n.d(a,{default:function(){return Da}});var t=n(9950),s=n(49911),i=n(26910),l=n(4695),r=n.n(l),o=n(2720),c=n(44414);var d=()=>{const[e,a]=(0,t.useState)(""),[n,l]=(0,t.useState)(""),[d,m]=(0,t.useState)(""),[u,h]=(0,t.useState)([]),[p,g]=(0,t.useState)(!1),[v,b]=(0,t.useState)(""),[y,f]=(0,t.useState)(null),[N,x]=(0,t.useState)(null),[j,A]=(0,t.useState)(!1),[C,P]=(0,t.useState)(0),S=(0,t.useRef)(null),z=(0,t.useRef)(null),[w,E]=(0,t.useState)([]),[D,I]=(0,t.useState)(!1),[k,O]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{const e=await(0,o.H2)("/v1/user/details","GET"),a=e.user||e.data||e;a&&a.businessId&&l(a.businessId)}catch(e){console.warn("Could not fetch user details for businessId")}})()},[]),(0,t.useEffect)(()=>{(async()=>{if(n){g(!0);try{const e=await(0,o.H2)("/numbers/assigned-to/".concat(n),"GET"),a=e.data||e.numbers||e||[],t=(Array.isArray(a)?a:[]).map(e=>({id:e._id||e.id,number:e.number||e}));h(t),!d&&t.length>0&&m(t[0].number)}catch(e){console.error("Failed to fetch DID numbers",e)}finally{g(!1)}}})()},[n]),(0,t.useEffect)(()=>{n&&T()},[n]);const T=async()=>{if(n){I(!0);try{const e=await(0,o.H2)("/campaigns?businessId=".concat(n),"GET");let a=e;e&&e.data&&void 0!==e.data.data?a=e.data:e&&e.success&&void 0!==e.data&&(a=e);const t=a.data||a.campaigns||a.results||a||[];E(Array.isArray(t)?t:[])}catch(e){console.error("Failed to fetch campaigns",e)}finally{I(!1)}}},R=localStorage.getItem("authToken");return(0,c.jsxs)("div",{className:"p-3",children:[(0,c.jsx)(s.E$,{children:(0,c.jsxs)(s.W6,{children:[(0,c.jsxs)(s.sK,{className:"align-items-center mb-3",children:[(0,c.jsxs)(s.UF,{children:[(0,c.jsx)("h3",{children:"Audio Campaigns"}),(0,c.jsx)("p",{className:"text-muted",children:"Create and manage your audio campaigns here."})]}),(0,c.jsx)(s.UF,{className:"text-end",children:(0,c.jsx)(s.Q_,{color:"primary",onClick:()=>O(!0),children:"New Campaign"})})]}),(0,c.jsxs)(s.zS,{visible:k,onClose:()=>O(!1),backdrop:"static",children:[(0,c.jsx)(s.E4,{closeButton:!0,children:(0,c.jsx)(s.lb,{children:"New Audio Campaign"})}),(0,c.jsxs)(s.Tc,{children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"campaignName",children:"Campaign Name"}),(0,c.jsx)(s.OG,{id:"campaignName",value:e,onChange:e=>a(e.target.value),placeholder:"Enter audio campaign name"})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"didNumber",children:"DID Number"}),(0,c.jsxs)(s.MT,{id:"didNumber",value:d,onChange:e=>m(e.target.value),"aria-label":"Select DID Number",children:[(0,c.jsx)("option",{value:"",children:"Select DID Number"}),p?(0,c.jsx)("option",{disabled:!0,children:"Loading..."}):u.map(e=>(0,c.jsx)("option",{value:e.number,children:e.number},e.id))]}),(0,c.jsx)(s.a5,{className:"text-muted",children:"Destination DID number for outbound calls."})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"scheduledAt",children:"Schedule (UTC)"}),(0,c.jsx)(s.OG,{id:"scheduledAt",type:"datetime-local",value:v,onChange:e=>b(e.target.value)}),(0,c.jsx)(s.a5,{className:"text-muted",children:"Set scheduled start time for the campaign."})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"numbersFile",children:"Contacts File (CSV/XLSX)"}),(0,c.jsx)(s.OG,{type:"file",id:"numbersFile",accept:".csv,.xls,.xlsx",onChange:e=>{var a;return f((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)},ref:S})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)(s.A6,{htmlFor:"audioFile",children:"Audio File (optional)"}),(0,c.jsx)(s.OG,{type:"file",id:"audioFile",accept:"audio/*",onChange:e=>{var a;return x((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)},ref:z})]}),j&&(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsxs)(s.fZ,{value:C,children:[C,"%"]})})]}),(0,c.jsxs)(s.If,{children:[(0,c.jsx)(s.Q_,{color:"secondary",onClick:()=>O(!1),disabled:j,children:"Cancel"}),(0,c.jsx)(s.Q_,{color:"primary",onClick:async()=>{await(async()=>{if(!e||!n||!d||!v)return void r().fire({icon:"warning",title:"Missing fields",text:"Please fill name, business, DID and schedule."});if(!y)return void r().fire({icon:"warning",title:"Missing file",text:"Please upload contacts CSV/XLSX file."});const t=new FormData;t.append("name",e),t.append("businessId",n),t.append("didNumber",d);const s=v?new Date(v).toISOString():"";t.append("scheduledAt",s),t.append("file",y),N&&t.append("audio",N),A(!0),P(0);try{var l;const e="".concat((0,o.vo)(),"/api/campaigns/upload"),n=await i.A.post(e,t,{headers:{Authorization:"Bearer ".concat(R),"Content-Type":"multipart/form-data"},onUploadProgress:e=>{e.total&&P(Math.round(100*e.loaded/e.total))}});console.log("campaign upload response",n.data),r().fire({icon:"success",title:"Campaign Created",text:(null===(l=n.data)||void 0===l?void 0:l.message)||"Campaign uploaded successfully"}),a(""),m(""),b(""),f(null),x(null),S.current&&(S.current.value=""),z.current&&(z.current.value="");try{await T()}catch(h){}return!0}catch(p){var c,u;console.error("Upload failed",p);const e=(null===p||void 0===p||null===(c=p.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message)||p.message||"Upload failed";return r().fire({icon:"error",title:"Upload Failed",text:e}),!1}finally{A(!1),P(0)}})()&&O(!1)},disabled:j,children:j?"Uploading...":"Create Campaign"})]})]})]})}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("h5",{children:"Campaigns"}),D?(0,c.jsx)("div",{className:"py-3 text-center",children:(0,c.jsx)(s.JT,{})}):0===w.length?(0,c.jsx)("p",{className:"text-muted",children:"No campaigns found for this business."}):(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Name"}),(0,c.jsx)("th",{children:"DID"}),(0,c.jsx)("th",{children:"Numbers"}),(0,c.jsx)("th",{children:"Scheduled"}),(0,c.jsx)("th",{children:"Completed"}),(0,c.jsx)("th",{children:"Status"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:w.map(e=>{var a;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name||e.title||"Untitled Campaign"}),(0,c.jsx)("td",{children:e.didNumber||e.did||"-"}),(0,c.jsx)("td",{children:Array.isArray(e.numbers)?e.numbers.length:e.numbers?e.numbers:"-"}),(0,c.jsx)("td",{children:e.scheduledAt?new Date(e.scheduledAt).toLocaleString():"-"}),(0,c.jsx)("td",{children:null!==(a=e.result)&&void 0!==a&&a.completedAt?new Date(e.result.completedAt).toLocaleString():"-"}),(0,c.jsx)("td",{children:e.status||e.state||"N/A"}),(0,c.jsx)("td",{children:(0,c.jsx)(s.Q_,{color:"danger",size:"sm",onClick:()=>(async e=>{const a=e._id||e.id;if(!a)return void r().fire({icon:"error",title:"Delete Failed",text:"Invalid campaign id"});if((await r().fire({title:"Delete campaign?",text:'Are you sure you want to delete "'.concat(e.name||e.title||"this campaign",'"? This cannot be undone.'),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed)try{await(0,o.H2)("/campaigns/".concat(a),"DELETE"),r().fire({icon:"success",title:"Deleted",text:"Campaign deleted successfully"}),await T()}catch(s){var n,t;console.error("Delete failed",s);const e=(null===s||void 0===s||null===(n=s.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||s.message||"Delete failed";r().fire({icon:"error",title:"Delete Failed",text:e})}})(e),className:"me-2",children:"Delete"})})]},e._id||e.id||e.name)})})]})})]})]})};const m=t.lazy(()=>n.e(8213).then(n.bind(n,8213))),u=t.lazy(()=>n.e(617).then(n.bind(n,60617))),h=t.lazy(()=>Promise.all([n.e(6187),n.e(4311)]).then(n.bind(n,14311))),p=t.lazy(()=>n.e(1703).then(n.bind(n,1703))),g=t.lazy(()=>n.e(5772).then(n.bind(n,35772))),v=t.lazy(()=>n.e(3749).then(n.bind(n,33749))),b=t.lazy(()=>n.e(7582).then(n.bind(n,17582))),y=t.lazy(()=>Promise.all([n.e(4151),n.e(8664)]).then(n.bind(n,88664))),f=t.lazy(()=>n.e(8215).then(n.bind(n,8215))),N=t.lazy(()=>n.e(3507).then(n.bind(n,53507))),x=t.lazy(()=>n.e(9614).then(n.bind(n,19614))),j=t.lazy(()=>Promise.all([n.e(5783),n.e(9540)]).then(n.bind(n,89540))),A=t.lazy(()=>n.e(8010).then(n.bind(n,18010))),C=t.lazy(()=>n.e(6106).then(n.bind(n,36106))),P=t.lazy(()=>n.e(3349).then(n.bind(n,13349))),S=t.lazy(()=>n.e(2998).then(n.bind(n,42998))),z=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(525)]).then(n.bind(n,40525))),w=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3806),n.e(2579)]).then(n.bind(n,32579))),E=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3806),n.e(4386)]).then(n.bind(n,94386))),D=t.lazy(()=>n.e(7313).then(n.bind(n,7313))),I=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6820),n.e(3654),n.e(8111)]).then(n.bind(n,68111))),k=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(2179)]).then(n.bind(n,52179))),O=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1397),n.e(2296)]).then(n.bind(n,2296))),T=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1397),n.e(7020)]).then(n.bind(n,27020))),R=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1397),n.e(4693)]).then(n.bind(n,14693))),L=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1754)]).then(n.bind(n,61754))),M=t.lazy(()=>n.e(9184).then(n.bind(n,29184))),B=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(8645),n.e(615)]).then(n.bind(n,20615))),F=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(8645),n.e(76)]).then(n.bind(n,76))),_=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(899),n.e(5277),n.e(247),n.e(7304),n.e(5270)]).then(n.bind(n,45270))),U=t.lazy(()=>n.e(9376).then(n.bind(n,19376))),W=t.lazy(()=>n.e(6085).then(n.bind(n,36085))),V=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(1249)]).then(n.bind(n,31249))),H=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4697)]).then(n.bind(n,24697))),G=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(2571)]).then(n.bind(n,42571))),K=t.lazy(()=>n.e(9473).then(n.bind(n,49473))),q=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(4301)]).then(n.bind(n,24301))),X=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(4301)]).then(n.bind(n,24301))),J=t.lazy(()=>Promise.all([n.e(7187),n.e(6385),n.e(2319)]).then(n.bind(n,32319))),Q=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(8396)]).then(n.bind(n,8396))),$=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(8199)]).then(n.bind(n,28199))),Y=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(2748)]).then(n.bind(n,22748))),Z=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(3632)]).then(n.bind(n,3632))),ee=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3654),n.e(860),n.e(7307)]).then(n.bind(n,87307))),ae=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3722),n.e(6002),n.e(2257)]).then(n.bind(n,32257))),ne=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6820),n.e(4549)]).then(n.bind(n,14549))),te=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6820),n.e(5185)]).then(n.bind(n,35185))),se=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4753),n.e(1613)]).then(n.bind(n,36633))),ie=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4753),n.e(5354)]).then(n.bind(n,46822))),le=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(1404)]).then(n.bind(n,61404))),re=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3722),n.e(6008),n.e(6002),n.e(4381)]).then(n.bind(n,34381))),oe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3722),n.e(6008),n.e(6002),n.e(4497)]).then(n.bind(n,54497))),ce=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7939)]).then(n.bind(n,50320))),de=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(2985)]).then(n.bind(n,22985))),me=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4753),n.e(6601)]).then(n.bind(n,38085))),ue=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(4753),n.e(1734),n.e(3158)]).then(n.bind(n,53158))),he=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(8406)]).then(n.bind(n,48406))),pe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(320)]).then(n.bind(n,30320))),ge=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(1244),n.e(2816)]).then(n.bind(n,82816))),ve=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(1244),n.e(1621)]).then(n.bind(n,81621))),be=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(5384)]).then(n.bind(n,5384))),ye=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(1209)]).then(n.bind(n,61209))),fe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(5277),n.e(3722),n.e(6008),n.e(4169),n.e(3368),n.e(5097),n.e(8614)]).then(n.bind(n,88614))),Ne=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(899),n.e(5277),n.e(3722),n.e(6008),n.e(4169),n.e(3368),n.e(4620)]).then(n.bind(n,24620))),xe=t.lazy(()=>n.e(4946).then(n.bind(n,94946))),je=t.lazy(()=>n.e(351).then(n.bind(n,80351))),Ae=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(3975)]).then(n.bind(n,13975))),Ce=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(9077),n.e(5997)]).then(n.bind(n,3128))),Pe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(9077),n.e(4988)]).then(n.bind(n,52459))),Se=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(9466)]).then(n.bind(n,49466))),ze=t.lazy(()=>n.e(5002).then(n.bind(n,85002))),we=t.lazy(()=>n.e(8723).then(n.bind(n,78723))),Ee=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(1783)]).then(n.bind(n,61783))),De=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(247),n.e(1111)]).then(n.bind(n,11347))),Ie=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(2474)]).then(n.bind(n,32474))),ke=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6385),n.e(899),n.e(5277),n.e(247),n.e(7304),n.e(9263)]).then(n.bind(n,39263))),Oe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(7614),n.e(6385),n.e(9567),n.e(8532),n.e(1108)]).then(n.bind(n,81108))),Te=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6379),n.e(9077),n.e(6990)]).then(n.bind(n,36990))),Re=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(8772)]).then(n.bind(n,38772))),Le=t.lazy(()=>n.e(9316).then(n.bind(n,89316))),Me=t.lazy(()=>n.e(875).then(n.bind(n,20875))),Be=t.lazy(()=>n.e(1559).then(n.bind(n,11559))),Fe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(9079)]).then(n.bind(n,69079))),_e=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(6385),n.e(4753),n.e(6847)]).then(n.bind(n,6847))),Ue=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6507),n.e(2326)]).then(n.bind(n,32326))),We=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(6507),n.e(1651)]).then(n.bind(n,81651))),Ve=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(7614),n.e(6385),n.e(9567),n.e(5277),n.e(924)]).then(n.bind(n,10924))),He=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7614),n.e(899),n.e(6173),n.e(4887)]).then(n.bind(n,14887))),Ge=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(5975)]).then(n.bind(n,85975))),Ke=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(899),n.e(5277),n.e(6379),n.e(5871),n.e(8765)]).then(n.bind(n,58765))),qe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(7614),n.e(899),n.e(6379),n.e(5871),n.e(290)]).then(n.bind(n,40290))),Xe=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(4753),n.e(6820),n.e(8447)]).then(n.bind(n,48447))),Je=t.lazy(()=>Promise.all([n.e(7187),n.e(9271),n.e(7930),n.e(7138),n.e(9925),n.e(6385),n.e(6379),n.e(5871),n.e(3055)]).then(n.bind(n,83055))),Qe=t.lazy(()=>n.e(7945).then(n.bind(n,77945))),$e=t.lazy(()=>n.e(8350).then(n.bind(n,78350))),Ye=t.lazy(()=>n.e(7009).then(n.bind(n,67009))),Ze=t.lazy(()=>n.e(9879).then(n.bind(n,19879))),ea=t.lazy(()=>n.e(3944).then(n.bind(n,93944)));var aa=[{path:"/dashboard",name:"Dashboard",element:h,navName:""},{path:"/tickets",name:"Support Tickets",element:u,navName:"Support"},{path:"/change_password",name:"Change Password",element:m,navName:""},{path:"/profile/edit",name:"Edit Profile",element:p,navName:""},{path:"/products",name:"products",element:z,navName:"Product Management"},{path:"/product/add",name:"Add products",element:w,navName:"Product Management"},{path:"/product/add/multiple",name:"Add products",element:ze,navName:"Product Management"},{path:"/product/edit/:id",name:"Edit products",element:E,navName:"Product Management"},{path:"/product/view/:id",name:"view products",element:D,navName:"Product Management"},{path:"/categories",name:"Categories",element:q,navName:"Product Management"},{path:"/brands",name:"Brands",element:X,navName:"Product Management"},{path:"/product-manual",name:"Product Manual",element:I,navName:"Product Management"},{path:"/product-manual/view/:id",name:"Product Manual",element:Ee,navName:"Product Management"},{path:"/task/today",name:"Today's Tasks",element:Re,navName:"Tasks"},{path:"/reports/opening-inventory",name:"Reports Opening Inventory",element:Me,navName:"Reports"},{path:"/reports/stock",name:"Reports Stock",element:Be,navName:"Reports"},{path:"/franchisee",name:"PrincipalDistributor",element:ye,navName:"PrincipalDistributor"},{path:"/franchisee/:_id",name:"PrincipalDistributor",element:fe,navName:"PrincipalDistributor"},{path:"/add-principal-distributor",name:"PrincipalDistributor",element:Ne,navName:"PrincipalDistributor"},{path:"/add-principal-distributor/multiple",name:"PrincipalDistributor",element:we,navName:"PrincipalDistributor"},{path:"/view/mappedretaildistributor/:id",name:"view retail distributor",element:De,navName:"PrincipalDistributor"},{path:"/menu",name:"Menu",element:_e,navName:"Menu"},{path:"/add-menu",name:"Menu",element:Ue,navName:"Menu"},{path:"/edit-item/:id",name:"Menu",element:We,navName:"Menu"},{path:"/menu-categories",name:"Categories",element:Ge,navName:"Menu"},{path:"/order-history",name:"Order history",element:Ve,navName:"Order history"},{path:"/order-history/:id",name:"Order history",element:He,navName:"Order history"},{path:"/videos",name:"videos",element:Ke,navName:"Videos"},{path:"/reports/call-dispositions",name:"Call Dispositions",element:C,navName:"Data & Analytics"},{path:"/users-address/view",name:"Customers",element:ae},{path:"/franchisee/products/:id",name:"Outlet Products",element:qe},{path:"/campaigns/audio",name:"Audio Campaigns",element:d,navName:"Campaigns"},{path:"/registerImage",name:"RegisterImage",element:ne,navName:"Website Related"},{path:"/loginImage",name:"LoginImage",element:te,navName:"Website Related"},{path:"/testimonials",name:"Testimonials",element:H,navName:"Website Related"},{path:"/currency",name:"Currency",element:Se,navName:"Settings"},{path:"/testimonial/new",name:"AddTestimonial",element:G,navName:"Website Related"},{path:"/testimonial/view/:id",name:"ViewTestimonial",element:K,navName:"Website Related"},{path:"/testimonial/edit/:id",name:"EditTestimonial",element:he,navName:"Website Related"},{path:"/seo/request/new",name:"seo Request",element:V,navName:"Website Related"},{path:"/content",name:"Website Related",element:J,navName:"Website Related"},{path:"/content/terms-and-conditions",name:"Website Related",element:$,navName:"Website Related"},{path:"/content/privacy-policy",name:"Website Related",element:Q,navName:"Website Related"},{path:"/content/shipping-policy",name:"Website Related",element:Y,navName:"Website Related"},{path:"/content/refund-policy",name:"Website Related",element:Z,navName:"Website Related"},{path:"/content/about-us",name:"Website Related",element:ee,navName:"Website Related"},{path:"/orders/new",name:"New Orders",element:k,navName:"Orders"},{path:"/order/add",name:"add Order",element:B,navName:"Orders"},{path:"/orders/edit/:id",name:"Edit Order",element:F,navName:"Orders"},{path:"/orders/:status/:id",name:"View Order",element:_,navName:"Orders"},{path:"/orders/invoice/:status/:id",name:"View Invoice ",element:ke,navName:"Orders"},{path:"/orders/processing",name:"Processing Orders",element:O,navName:"Orders"},{path:"/orders/dispatched",name:"Dispatched Orders",element:T,navName:"Orders"},{path:"/orders/delivered",name:"Delivered Orders",element:R,navName:"Orders"},{path:"/orders/pending",name:"Pending Orders",element:Ie,navName:"Orders"},{path:"/orders/cancelled",name:"Cancelled Orders",element:L,navName:"Orders"},{path:"/orders/returned",name:"Returned Orders",element:M,navName:"Orders"},{path:"/inStoreCashOrders/new",name:"In Store Cash Orders",element:xe,navName:"Orders"},{path:"/InStoreQRCodeOrders/new",name:"In Store QR Code Orders",element:je,navName:"Orders"},{path:"/announcement",name:"Announcment",element:Oe,navName:"Announcment"},{path:"/announcement/create",name:"Announcment",element:Te,navName:"Announcment"},{path:"/socialmedia",name:"Social Media",element:g,navName:"Configuration"},{path:"/application/name",name:"ApplicationName",element:U,navName:"Configuration"},{path:"/copyright/message",name:"Copyright Message",element:W,navName:"Configuration"},{path:"/address",name:"Address",element:v,navName:"Configuration"},{path:"/logo",name:"Logo",element:b,navName:"Configuration"},{path:"/mobile-app",name:"MobileApp",element:Le,navName:"Configuration"},{path:"/affiliate/coupons",name:"Coupon",element:se,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates",name:"Affiliate",element:ie,navName:"Affiliate & Coupons"},{path:"/affiliate/coupons/create",name:"Create Coupon",element:le,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates/create",name:"Create Affiliate",element:re,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates/edit/:id",name:"Edit Affiliate",element:oe,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates/pay/:id",name:"Pay Affiliate",element:de,navName:"Affiliate & Coupons"},{path:"/affiliate/affiliates/history/:id",name:"Pay Affiliate",element:me,navName:"Affiliate & Coupons"},{path:"/affiliate/coupons/edit/:id",name:"Edit Coupon",element:ce,navName:"Affiliate & Coupons"},{path:"/affiliate/coupons/history/:id",name:"Edit Coupon",element:ue,navName:"Affiliate & Coupons"},{path:"/blogs",name:"Blogs",element:pe,navName:"Blog"},{path:"/blogs/create",name:"Blogs",element:ge,navName:"Blog"},{path:"/blog/edit/:id",name:"Blogs",element:ve,navName:"Blog"},{path:"/blog/view/:id",name:"Blogs",element:be,navName:"Blog"},{path:"/employee",name:"Employee",element:Ae,navName:"Employees & Access"},{path:"/add-employee",name:"Employee",element:Ce,navName:"Employees & Access"},{path:"edit-employee/:id",name:"Employee",element:Pe,navName:"Employees & Access"},{path:"/templates",name:"Templates",element:f,navName:"Templates"},{path:"transporter",name:"Transporter",element:Fe,navName:"Employees & Access"},{path:"/equipment",exact:!0,name:"Equipment",element:Xe},{path:"franchisee/equipment/:id",name:"Add Equipment",element:Je,navName:"Employees & Access"},{path:"/branch",name:"Branch",element:Qe,navName:"Branch"},{path:"/contactlists",name:"Contact Lists",element:t.lazy(()=>Promise.all([n.e(5271),n.e(6231)]).then(n.bind(n,66231))),navName:"Contact Lists"},{path:"/contacts",name:"Contacts",element:t.lazy(()=>n.e(2141).then(n.bind(n,62141))),navName:"Contacts"},{path:"/callogs",name:"Call Logs",element:$e,navName:"Call Logs"},{path:"/calluses",name:"Call Uses",element:Ye,navName:"Call Uses"},{path:"/callmonitor",element:y,navName:"Call Monitor",navName:"Call Logs"},{path:"/ivr-management",name:"IVR Management",element:ea,navName:"Call Logs"},{path:"/call-settings",name:"Call Settings",element:Ze,navName:"Settings"},{path:"/department",name:"Department",element:S,navName:"Department"},{path:"/users-teams",name:"Users & Teams",element:N,navName:"Users & Teams"},{path:"/virtual-numbers",name:"Virtual Numbers",element:x,navName:"Virtual Numbers"},{path:"/billing",name:"Billing",element:j,navName:"Billing"},{path:"/reports-analytics",name:"Reports & Analytics",element:A,navName:"Reports & Analytics"},{path:"/settings",name:"Settings",element:P,navName:"Settings"},{path:"/agent-performance",name:"Agent Performance",element:t.lazy(()=>Promise.all([n.e(6187),n.e(1775)]).then(n.bind(n,1775))),navName:"Reports & Analytics"},{path:"/department-performance",name:"Department Performance",element:t.lazy(()=>Promise.all([n.e(6187),n.e(944)]).then(n.bind(n,30944))),navName:"Reports & Analytics"}];var na=n(28429);class ta extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null,isChunkLoadError:!1}}static getDerivedStateFromError(e){const a=!!(e&&e.message&&-1!==e.message.indexOf("Loading chunk")||e&&"ChunkLoadError"===e.name);return{hasError:!0,error:e,isChunkLoadError:a}}componentDidCatch(e,a){console.error("ErrorBoundary caught an error:",e,a);try{if(this.state.isChunkLoadError){const e="chunkReload:".concat(window.location.pathname);if(!sessionStorage.getItem(e)){sessionStorage.setItem(e,Date.now());const a=window.location.search?"&":"?",n=window.location.pathname+window.location.search+a+"r="+Date.now();window.location.replace(n)}}}catch(n){console.warn("ErrorBoundary recovery failed",n)}}render(){return this.state.hasError?(0,c.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("h4",{children:"Something went wrong"}),(0,c.jsx)("p",{className:"text-muted",children:"Please refresh the page or try again later."}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Refresh Page"})]})}):this.props.children}}var sa=ta,ia=n(11031);n(35887);const la=()=>{const[e,a]=(0,t.useState)(null),[n,l]=(0,t.useState)(!0),r=(0,ia.g)();(0,t.useEffect)(()=>{(async()=>{if(localStorage.getItem("authToken"))try{let e=await i.A.get("/api/v1/user/details",{headers:{Authorization:"Bearer ".concat(r)}});const n=null===e||void 0===e?void 0:e.data;null!==n&&void 0!==n&&n.success&&null!==n&&void 0!==n&&n.user?a(n.user):a({role:"business_admin",accessTo:{}})}catch(e){console.warn("User API failed, using default admin access:",e.message),a({role:"business_admin",accessTo:{}})}else a(null),l(!1);l(!1)})()},[]);const[o,d]=(0,t.useState)(aa);return n?(0,c.jsxs)(s.T5,{lg:!0,className:"text-center py-5",children:[(0,c.jsx)(s.JT,{color:"primary"}),(0,c.jsx)("div",{className:"mt-2",children:"Loading..."})]}):(0,c.jsx)(sa,{children:(0,c.jsx)(s.T5,{lg:!0,children:(0,c.jsx)(t.Suspense,{fallback:(0,c.jsx)(s.JT,{color:"primary"}),children:(0,c.jsxs)(na.BV,{children:[o.map((a,n)=>{var t;return"business_admin"===(null===e||void 0===e?void 0:e.role)||!a.navName||""===(null===(t=a.navName)||void 0===t?void 0:t.trim())||(null===e||void 0===e?void 0:e.accessTo)&&!0===(null===e||void 0===e?void 0:e.accessTo[null===a||void 0===a?void 0:a.navName])?a.element&&(0,c.jsx)(na.qh,{path:a.path,exact:a.exact,name:a.name,element:(0,c.jsx)(a.element,{})},n):null}),(0,c.jsx)(na.qh,{path:"/",element:(0,c.jsx)(na.C5,{to:"dashboard",replace:!0})})]})})})})};var ra=t.memo(la);var oa=n(27081),ca=n(81949);var da=n(6536),ma=n.n(da);var ua=n(42074);const ha=e=>{let{items:a}=e;const n=(0,na.zy)();let i=!1,l=!1,r=!1,o=!1,d=!1,m=!1;const u=(e,a,n)=>(0,c.jsxs)(c.Fragment,{children:[a&&(0,c.jsx)("span",{className:"nav-icon-wrapper","aria-hidden":!0,children:a}),e&&(0,c.jsx)("span",{style:{color:"#1f2937",display:"inline-block"},children:e}),n&&(0,c.jsx)(s.$X,{color:n.color,className:"ms-auto",style:{color:"#1f2937"},children:n.text})]}),h=(e,a)=>{const{component:n,name:s,badge:i,icon:l,...r}=e,o=n,c=Object.assign({},r.style||{},{color:"#1f2937"}),d=["app-sidebar-link",r.className].filter(Boolean).join(" ");return(0,t.createElement)(o,{...r.to&&!r.items&&{component:ua.k2,activeclassname:"active"},key:"navitem-".concat(a),...r,style:c,className:d},u(s,l,i))},p=(e,a)=>{var t;const{component:s,name:i,icon:l,to:r,...o}=e,d=s,m=Object.assign({},o.style||{},{color:"#1f2937"}),g=["app-sidebar-group",o.className].filter(Boolean).join(" ");return(0,c.jsx)(d,{idx:String(a),toggler:u(i,l),visible:n.pathname.startsWith(r),...o,style:m,className:g,children:null===(t=e.items)||void 0===t?void 0:t.map((e,a)=>e.items?p(e,"".concat(a,"-").concat(e.name)):h(e,"".concat(a,"-").concat(e.name)))},"navgroup-".concat(a,"-").concat(i))},g=[];return a&&a.length&&a.forEach((e,a)=>{i||"Agent Performance"!==e.name&&"Department Performance"!==e.name||(i=!0,g.push((0,c.jsx)("div",{className:"sidebar-section",children:(0,c.jsx)("span",{className:"sidebar-section-label",children:"DATA & ANALYTICS"})},"section-data-analytics"))),l||"Agents"!==e.name||(l=!0,g.push((0,c.jsx)("div",{className:"sidebar-section",children:(0,c.jsx)("span",{className:"sidebar-section-label",children:"AGENT & DEPARTMENT"})},"section-agent-dept"))),r||"Call Settings"!==e.name||(r=!0,g.push((0,c.jsx)("div",{className:"sidebar-section",children:(0,c.jsx)("span",{className:"sidebar-section-label",children:"CALL SETTINGS"})},"section-call-settings"))),o||"Virtual Numbers"!==e.name&&"Contacts"!==e.name||(o=!0,g.push((0,c.jsx)("div",{className:"sidebar-section",children:(0,c.jsx)("span",{className:"sidebar-section-label",children:"CONTACT & VIRTUAL NUMBERS"})},"section-contact"))),m||"Audio Cmpaign"!==e.name||(m=!0,g.push((0,c.jsx)("div",{className:"sidebar-section",children:(0,c.jsx)("span",{className:"sidebar-section-label",children:"CAMPAIGNS"})},"section-campaigns"))),d||"Billing"!==e.name||(d=!0,g.push((0,c.jsx)("div",{className:"sidebar-section",children:(0,c.jsx)("span",{className:"sidebar-section-label",children:"MORE SETTINGS"})},"section-more-settings"))),g.push(e.items?p(e,"main-".concat(a,"-").concat(e.name)):h(e,"main-".concat(a,"-").concat(e.name)))}),(0,c.jsx)(c.Fragment,{children:g})};var pa=n(63344);n(36762);const ga=(e,a)=>!(!e||"object"!==typeof e)&&!!e[a],va=(e,a)=>a&&0!==Object.keys(a).length?e.filter(e=>!e.feature||ga(a,e.feature)):e,ba=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Array.isArray(a)||0===a.length)return va(e,n);const t=e=>e.reduce((e,s)=>{if(s.items&&Array.isArray(s.items)){const a=t(s.items);return a.length>0&&e.push({...s,items:a}),e}const i=(l=s.to,a.find(e=>e&&e.to===l));var l;return i?(i.enabled&&e.push(s),e):s.feature?(ga(n,s.feature)&&e.push(s),e):(e.push(s),e)},[]);return t(e)};var ya=n(975);const fa=()=>{const e=(0,oa.wA)(),a=(0,oa.d4)(e=>e.sidebarUnfoldable),n=(0,oa.d4)(e=>e.coreUI.sidebarShow),l=Boolean(n),r=Boolean(a),[o,d]=(0,t.useState)(()=>{try{return"true"===localStorage.getItem("sidebar-collapsed")}catch(e){return!1}}),[m,u]=(0,t.useState)(ya.A),[h,p]=(0,t.useState)(null),[g,v]=(0,t.useState)({}),[b,y]=(0,t.useState)([]),[f,N]=(0,t.useState)(!1),x=(0,ia.g)();(0,t.useEffect)(()=>{(async()=>{if(localStorage.getItem("authToken"))try{const e=(await i.A.get("/api/v1/user/details",{headers:{Authorization:"Bearer ".concat(x)}})).data;e.success&&e.user&&e.user.role&&("business_admin"===e.user.role||"Employee"===e.user.role)?p(e.user):p(!1)}catch(e){p(!1),console.log(e)}else p(!1)})()},[]),(0,t.useEffect)(()=>{(async()=>{if(!h)return;const e=h.businessId||localStorage.getItem("businessId"),a=localStorage.getItem("authToken");if(!e||!a)return void console.warn("Cannot fetch features: missing businessId or token");N(!0);const n=await(async(e,a)=>{try{if(!e)return console.warn("featureCheck: No businessId provided"),{featuresMap:{},featuresMenu:[]};const n=await i.A.get("/api/features/check/".concat(e),{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(n.data&&n.data.success){return{featuresMap:n.data.features||n.data.data||{},featuresMenu:n.data.featuresMenu||[]}}return{featuresMap:{},featuresMenu:[]}}catch(n){return console.error("Failed to fetch business features:",n),{featuresMap:{},featuresMenu:[]}}})(e,a),t=n.featuresMap||{},s=Array.isArray(n.featuresMenu)?n.featuresMenu:[];v(t),y(s),N(!1),console.log("Business features loaded:",{map:t,menu:s})})()},[h]),(0,t.useEffect)(()=>{if(!h)return void u(e=>{try{if(JSON.stringify(e)===JSON.stringify(ya.A))return e}catch(a){}return ya.A});let e=ya.A;h.accessTo&&(e=e.filter(e=>!!h.accessTo[e.name])),f||(Array.isArray(b)&&b.length>0?e=ba(e,b,g):Object.keys(g||{}).length>0&&(e=va(e,g))),u(a=>{try{if(JSON.stringify(a)===JSON.stringify(e))return a}catch(n){}return e})},[h,g,b,f]);const[j,A]=(0,t.useState)(!1),[C,P]=(0,t.useState)("ImpactVibes"),[S,z]=(0,t.useState)(""),[w,E]=(0,t.useState)(""),[D,I]=(0,t.useState)(""),k=e=>{e&&e.preventDefault&&e.preventDefault();const a=!o;d(a);try{localStorage.setItem("sidebar-collapsed",a?"true":"false")}catch(n){}};return(0,t.useEffect)(()=>{!async function(){try{const e=await i.A.get("/api/config",{headers:{Authorization:"Bearer ".concat(x)}});P("ImpactVibes"),e.data&&e.data.result&&Array.isArray(e.data.result)&&e.data.result.map(e=>{null!==e&&void 0!==e&&e.logo&&e.logo[0]&&(z(e.logo[0].Headerlogo||""),E(e.logo[0].Footerlogo||""),I(e.logo[0].Adminlogo||""))})}catch(e){console.warn("Config API failed, using defaults:",e.message),P("ImpactVibes"),z(""),E(""),I("")}}()},[]),(0,c.jsxs)(s._z,{position:"fixed",unfoldable:r,visible:l,className:o?"c-sidebar c-sidebar-minimized":"c-sidebar",style:{background:"#FFFFFF",backgroundImage:"none"},onVisibleChange:a=>{const n=Boolean(a);if(n!==l)try{e({type:"set",payload:{sidebarShow:n}})}catch(t){console.warn("Failed to dispatch sidebar visibility change",t)}},children:[(0,c.jsx)(s.lD,{className:"d-none d-md-flex sidebar-brand",style:{padding:0,height:56},children:(0,c.jsxs)("div",{className:"sidebar-brand-inner",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px"},children:[(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,c.jsx)(ua.N_,{to:"/dashboard",className:"sidebar-logo","aria-label":"Go to dashboard",onClick:e=>(e=>{const a=e&&e.nativeEvent?e.nativeEvent:e,n=a&&(a.ctrlKey||a.metaKey||a.shiftKey||a.altKey),t=a&&(1===a.button||2===a.which);n||t||(e&&e.preventDefault&&e.preventDefault(),k())})(e),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),k())},children:(0,c.jsx)("img",{src:D?"".concat(D):"/logos/sidebarlogo.ico",alt:"Just Connect",style:{width:44,height:44,objectFit:"contain"}})}),(0,c.jsxs)("button",{className:"sidebar-title",onClick:e=>{e.preventDefault(),k()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),k())},"aria-pressed":o,title:o?"Expand sidebar":"Collapse sidebar",children:[(0,c.jsxs)("div",{className:"sidebar-title-main",children:[(0,c.jsx)("span",{style:{color:"#0760c7ff"},children:"just"}),(0,c.jsx)("span",{style:{marginLeft:6,color:"#f97316"},children:"Connect"})]}),(0,c.jsx)("div",{className:"sidebar-title-sub",children:"Enterprise Conversations Simplified"})]})]}),(0,c.jsx)("button",{className:"sidebar-toggle-btn",onClick:()=>{const e=!o;d(e);try{localStorage.setItem("sidebar-collapsed",e?"true":"false")}catch(a){}},"aria-label":o?"Expand sidebar":"Collapse sidebar",title:o?"Expand sidebar":"Collapse sidebar",children:(0,c.jsx)("span",{className:"sidebar-toggle-icon","aria-hidden":!0,children:"\u203a"})})]})}),(0,c.jsx)(s.Ti,{children:(0,c.jsx)(pa.A,{children:(0,c.jsx)(ha,{items:m})})}),(0,c.jsx)("div",{className:"sidebar-divider","aria-hidden":!0}),(0,c.jsx)("div",{className:"sidebar-footer p-2",children:(0,c.jsx)("div",{className:"sidebar-footer-inner",style:{display:"flex",alignItems:"center",gap:8},children:(0,c.jsx)("div",{className:"sidebar-user-status",children:(0,c.jsx)(Sa,{})})})})]})};var Na=t.memo(fa);var xa=n(35739).A,ja=n(82200),Aa=n(82754),Ca=n(27760),Pa=n(3629);var Sa=function(){var e;const{userStatus:a,userData:n,updateStatus:t,loading:i,STATUS_OPTIONS:l,STATUS_COLORS:r}=(0,ja.I)(),o=(0,na.Zp)(),d=e=>{t(e)},m=e=>{switch(e){case l.ONLINE:return"Online";case l.OFFLINE:return"Offline";case l.LUNCH:return"Lunch";case l.BREAK:return"Break";default:return"Unknown"}},u=n&&((null===(e=n.avatar)||void 0===e?void 0:e.url)||n.avatar||n.photo||n.profileImage||n.profile_image||null);return(0,c.jsxs)(s.ji,{variant:"nav-item",children:[(0,c.jsx)(s.VH,{caret:!1,placement:"bottom-end",className:"py-0 sidebar-user-chip",style:{cursor:"pointer"},children:(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[i?(0,c.jsx)(s.JT,{size:"sm",color:"primary",className:"me-2",style:{width:"10px",height:"10px"}}):null,(0,c.jsxs)("span",{className:"user-avatar-wrapper d-inline-flex align-items-center",children:[u?(0,c.jsx)(s.re,{src:u,size:"md",className:"user-avatar"}):(0,c.jsx)(s.re,{size:"md",className:"user-avatar",children:n&&n.name?n.name.charAt(0):"U"}),(0,c.jsx)("span",{className:"status-dot status-".concat(a||"offline"),"aria-hidden":!0})]}),(0,c.jsx)("span",{className:"ms-2 sidebar-user-text",children:n?(0,c.jsxs)("small",{className:"d-flex flex-column",children:[(0,c.jsx)("span",{children:n.name}),(0,c.jsx)("span",{className:"text-muted",children:m(a)})]}):m(a)})]})}),(0,c.jsxs)(s.QR,{className:"pt-0",placement:"bottom-end",children:[n&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.IE,{className:"bg-light fw-semibold py-2",children:"Account"}),(0,c.jsxs)(s.kd,{disabled:!0,className:"pb-2",children:[(0,c.jsx)("div",{children:(0,c.jsx)("strong",{children:n.name})}),(0,c.jsxs)("small",{className:"text-muted",children:["Last seen: ",n.lastSeen?new Date(n.lastSeen).toLocaleString():"Unknown"]})]}),(0,c.jsx)(s.A9,{})]}),(0,c.jsx)(s.IE,{className:"bg-light fw-semibold py-2",children:"Status"}),(0,c.jsxs)(s.kd,{onClick:()=>d(l.ONLINE),active:a===l.ONLINE,disabled:i,children:[(0,c.jsx)(s.$X,{color:r[l.ONLINE],shape:"rounded-pill",className:"me-2"}),"Online"]}),(0,c.jsxs)(s.kd,{onClick:()=>d(l.OFFLINE),active:a===l.OFFLINE,disabled:i,children:[(0,c.jsx)(s.$X,{color:r[l.OFFLINE],shape:"rounded-pill",className:"me-2"}),"Offline"]}),(0,c.jsxs)(s.kd,{onClick:()=>d(l.LUNCH),active:a===l.LUNCH,disabled:i,children:[(0,c.jsx)(s.$X,{color:r[l.LUNCH],shape:"rounded-pill",className:"me-2"}),"Lunch"]}),(0,c.jsxs)(s.kd,{onClick:()=>d(l.BREAK),active:a===l.BREAK,disabled:i,children:[(0,c.jsx)(s.$X,{color:r[l.BREAK],shape:"rounded-pill",className:"me-2"}),"Break"]}),(0,c.jsx)(s.A9,{}),(0,c.jsx)(s.IE,{className:"bg-light fw-semibold py-2",children:"Settings"}),(0,c.jsxs)(s.kd,{href:"#",onClick:e=>{e.preventDefault(),o("/profile/edit")},children:[(0,c.jsx)(ca.Ay,{icon:Aa.o,className:"me-2"}),"Edit Profile"]}),(0,c.jsxs)(s.kd,{href:"#",onClick:e=>{e.preventDefault(),o("/change_password")},children:[(0,c.jsx)(ca.Ay,{icon:Ca.K,className:"me-2"}),"Change Password"]}),(0,c.jsxs)(s.kd,{href:"#",onClick:e=>{e.preventDefault(),(async()=>{try{localStorage.removeItem("authToken"),ma()("success!","Logged Out","success"),o("/")}catch(e){console.error("Signout error",e)}})()},children:[(0,c.jsx)(ca.Ay,{icon:Pa.q,className:"me-2"}),"Log Out"]})]})]})};const za={active:!1,message:"System maintenance is scheduled",title:"",scheduledAt:null,resolvedAt:null,severity:"warning"},wa=async()=>{try{const e=await(0,o.H2)(o.Hr.MAINTENANCE,"GET");if(e.success&&e.maintenances&&e.maintenances.length>0){const a=e.maintenances.filter(e=>"scheduled"===e.status&&e.targetPlatforms.includes("business")&&!e.resolvedAt);a.sort((e,a)=>new Date(a.scheduledAt)-new Date(e.scheduledAt));const n=a[0];if(n){console.log("Found current maintenance:",n);const e={active:"scheduled"===n.status,title:n.title,message:n.description,scheduledAt:n.scheduledAt,resolvedAt:n.resolvedAt,severity:"warning",id:n._id};return console.log("Transformed config:",e),e}}return za}catch(e){return console.error("Error fetching maintenance status:",e),za}},Ea=e=>{if(console.log("Checking maintenance window for config:",e),!e)return console.log("No config provided"),!1;if(!e.active)return console.log("Maintenance not active"),!1;const a=(new Date).getTime();if(console.log("Current time:",new Date(a).toISOString()),!e.scheduledAt)return console.log("No scheduled time, considering active since status is scheduled"),!0;const n=new Date(e.scheduledAt).getTime();if(console.log("Scheduled time:",new Date(n).toISOString()),!e.resolvedAt){const e=a>=n-3e5;return console.log("No resolved time, showing based on schedule. Is active:",e),e}const t=new Date(e.resolvedAt).getTime();console.log("Resolved time:",new Date(t).toISOString());const s=a>=n-3e5&&a<=t;return console.log("Checking against schedule and resolution. Is active:",s),s};var Da=()=>{const[e,a]=(0,t.useState)({active:!1,title:"",message:"",scheduledAt:null,resolvedAt:null,severity:"warning"}),[n,s]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{const e=async()=>{try{const e=await wa();console.log("Maintenance config:",e),a(e);const n=e.active&&Ea(e);console.log("Should show maintenance:",n),s(n)}catch(e){console.error("Error checking maintenance status:",e)}finally{l(!1)}};e();const n=setInterval(e,6e4);return()=>clearInterval(n)},[]),(0,c.jsxs)("div",{className:"main-layout",children:[(0,c.jsx)(Na,{}),(0,c.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[i?(0,c.jsx)("div",{children:"Loading maintenance status..."}):n?(0,c.jsx)(xa,{title:e.title,message:e.message,scheduledAt:e.scheduledAt,resolvedAt:e.resolvedAt,severity:e.severity,showCountdown:!0,dismissible:!0,onClose:()=>s(!1)}):null,(0,c.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,c.jsx)(ra,{})})]})]})}}}]);