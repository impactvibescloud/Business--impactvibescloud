"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1703],{1703:function(e,a,n){n.r(a);var t=n(9950),s=n(49911),r=n(26910),i=n(28429),l=n(11031),o=n(44414);a.default=()=>{const[e,a]=(0,t.useState)(""),[n,d]=(0,t.useState)(!1),[c,u]=(0,t.useState)(),m=(0,l.g)(),[h,p]=(0,t.useState)({name:"",email:"",phone:""}),x=(0,i.Zp)(),j=e=>{const{name:a,value:n}=e.target;p({...h,[a]:n})};return(0,t.useEffect)(()=>{(async()=>{let e=await r.A.get("/api/v1/user/details",{headers:{Authorization:"Bearer ".concat(m)}});e.data.success&&(p({...e.data.user}),e.data.user.avatar&&u(e.data.user.avatar.url))})()},[]),(0,o.jsx)("div",{children:(0,o.jsx)(s.T5,{children:(0,o.jsx)(s.sK,{className:"justify-content-center mt-3",children:(0,o.jsx)(s.UF,{md:8,className:"mt-5",children:(0,o.jsx)(s.x$,{children:(0,o.jsxs)(s.E$,{className:"p-4",children:[(0,o.jsx)("h2",{children:"Edit Profile"}),(0,o.jsx)(s.W6,{children:(0,o.jsxs)(s.qI,{className:"row g-3",children:[(0,o.jsxs)(s.UF,{xs:12,children:[(0,o.jsx)(s.A6,{htmlFor:"inputAddress",children:"Name *"}),(0,o.jsx)(s.OG,{id:"inputAddress",placeholder:"",name:"name",value:h.name,onChange:j})]}),(0,o.jsxs)(s.UF,{md:6,children:[(0,o.jsx)(s.A6,{htmlFor:"inputEmail4",children:"Email *"}),(0,o.jsx)(s.OG,{type:"email",id:"inputEmail4",name:"email",value:h.email,onChange:j})]}),(0,o.jsxs)(s.UF,{md:6,children:[(0,o.jsx)(s.A6,{htmlFor:"inputPassword4",children:"Phone *"}),(0,o.jsx)(s.OG,{type:"number",id:"inputPassword4",minLength:8,name:"phone",value:h.phone,onChange:j})]}),(0,o.jsxs)(s.UF,{xs:12,children:[(0,o.jsx)(s.Q_,{onClick:async function(){if(""===h.name||""===h.email||""===h.phone)return void swal({title:"Warning",text:"Fill all mandatory fields",icon:"error",button:"Close",dangerMode:!0});const a=new FormData;a.append("name",h.name),a.append("email",h.email),a.append("phone",h.phone),a.append("avatar",e),d(!0);try{!0===(await r.A.put("/api/v1/user/update/profile",a,{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(m),"Content-Type":"multipart/formdata"}})).data.success&&(d(!1),swal({title:"Edited",text:"Profile Edited Successfully!",icon:"success",button:"Return"}),x(-1))}catch(s){var n,t;const e=(null===s||void 0===s||null===(n=s.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Something went wrong!";d(!1),swal({title:"Warning",text:e,icon:"error",button:"Retry",dangerMode:!0})}},color:"primary",children:n?"Loading...":"Submit"}),(0,o.jsx)(s.Q_,{className:"ml-2",onClick:()=>{x("/dashboard")},color:"warning",children:"Cancel"})]})]})})]})})})})})})}}}]);